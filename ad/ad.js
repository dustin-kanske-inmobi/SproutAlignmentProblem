window._Sprout={sprout:{object:{displayState:{ID:"Sprout_KgA0LQ5UAjm1hNXe",width:300,height:50,stylesText:"height:50px;width:300px;"},adFormat:"standard",adNetwork:"none",ID:"KgA0LQ5UAjm1hNXe",gaProfileID:"",startPageID:"",trackBase:"",sproutTrackingEndpoint:"http://beacon.mung.sproutinc.com/",sproutInteractionTrackingEnabled:!0,reportingLabel:"",hasMousePositionTokens:!1,width:300,height:50,lockOrientationValue:"default",closeButtonType:"default",closeButtonSource:""},classname:"sprout.ad.Sprout",
children:[{object:{ID:"Page2",name:"Master Background",masterType:"BACKGROUND",displayState:{ID:"Page2",fillColor:"#ffffff",fillColorTo:"#cecece",fillType:"SOLID",visibility:!1,stylesText:"background:#ffffff;"},pageAnimations:{pageHide:0,pageShow:0}},classname:"sprout.ad.page.Page",children:[]},{object:{ID:"Page1",name:"Untitled Page",displayState:{ID:"Page1",fillColor:"transparent",fillColorTo:"transparent",fillType:"NONE",visibility:!1,stylesText:"background:transparent;"},pageAnimations:{pageHide:0,
pageShow:0},masterBG:!0,masterFG:!0,trackingLabel:"Untitled Page"},classname:"sprout.ad.page.Page",children:[{object:{ID:"Element_34f335cf",name:"",displayState:{ID:"Element_34f335cf",x:0,y:0,width:300,height:50,rotation:0,fillColor:"#0000ff",fillColorTo:"#00ff00",fillType:"VERTICAL",opacity:1,scale:1,visibility:!0,borderColor:"#000000",borderWidth:0,borderStyle:"none",stylesText:"cursor:auto;height:50px;visibility:hidden;background:-webkit-gradient(linear,left top, left bottom,from(#0000ff),to(#00ff00));width:300px;opacity:1.0;left:0px;border:0px #000000 none;top:0px;"},
link:{url:"",target:"",clickTag:""},properties:{x:0,y:0,width:300,height:50,minimumWidth:0,minimumHeight:0,rotation:0,fillColor:"#0000ff",fillColorTo:"#00ff00",fillType:"VERTICAL",opacity:100,scale:100,visibility:!0,borderColor:"#000000",borderWidth:0,borderStyle:"none"}},classname:"sprout.ad.element.RectangleElement",children:[]},{object:{ID:"Element_2d128bb9",name:"",displayState:{ID:"Element_2d128bb9",x:-5,y:-5,width:309,height:59,rotation:0,fillColor:"transparent",fillColorTo:"transparent",fillType:"NONE",
opacity:1,scale:1,visibility:!0,borderColor:"#000000",borderWidth:0,borderStyle:"none",stylesText:"cursor:pointer;height:59px;visibility:hidden;background:transparent;width:309px;opacity:1.0;left:-5px;border:0px #000000 none;top:-5px;"},link:{url:"",target:"",clickTag:""},properties:{x:-5,y:-5,width:309,height:59,minimumWidth:0,minimumHeight:0,rotation:0,fillColor:"transparent",fillColorTo:"transparent",fillType:"NONE",opacity:100,scale:100,visibility:!0,borderColor:"#000000",borderWidth:0,borderStyle:"none"}},
classname:"sprout.ad.element.RectangleElement",children:[{object:{ID:"NODE_5",trigger:"mouseClick",triggerNodeID:"Element_2d128bb9",parameters:{targetPage:"sp:_NEXTPAGE"}},classname:"sprout.ad.action.GoToPageAction",children:[]},{object:{ID:"NODE_6",trigger:"mouseClick",triggerNodeID:"Element_2d128bb9",parameters:{direction:"bottom right",width:300,height:100}},classname:"sprout.ad.action.ExpandSproutAction",children:[]}]}]},{object:{ID:"Page_86fe59f5",name:"Untitled Page 2",displayState:{ID:"Page_86fe59f5",
fillColor:"transparent",fillColorTo:"transparent",fillType:"NONE",visibility:!1,stylesText:"background:transparent;"},pageAnimations:{pageHide:0,pageShow:0},masterBG:!0,masterFG:!0,trackingLabel:"Untitled Page 2"},classname:"sprout.ad.page.Page",children:[{object:{ID:"Element_ef19e653",name:"",displayState:{ID:"Element_ef19e653",x:0,y:0,width:300,height:100,rotation:0,fillColor:"#ff07a8",fillColorTo:"#fff321",fillType:"VERTICAL",opacity:1,scale:1,visibility:!0,borderColor:"#000000",borderWidth:0,
borderStyle:"none",stylesText:"cursor:auto;height:100px;visibility:hidden;background:-webkit-gradient(linear,left top, left bottom,from(#ff07a8),to(#fff321));width:300px;opacity:1.0;left:0px;border:0px #000000 none;top:0px;"},link:{url:"",target:"",clickTag:""},properties:{x:0,y:0,width:300,height:100,minimumWidth:0,minimumHeight:0,rotation:0,fillColor:"#ff07a8",fillColorTo:"#fff321",fillType:"VERTICAL",opacity:100,scale:100,visibility:!0,borderColor:"#000000",borderWidth:0,borderStyle:"none"}},classname:"sprout.ad.element.RectangleElement",
children:[]},{object:{ID:"Element_3c5fdb03",name:"",displayState:{ID:"Element_3c5fdb03",x:-7,y:-7,width:313,height:112,rotation:0,fillColor:"transparent",fillColorTo:"transparent",fillType:"NONE",opacity:1,scale:1,visibility:!0,borderColor:"#000000",borderWidth:0,borderStyle:"none",stylesText:"cursor:pointer;height:112px;visibility:hidden;background:transparent;width:313px;opacity:1.0;left:-7px;border:0px #000000 none;top:-7px;"},link:{url:"",target:"",clickTag:""},properties:{x:-7,y:-7,width:313,
height:112,minimumWidth:0,minimumHeight:0,rotation:0,fillColor:"transparent",fillColorTo:"transparent",fillType:"NONE",opacity:100,scale:100,visibility:!0,borderColor:"#000000",borderWidth:0,borderStyle:"none"}},classname:"sprout.ad.element.RectangleElement",children:[{object:{ID:"NODE_10",trigger:"mouseClick",triggerNodeID:"Element_3c5fdb03",parameters:{targetPage:"sp:_NEXTPAGE"}},classname:"sprout.ad.action.GoToPageAction",children:[]},{object:{ID:"NODE_11",trigger:"mouseClick",triggerNodeID:"Element_3c5fdb03",
parameters:{direction:"top left",width:300,height:50}},classname:"sprout.ad.action.CollapseSproutAction",children:[]}]}]},{object:{ID:"Page3",name:"Master Foreground",masterType:"FOREGROUND",displayState:{ID:"Page3",fillColor:"transparent",fillColorTo:"#cecece",fillType:"SOLID",visibility:!1,stylesText:"background:transparent;"},pageAnimations:{pageHide:0,pageShow:0}},classname:"sprout.ad.page.Page",children:[]}]},version:3};
(function(l,k,h){function E(a,b){return a.getStartTime()==b.getStartTime()?a.duration-b.duration:a.getStartTime()-b.getStartTime()}function F(a,b,c,e,g){"undefined"==typeof g&&(g=1.70158);return c*(a/=e)*a*((g+1)*a-g)+b}function G(a,b,c,e,g){"undefined"==typeof g&&(g=1.70158);return c*((a=a/e-1)*a*((g+1)*a+g)+1)+b}function H(a,b,c,e,g){"undefined"==typeof g&&(g=1.70158);return 1>(a/=e/2)?c/2*a*a*(((g*=1.525)+1)*a-g)+b:c/2*((a-=2)*a*(((g*=1.525)+1)*a+g)+2)+b}function z(a,b,c,e){return c-w(e-a,0,c,
e)+b}function w(a,b,c,e){return(a/=e)<1/2.75?7.5625*c*a*a+b:a<2/2.75?c*(7.5625*(a-=1.5/2.75)*a+0.75)+b:a<2.5/2.75?c*(7.5625*(a-=2.25/2.75)*a+0.9375)+b:c*(7.5625*(a-=2.625/2.75)*a+0.984375)+b}function I(a,b,c,e){return a<e/2?0.5*z(2*a,0,c,e)+b:0.5*w(2*a-e,0,c,e)+0.5*c+b}function J(a,b,c,e,g,f){if(0==a)return b;if(1==(a/=e))return b+c;f||(f=0.3*e);!g||g<Math.abs(c)?(g=c,c=f/4):c=f/(2*Math.PI)*Math.asin(c/g);return-(g*Math.pow(2,10*(a-=1))*Math.sin(2*(a*e-c)*Math.PI/f))+b}function K(a,b,c,e,g,f){if(0==
a)return b;if(1==(a/=e))return b+c;f||(f=0.3*e);if(!g||g<Math.abs(c))var g=c,i=f/4;else i=f/(2*Math.PI)*Math.asin(c/g);return g*Math.pow(2,-10*a)*Math.sin(2*(a*e-i)*Math.PI/f)+c+b}function L(a,b,c,e,g,f){if(0==a)return b;if(2==(a/=e/2))return b+c;f||(f=1.5*0.3*e);if(!g||g<Math.abs(c))var g=c,i=f/4;else i=f/(2*Math.PI)*Math.asin(c/g);return 1>a?-0.5*g*Math.pow(2,10*(a-=1))*Math.sin(2*(a*e-i)*Math.PI/f)+b:0.5*g*Math.pow(2,-10*(a-=1))*Math.sin(2*(a*e-i)*Math.PI/f)+c+b}function M(a,b,c,e){return c*(a/=
e)*a*a+b}function N(a,b,c,e){return c*((a=a/e-1)*a*a+1)+b}function O(a,b,c,e){return 1>(a/=0.5*e)?0.5*c*a*a*a+b:0.5*c*((a-=2)*a*a+2)+b}function P(a,b,c,e){return 0==a?b:c*Math.pow(2,10*(a/e-1))+b-0.0010*c}function Q(a,b,c,e){return a==e?b+c:c*(-Math.pow(2,-10*a/e)+1)+b}function R(a,b,c,e){return 0==a?b:a==e?b+c:1>(a/=0.5*e)?0.5*c*Math.pow(2,10*(a-1))+b:0.5*c*(-Math.pow(2,-10*--a)+2)+b}function S(a,b,c,e){return-c*Math.cos(0.5*a/e*Math.PI)+c+b}function T(a,b,c,e){return c*Math.sin(0.5*a/e*Math.PI)+
b}function U(a,b,c,e){return 0.5*-c*(Math.cos(Math.PI*a/e)-1)+b}function V(a,b,c,e){return c*(a/=e)*a*a*a*a+b}function W(a,b,c,e){return c*((a=a/e-1)*a*a*a*a+1)+b}function X(a,b,c,e){return 1>(a/=0.5*e)?0.5*c*a*a*a*a*a+b:0.5*c*((a-=2)*a*a*a*a+2)+b}function A(a,b,c,e){return c*a/e+b}var f=f||{};f.global=this;f.DEBUG=!0;f.LOCALE="en";f.provide=function(a){if(f.isProvided_(a))throw Error('Namespace "'+a+'" already declared.');delete f.implicitNamespaces_[a];for(var b=a;(b=b.substring(0,b.lastIndexOf(".")))&&
!f.getObjectByName(b);)f.implicitNamespaces_[b]=!0;f.exportPath_(a)};f.setTestOnly=function(){};f.isProvided_=function(a){return!f.implicitNamespaces_[a]&&!!f.getObjectByName(a)};f.implicitNamespaces_={};f.exportPath_=function(a,b,c){a=a.split(".");c=c||f.global;!(a[0]in c)&&c.execScript&&c.execScript("var "+a[0]);for(var e;a.length&&(e=a.shift());)!a.length&&f.isDef(b)?c[e]=b:c=c[e]?c[e]:c[e]={}};f.getObjectByName=function(a,b){for(var c=a.split("."),e=b||f.global,g;g=c.shift();)if(f.isDefAndNotNull(e[g]))e=
e[g];else return null;return e};f.globalize=function(a,b){var c=b||f.global,e;for(e in a)c[e]=a[e]};f.addDependency=function(a,b,c){for(var e,a=a.replace(/\\/g,"/"),g=f.dependencies_,n=0;e=b[n];n++)g.nameToPath[e]=a,a in g.pathToNames||(g.pathToNames[a]={}),g.pathToNames[a][e]=!0;for(e=0;b=c[e];e++)a in g.requires||(g.requires[a]={}),g.requires[a][b]=!0};f.ENABLE_DEBUG_LOADER=!1;f.require=function(a){if(!f.isProvided_(a)){if(f.ENABLE_DEBUG_LOADER){var b=f.getPathFromDeps_(a);if(b){f.included_[b]=
!0;f.writeScripts_();return}}a="goog.require could not find: "+a;f.global.console&&f.global.console.error(a);throw Error(a);}};f.basePath="";f.global.CLOSURE_BASE_PATH;f.global.CLOSURE_NO_DEPS;f.global.CLOSURE_IMPORT_SCRIPT;f.nullFunction=function(){};f.identityFunction=function(a){return a};f.abstractMethod=function(){throw Error("unimplemented abstract method");};f.addSingletonGetter=function(a){a.getInstance=function(){if(a.instance_)return a.instance_;f.DEBUG&&(f.instantiatedSingletons_[f.instantiatedSingletons_.length]=
a);return a.instance_=new a}};f.instantiatedSingletons_=[];f.ENABLE_DEBUG_LOADER&&(f.included_={},f.dependencies_={pathToNames:{},nameToPath:{},requires:{},visited:{},written:{}},f.inHtmlDocument_=function(){var a=f.global.document;return"undefined"!=typeof a&&"write"in a},f.findBasePath_=function(){if(f.global.CLOSURE_BASE_PATH)f.basePath=f.global.CLOSURE_BASE_PATH;else if(f.inHtmlDocument_())for(var a=f.global.document.getElementsByTagName("script"),b=a.length-1;0<=b;--b){var c=a[b].src,e=c.lastIndexOf("?"),
e=-1==e?c.length:e;if("base.js"==c.substr(e-7,7)){f.basePath=c.substr(0,e-7);break}}},f.importScript_=function(a){var b=f.global.CLOSURE_IMPORT_SCRIPT||f.writeScriptTag_;!f.dependencies_.written[a]&&b(a)&&(f.dependencies_.written[a]=!0)},f.writeScriptTag_=function(a){return f.inHtmlDocument_()?(f.global.document.write('<script type="text/javascript" src="'+a+'"><\/script>'),!0):!1},f.writeScripts_=function(){function a(g){if(!(g in e.written)){if(!(g in e.visited)&&(e.visited[g]=!0,g in e.requires))for(var i in e.requires[g])if(!f.isProvided_(i))if(i in
e.nameToPath)a(e.nameToPath[i]);else throw Error("Undefined nameToPath for "+i);g in c||(c[g]=!0,b.push(g))}}var b=[],c={},e=f.dependencies_,g;for(g in f.included_)e.written[g]||a(g);for(g=0;g<b.length;g++)if(b[g])f.importScript_(f.basePath+b[g]);else throw Error("Undefined script input");},f.getPathFromDeps_=function(a){return a in f.dependencies_.nameToPath?f.dependencies_.nameToPath[a]:null},f.findBasePath_(),f.global.CLOSURE_NO_DEPS||f.importScript_(f.basePath+"deps.js"));f.typeOf=function(a){var b=
typeof a;if(b=="object")if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if(c=="[object Window]")return"object";if(c=="[object Array]"||typeof a.length=="number"&&typeof a.splice!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("splice"))return"array";if(c=="[object Function]"||typeof a.call!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if(b=="function"&&typeof a.call=="undefined")return"object";return b};f.isDef=function(a){return a!==h};f.isNull=function(a){return a===null};f.isDefAndNotNull=function(a){return a!=null};f.isArray=function(a){return f.typeOf(a)=="array"};f.isArrayLike=function(a){var b=f.typeOf(a);return b=="array"||b=="object"&&typeof a.length=="number"};f.isDateLike=function(a){return f.isObject(a)&&typeof a.getFullYear=="function"};f.isString=function(a){return typeof a=="string"};f.isBoolean=function(a){return typeof a==
"boolean"};f.isNumber=function(a){return typeof a=="number"};f.isFunction=function(a){return f.typeOf(a)=="function"};f.isObject=function(a){var b=typeof a;return b=="object"&&a!=null||b=="function"};f.getUid=function(a){return a[f.UID_PROPERTY_]||(a[f.UID_PROPERTY_]=++f.uidCounter_)};f.removeUid=function(a){"removeAttribute"in a&&a.removeAttribute(f.UID_PROPERTY_);try{delete a[f.UID_PROPERTY_]}catch(b){}};f.UID_PROPERTY_="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36);f.uidCounter_=
0;f.getHashCode=f.getUid;f.removeHashCode=f.removeUid;f.cloneObject=function(a){var b=f.typeOf(a);if(b=="object"||b=="array"){if(a.clone)return a.clone();var b=b=="array"?[]:{},c;for(c in a)b[c]=f.cloneObject(a[c]);return b}return a};Object.prototype.clone;f.bindNative_=function(a,b,c){return a.call.apply(a.bind,arguments)};f.bindJs_=function(a,b,c){if(!a)throw Error();if(arguments.length>2){var e=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);
Array.prototype.unshift.apply(c,e);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}};f.bind=function(a,b,c){f.bind=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f.bindNative_:f.bindJs_;return f.bind.apply(null,arguments)};f.partial=function(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}};f.mixin=function(a,b){for(var c in b)a[c]=
b[c]};f.now=Date.now||function(){return+new Date};f.globalEval=function(a){if(f.global.execScript)f.global.execScript(a,"JavaScript");else if(f.global.eval){if(f.evalWorksForGlobals_==null){f.global.eval("var _et_ = 1;");if(typeof f.global._et_!="undefined"){delete f.global._et_;f.evalWorksForGlobals_=true}else f.evalWorksForGlobals_=false}if(f.evalWorksForGlobals_)f.global.eval(a);else{var b=f.global.document,c=b.createElement("script");c.type="text/javascript";c.defer=false;c.appendChild(b.createTextNode(a));
b.body.appendChild(c);b.body.removeChild(c)}}else throw Error("goog.globalEval not available");};f.evalWorksForGlobals_=null;f.cssNameMapping_;f.cssNameMappingStyle_;f.getCssName=function(a,b){var c=function(a){return f.cssNameMapping_[a]||a},e=function(a){for(var a=a.split("-"),b=[],d=0;d<a.length;d++)b.push(c(a[d]));return b.join("-")},e=f.cssNameMapping_?f.cssNameMappingStyle_=="BY_WHOLE"?c:e:function(a){return a};return b?a+"-"+e(b):e(a)};f.setCssNameMapping=function(a,b){f.cssNameMapping_=a;
f.cssNameMappingStyle_=b};f.global.CLOSURE_CSS_NAME_MAPPING;f.global.CLOSURE_CSS_NAME_MAPPING&&(f.cssNameMapping_=f.global.CLOSURE_CSS_NAME_MAPPING);f.getMsg=function(a,b){var c=b||{},e;for(e in c)var g=(""+c[e]).replace(/\$/g,"$$$$"),a=a.replace(RegExp("\\{\\$"+e+"\\}","gi"),g);return a};f.exportSymbol=function(a,b,c){f.exportPath_(a,b,c)};f.exportProperty=function(a,b,c){a[b]=c};f.inherits=function(a,b){function c(){}c.prototype=b.prototype;a.superClass_=b.prototype;a.prototype=new c;a.prototype.constructor=
a};f.base=function(a,b,c){var e=arguments.callee.caller;if(e.superClass_)return e.superClass_.constructor.apply(a,Array.prototype.slice.call(arguments,1));for(var g=Array.prototype.slice.call(arguments,2),f=false,i=a.constructor;i;i=i.superClass_&&i.superClass_.constructor)if(i.prototype[b]===e)f=true;else if(f)return i.prototype[b].apply(a,g);if(a[b]===e)return a.constructor.prototype[b].apply(a,g);throw Error("goog.base called from a method of one name to a method of a different name");};f.scope=
function(a){a.call(f.global)};var b={SQuery:{}},j=function(){function a(b){return b._xuiEventID?b._xuiEventID:b._xuiEventID=++a.id}function b(a,d){var c=o[a]=o[a]||{};return c[d]=c[d]||[]}function c(c,e,g,f){c=a(c);e=b(c,e);c=function(a){a.data=f;if(g(a)===false){a.preventDefault();a.stopPropagation()}};c.guid=g.guid=g.guid||++a.id;c.handler=g;e.push(c);return c}var e,g=/^#?([\w-]+)$/,f=/^#/,i=/<([\w:]+)/,m=new String("string"),s=/^(\s|\u00A0)+|(\s|\u00A0)+$/g,j=function(a){return[].slice.call(a,
0)};try{j(l.documentElement.childNodes)}catch(aa){j=function(a){for(var b=[],d=0;a[d];d++)b.push(a[d]);return b}}k.$=k.sQuery=e=function(a,b){return new e.fn.find(a,b)};if(![].forEach)Array.prototype.forEach=function(a,b){var d=this.length||0,c=0;if(typeof a=="function")for(;c<d;c++)a.call(b,this[c],c,this)};e.fn=e.prototype={extend:function(a){for(var b in a)this[b]=a[b]},find:function(a,b){var d=[],c;if(a)if(b===h&&this.length)d=this.each(function(b){d=d.concat(j(e(a,b)))}).reduce(d);else{b=b||
l;if(typeof a==m){if(g.test(a)){d=f.test(a)?[b.getElementById(a.substr(1))]:b.getElementsByTagName(a);d[0]==null&&(d=[])}else if(i.test(a)){c=l.createElement("i");c.innerHTML=a;j(c.childNodes).forEach(function(a){d.push(a)})}else d=k.Sizzle!==h?Sizzle(a):b.querySelectorAll(a);d=j(d)}else if(a instanceof Array)d=a;else if(a.toString()=="[object NodeList]"||a instanceof e)d=j(a);else if(a.nodeName||a===k)d=[a]}else return this;return this.set(d)},replaceWith:function(a){if(typeof a!=="string")var b=
a.get(0),a=b.parentNode.removeChild(b);return this.each(function(){var b=this.nextSibling,d=this.parentNode;d.removeChild(this);b?d.insertBefore(a,b):e(d).append(a)})},set:function(a){var b=e();b.cache=j(this.length?this:[]);b.length=0;[].push.apply(b,a);return b},reduce:function(a,b){var d=[],a=a||j(this);a.forEach(function(a){d.indexOf(a,0,b)<0&&d.push(a)});return d},get:function(a){return a==null?j(this):this[a]},each:function(a){for(var b=0,d=this.length;b<d;++b)if(a.call(this[b],this[b],b,this)===
false)break;return this}};e.fn.find.prototype=e.fn;e.extend=e.fn.extend;e.extend({isFunction:function(a){return a!==null&&a!==h&&(typeof a==="function"||a.toString()==="[object Function]")},isArray:function(a){return a!==null&&a!==h&&(typeof a=="array"||a.toString()==="[object Array]")},isString:function(a){return typeof a=="string"||typeof a=="object"&&a.constructor.toString().match(/string/i)!=null},isNumeric:function(a){return a-0==a},isUrl:function(a){return/^(ftp|http|https|webcal):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/i.test(a)},
ensureCompleteURL:function(a){/^(((\w+):(\/\/)?)|#)/.test(a)||(a="http://"+a);return a},round:function(a,b){return Math.round(a*Math.pow(10,b))/Math.pow(10,b)},isBoolean:function(a){return typeof a=="boolean"||a=="true"||a=="false"},trim:function(a){return(a||"").replace(s,"")}});e.fn.extend({append:function(a){a=e(a);this.each(function(b){a.each(function(a){b.insertBefore(a,null)})})},prepend:function(a){a=e(a);this.each(function(b){var d=b.firstChild;a.each(function(a){b.insertBefore(a,d)})})},
insertBefore:function(a){a=e(a);this.each(function(b){var d=b.parentNode;a.each(function(a){d.insertBefore(a,b)})})},insertAfter:function(a){a=e(a);this.each(function(b){var d=b.parentNode,c=b.nextSibling;c?a.each(function(a){d.insertBefore(a,c)}):a.each(function(a){d.appendChild(a)})})},remove:function(a){a=e(a);this.each(function(b){a.each(function(a){b.removeChild(a)})})},attr:function(a,b){if(arguments.length==2)return this.each(function(d){d.setAttribute(a,b)});var d=[];this.each(function(b){b=
b.getAttribute(a);b!=null&&d.push(b)});return d},css:function(a,b){return arguments.length>=2?this.each(function(d){d.style[a.replace(/-[a-z]/g,function(a){return a.substr(1).toUpperCase()})]=b}):l.defaultView.getComputedStyle(this[0],"").getPropertyValue(a.replace(/[A-Z]/g,function(a){return"-"+a.toLowerCase()}))},bind:function(a,b,d){if(e.isFunction(b)){d=b;b=h}this.each(function(e){e.addEventListener(a,c(e,a,d,b),false)})},unbind:function(c,e){this.each(function(g){for(var f=a(g),i=b(f,c),n=i.length;n--;)if(e===
h||e.guid===i[n].guid){g.removeEventListener(c,i[n],false);var m=o[f][c],j=n,s=m.slice(2);m.length=j<0?m.length+j:j;m.push.apply(m,s)}o[f][c].length===0&&delete o[f][c];for(var k in o[f])return;delete o[f]})},trigger:function(a,b){this.each(function(d){if(d==l&&!d.dispatchEvent)d=l.documentElement;var c=l.createEvent("HTMLEvents");c.initEvent(a,true,true);c.data=b||{};d.dispatchEvent(c)})}});var o={};a.id=1;e.fn.extend({transform:function(a,b){if(arguments.length>=2)return this.each(function(d){for(var c=
{translateX:null,translateY:null,scale:null,rotate:null},g=d.style.webkitTransform.split(/( )(?![^\(\)]*\))/),f,i,n=" ",m=0,j=g.length;m<j;m++){i=g[m].indexOf("(");if(i>=0){f=e.trim(g[m].substring(0,i));i=e.trim(g[m].substring(i+1,g[m].indexOf(")")));c[f]!==h&&(c[f]=i)}}c[a]=b;for(var s in c)c[s]&&(n=n+(s+"("+c[s]+") "));d.style.webkitTransform=e.trim(n)});if(this[0])for(var d=this[0].style.webkitTransform.split(/( )(?![^\(\)]*\))/),c=0,g=d.length;c<g;c++)if(d[c].indexOf(a)!=-1)return d[c].substring(d[c].indexOf("(")+
1,d[c].indexOf(")"))},removeTransform:function(a){return this.each(function(b){for(var d=b.style.webkitTransform.split(/( )(?![^\(\)]*\))/),c=0,e=d.length;c<e;c++)if(d[c].indexOf(a)!=-1){d.splice(c,1);b.style.webkitTransform=d.join(" ");break}})}});return e}(),b=b||{};b.isFunction=function(a){return a!==null&&a!==h&&(typeof a==="function"||a.constructor.toString().match(/function/i)!==null)};b.isObject=function(a){return a!==null&&a!==h&&typeof a==="object"&&!b.isArray(a)&&!b.isString(a)};b.isArray=
function(a){return a!==null&&a!==h&&typeof a==="object"&&a.constructor.toString().match(/array/i)!==null};b.isBoolean=function(a){return a!==null&&a!==h&&typeof a==="boolean"};b.isString=function(a){return a!==null&&a!==h&&(typeof a==="string"||typeof a==="object"&&a.constructor.toString().match(/string/i)!==null)};b.isNumeric=function(a){return!isNaN(a)&&isFinite(a)};b.isUrl=function(a){return/^(ftp|http|https|webcal):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/i.test(a)};b.endsWith=
function(a,b){return a.indexOf(b,a.length-b.length)!==-1};b.clone=function(a){if(b.isObject(a)){var d={},c;for(c in a)d[c]=a[c];return d}if(b.isArray(a)){d=[];c=a.length;for(var e=0;e<c;e++)d.push(a[e]);return d}return a};"object"===typeof k._Sprout&&(k._Sprout.namespace=b);"undefined"==typeof JSON&&(JSON={parse:function(a){return eval("("+a+")")}});b.core={};b.core.Class={};b.core=b.core||{};b.core.Class=function(){};b.core.Class.extending=!1;b.core.Class.prototype.merge=function(a){for(var b in a)this[b]=
a[b]};b.core.Class.prototype.clone=function(){return b.clone(this)};b.core.Class.extend=function(a,d){function c(){!b.core.Class.extending&&this.construct&&this.construct.apply(this,arguments)}var e=this.prototype;b.core.Class.extending=true;var g=new this;b.core.Class.extending=false;for(var f in a)g[f]=b.isFunction(g[f])?function(a,b){return function(){var d=this._super;this._super=e[a];var c=b.apply(this,arguments);this._super=d;return c}}(f,a[f]):a[f];c.prototype=g;c.constructor=c;c.extend=arguments.callee;
b.core.Class.declareClass(d,c);return c};b.core.Class.classes={};b.core.Class.declareClass=function(a,d){b.core.Class.classes[a]=d};b.core.Class.findClass=function(a){return b.core.Class.classes[a]};b.ad={};b.ad.data={};b.ad.data.DataDefines={};b.ad=b.ad||{};b.ad.data=b.ad.data||{};b.ad.tracking={};b.ad.tracking.TrackingDefines={};b.ad=b.ad||{};b.ad.tracking=b.ad.tracking||{};b.util={};b.util.ICollection={};b.util=b.util||{};b.util.ICollection=function(){};b.util.ICollection.prototype.add=function(){};
b.util.ICollection.prototype.addAll=function(){};b.util.ICollection.prototype.clear=function(){};b.util.ICollection.prototype.contains=function(){};b.util.ICollection.prototype.containsAll=function(){};b.util.ICollection.prototype.forEach=function(){};b.util.ICollection.prototype.isEmpty=function(){};b.util.ICollection.prototype.remove=function(){};b.util.ICollection.prototype.removeAll=function(){};b.util.ICollection.prototype.retainAll=function(){};b.util.ICollection.prototype.size=function(){};
b.util.ICollection.prototype.toArray=function(){};b.util.ISet={};b.util=b.util||{};b.util.ISet=function(){};b.util.IList={};b.util=b.util||{};b.util.IList=function(){};b.util.IList.prototype.addAt=function(){};b.util.IList.prototype.addAllAt=function(){};b.util.IList.prototype.get=function(){};b.util.IList.prototype.indexOf=function(){};b.util.IList.prototype.lastIndexOf=function(){};b.util.IList.prototype.removeAt=function(){};b.util.IList.prototype.set=function(){};b.util.IMap={};b.util=b.util||
{};b.util.IMap=function(){};b.util.IMap.prototype.clear=function(){};b.util.IMap.prototype.containsKey=function(){};b.util.IMap.prototype.containsValue=function(){};b.util.IMap.prototype.forEach=function(){};b.util.IMap.prototype.get=function(){};b.util.IMap.prototype.isEmpty=function(){};b.util.IMap.prototype.keys=function(){};b.util.IMap.prototype.put=function(){};b.util.IMap.prototype.putAll=function(){};b.util.IMap.prototype.remove=function(){};b.util.IMap.prototype.size=function(){};b.util.IMap.prototype.values=
function(){};b.event={};b.event.IEventDispatcher={};b.event=b.event||{};b.event.IEventDispatcher=function(){};b.event.IEventDispatcher.prototype.addEventListener=function(){};b.event.IEventDispatcher.prototype.dispatchEvent=function(){};b.event.IEventDispatcher.prototype.hasEventListener=function(){};b.event.IEventDispatcher.prototype.removeEventListener=function(){};b.event.IEventDispatcher.prototype.removeAllListeners=function(){};b.blocking={};b.blocking.IBlocking={};b.blocking=b.blocking||{};
b.blocking.IBlocking=function(){};b.blocking.IBlocking.prototype.isBlocking=function(){};b.blocking.IBlocking.prototype.startBlocking=function(){};b.blocking.IBlocking.prototype.stopBlocking=function(){};b.util.ArrayList={};b.util=b.util||{};b.util.ArrayList=b.core.Class.extend({construct:function(){this.elements=[];this.count=0},add:function(a){this.elements.push(a);this.count++;return true},addAll:function(a){var b=this,c=false;a.forEach(function(a){b.add(a)&&(c=true)});return c},addAllAt:function(a,
b){var c=this,e=false,g=a;b.forEach(function(a){if(c.addAt(g,a)){e=true;g++}});return e},addAt:function(a,b){this.elements.splice(a,0,b);this.count++;return true},clear:function(){this.elements=[];this.count=0},contains:function(a){return this.indexOf(a)!==1},containsAll:function(a){var b=this;a.forEach(function(a){if(b.indexOf(a)===-1)return false});return true},forEach:function(a){this.elements.forEach(a)},get:function(a){return this.elements[a]},lastIndexOf:function(a){for(var b=this.count-1;b>=
0;b--)if(a===this.elements[b])return b;return-1},indexOf:function(a){for(var b=0;b<this.count;b++)if(a===this.elements[b])return b;return-1},isEmpty:function(){return this.count===0},remove:function(a){a=this.indexOf(a);if(a!==-1){this.removeAt(a);return true}return false},removeAt:function(a){a=this.elements.splice(a,1);this.count--;return a},removeAll:function(a){var b=this,c=false;a.forEach(function(a){b.remove(a)&&(c=true)});return c},retainAll:function(){},set:function(a,b){var c=this.get(a);
this.elements[a]=b;return c},size:function(){return this.count},toArray:function(){var a=[];this.forEach(function(b){a.push(b)});return a}},"sprout.util.ArrayList");b.util.HashMap={};b.util=b.util||{};b.util.HashMap=b.core.Class.extend({construct:function(){this.hashMap={};this.count=0},clear:function(){this.hashMap={};this.count=0},containsKey:function(a){return this.hashMap[a]!==h},containsValue:function(a){for(var b in this.hashMap)if(a===this.hashMap[b])break;return true},forEach:function(a){for(var b in this.hashMap)a(this.hashMap[b])},
get:function(a){a=this.hashMap[a];return a===h?null:a},isEmpty:function(){return this.count===0},keys:function(){var a=[],b;for(b in this.hashMap)a.push(b);return a},put:function(a,b){var c=this.get(a);this.hashMap[a]=b;c===null&&this.count++;return c},putAll:function(a){a.keys().forEach(function(b){var c=a.get(b);this.put(b,c)})},remove:function(a){var b=this.get(a);if(b!==null){delete this.hashMap[a];this.count--}return b},size:function(){return this.count},values:function(){var a=[],b;for(b in this.hashMap)a.push(this.hashMap[b]);
return a}},"sprout.util.HashMap");b.util.HashList={};b.util=b.util||{};b.util.HashList=b.util.HashMap.extend({construct:function(){this._super();this.orderedKeys=[]},clear:function(){this._super();this.orderedKeys=[]},forEach:function(a){for(var b=0,c=this.orderedKeys.length;b<c;b++)a(this.getAtIndex(b))},getAtIndex:function(a){a=this.orderedKeys[a];return a!==h?this.get(a):null},indexOfKey:function(a){for(var b=0,c=this.orderedKeys.length;b<c;b++)if(this.orderedKeys[b]===a)return b;return-1},insertAtIndex:function(a,
b,c){this.get(b)!==null&&this.removeAtIndex(this.indexOfKey(b));var e=this.orderedKeys.slice(0,a),a=this.orderedKeys.slice(a);e.push(b);this.orderedKeys=e.concat(a);this._super(b,c)},keys:function(){for(var a=[],b=0,c=this.orderedKeys.length;b<c;b++)a.push(this.orderedKeys[b]);return a},put:function(a,b){this.get(a)!==null&&this.remove(a);this._super(a,b);this.orderedKeys.push(a)},remove:function(a){var b=this.indexOfKey(a);if(b!==-1){this.orderedKeys.splice(b,1);this._super(a)}},removeAtIndex:function(a){a=
this.orderedKeys[a];a!==h&&this.remove(a)},sort:function(a){var b=this;b.orderedKeys.sort(function(c,e){return a(b.get(c),b.get(e))})},values:function(){for(var a=[],b=0,c=this.orderedKeys.length;b<c;b++)a.push(this.get(this.orderedKeys[b]));return a}},"sprout.util.HashList");b.util.HashSet={};b.util=b.util||{};b.util.HashSet=b.core.Class.extend({construct:function(){this.elements=[];this.count=0},add:function(a){if(!this.contains(a)){this.elements.push(a);this.count++;return true}return false},addAll:function(a){var b=
this;a.forEach(function(a){b.add(a)})},clear:function(){this.count=0;this.elements=[]},contains:function(a){this.elements.forEach(function(b){if(a===b)return true});return false},containsAll:function(a){a.forEach(function(a){if(!this.contains(a))return false});return true},forEach:function(a){this.elements.forEach(a)},isEmpty:function(){return this.count===0},remove:function(a){for(var b=0;b<this.count;b++)if(a===this.elements[b]){this.elements.splice(b,1);this.count--;return true}return false},removeAll:function(a){var b=
this,c=false;a.forEach(function(a){b.remove(a)&&(c=true)});return c},retainAll:function(){},size:function(){return this.count},toArray:function(){var a=[];this.forEach(function(b){a.push(b)});return a}},"sprout.util.HashSet");b.util.Broadcaster={};b.util=b.util||{};b.util.Broadcaster={topicMap:new b.util.HashMap,sendMessage:function(a,d){if(b.util.Broadcaster.hasListener(a)){var c=h,e=b.util.Broadcaster.topicMap.get(a);e&&e.forEach(function(b){c=b.messageIn(a,d)});return c}},addListener:function(a,
d){var c=b.util.Broadcaster.topicMap.get(a);if(c)c.indexOf(d)===-1&&c.push(d);else{c=[d];b.util.Broadcaster.topicMap.put(a,c)}},removeListener:function(a,d){if(b.util.Broadcaster.hasListener(a)){var c=b.util.Broadcaster.topicMap.get(a);if(c)for(var e=0;e<c.length;++e)if(c[e]===d){c.splice(e,1);c.length==0&&b.util.Broadcaster.topicMap.remove(a);break}}},hasListener:function(a){return b.util.Broadcaster.topicMap.get(a)!=null}};b.util.Querystring={};b.util=b.util||{};b.util.Querystring={urlParams:null,
init:function(){var a,d=/\+/g,c=/([^&=]+)=?([^&]*)/g,e=k.location.search.substring(1);for(b.util.Querystring.urlParams={};a=c.exec(e);)b.util.Querystring.urlParams[decodeURIComponent(a[1].replace(d," "))]=decodeURIComponent(a[2].replace(d," "));delete b.util.Querystring.urlParams.__v},get:function(a){b.util.Querystring.urlParams===null&&b.util.Querystring.init();return a===h?b.util.Querystring.urlParams:a in b.util.Querystring.urlParams?b.util.Querystring.urlParams[a]:null}};b.util.Browser={};b.util.BrowserUtil=
{};b.util=b.util||{};b.util.BrowserUtil=b.core.Class.extend({construct:function(){var a=navigator.userAgent.toLowerCase(),b=/(iphone os|cpu os|android|safari|chrome)[ \/]([\w.]+)/.exec(a),a=/(safari)[ \/]([\w.]+)/.exec(a);this.touchDevice=this.motionDevice=h;this.iPhone=b!=null&&b[1]=="iphone os"?parseFloat(b[2].replace(/_/g,".")):NaN;this.iPad=b!=null&&b[1]=="cpu os"?parseFloat(b[2].replace(/_/g,".")):NaN;this.chrome=b!=null&&b[1]=="chrome"?parseFloat(b[2].replace(/_/g,".")):NaN;this.android=b!=
null&&b[1]=="android"?parseFloat(b[2]):NaN;this.iOS=this.iPhone||this.iPad;this.safari=a!=null&&a[1]=="safari";this.benchmark=-1},isTouchDevice:function(){if(this.touchDevice!=h)return this.touchDevice;return this.touchDevice="ontouchstart"in l.documentElement?true:false},isMotionDevice:function(){return this.motionDevice!=h?this.motionDevice:this.motionDevice=!!k.DeviceMotionEvent},getBenchmark:function(){if(this.benchmark===-1)this.benchmark=this.runBenchmark();if(this.benchmark==0)this.benchmark=
1;return this.benchmark},runBenchmark:function(){for(var a=new Date,b=1;b++;){if(new Date-a>10)break;Math.sqrt(b)}return Math.round(b/10)}},"sprout.util.BrowserUtil");b.util.Browser=new b.util.BrowserUtil;b.util.Timer={};b.util=b.util||{};b.util.Timer={timerCache:{},everyTime:function(a,d,c,e){var g=0;b.util.Timer.timerCache[d]=k.setInterval(function(){(++g>e&&e!==0||c.call(l,g)===false)&&b.util.Timer.stopTime(d)},a)},stopTime:function(a){k.clearInterval(b.util.Timer.timerCache[a]);delete b.util.Timer.timerCache[a]}};
b.log={};b.log.Logger={};b.log=b.log||{};b.log.Logger={buffer:[],timers:{},categories:{},log:function(a){b.log.Logger.buffer.push({message:a,time:(new Date).getTime()});b.log.Logger.timeout()},timeoutActive:!1,timeout:function(){if(!b.log.Logger.timeoutActive){b.log.Logger.timeoutActive=true;setTimeout(function(){for(b.log.Logger.timeoutActive=false;b.log.Logger.buffer.length>0;){var a=b.log.Logger.buffer.shift();b.util.Broadcaster.sendMessage(b.log.Logger.LOG_MESSAGE,a)}},0)}},startTimer:function(a,
d){b.log.Logger.timers[a+":"+d]=(new Date).getTime()},endTimer:function(a,d,c,e,g){c=c||0;d===h&&(d="n/a");var d=a+":"+d,f=(new Date).getTime()-b.log.Logger.timers[d];b.log.Logger.categories[a]||(b.log.Logger.categories[a]=0);b.log.Logger.categories[a]=b.log.Logger.categories[a]+f;f>=c&&b.log.Logger.log(d+" took "+f+"ms"+(e&&f!=e?", overhead "+(f-e)+"ms":"")+(g?", "+g:""));delete b.log.Logger.timers[d]},dump:function(a){var d;if(a)d="Total time in category "+a+": "+b.log.Logger.categories[a]+"ms";
else if(b.log.Logger.categories){d="Total time in categories\n";var a=[],c;for(c in b.log.Logger.categories)a.push([c,b.log.Logger.categories[c]]);a.sort(function(a,b){return b[1]-a[1]});a.forEach(function(a){d=d+("\t"+a[0]+": "+a[1]+"ms\n")})}d&&b.log.Logger.log(d)}};b.log.Logger.LOG_MESSAGE="LOG_MESSAGE";b.core.Bootstrap={};b.core=b.core||{};b.core.Bootstrap=b.core.Class.extend({construct:function(){this.requiredScripts=new b.util.HashSet;this.waitingScripts=new b.util.HashSet;this.numberRequiredScriptsLoaded=
0;this.currentPhase=b.core.Bootstrap.PHASE.DEAD;this.registeredBootstrapMap=new b.util.HashMap;this.domReady=false},bootstrap:function(){this.processBootstrapPhase(b.core.Bootstrap.PHASE.REGISTER)},registerBootstrap:function(a,d){if(this.currentPhase===b.core.Bootstrap.PHASE.REGISTER)if(a===b.core.Bootstrap.PHASE.REGISTER)d();else if(this.phaseExists(a)){var c=this.registeredBootstrapMap.get(a);if(!c){c=new b.util.ArrayList;this.registeredBootstrapMap.put(a,c)}c.add(d)}else throw Error("Error: Trying to register a bootstrap method for a bootstrap phase that does not exist");
else throw Error("Trying to register a bootstrap method after the register phase. Bootstrap methods may only be registered during the register phase.");},requireScript:function(a){this.requiredScripts.add(a)&&(this.domReady?this.loadScript(a):this.waitingScripts.add(a))},loadScript:function(a){var b=this,c=l.createElement("script");c.onload=function(){b.numberRequiredScriptsLoaded++;b.performConfigurationCompleteCheck()};c.onerror=function(){throw Error("Required script "+a+" failed to load.");};
c.type="text/javascript";c.src=a;l.getElementsByTagName("head")[0].appendChild(c)},loadWaitingScripts:function(){var a=this;this.waitingScripts.forEach(function(b){a.waitingScripts.remove(b);a.loadScript(b)})},phaseExists:function(a){for(var d in b.core.Bootstrap.PHASE)if(b.core.Bootstrap.PHASE[d]===a)return true;return false},processBootstrapPhase:function(a){this.currentPhase=a;var d=this.registeredBootstrapMap.get(a);d&&d.forEach(function(a){a()});switch(a){case b.core.Bootstrap.PHASE.REGISTER:this.startRegisterPhase();
break;case b.core.Bootstrap.PHASE.CONFIGURATION:this.startConfigurationPhase()}},startRegisterPhase:function(){var a=this;setTimeout(function(){a.processBootstrapPhase(b.core.Bootstrap.PHASE.CONFIGURATION)},0)},startConfigurationPhase:function(){if(l.readyState==="complete")this.declareDomReady();else{l.addEventListener("DOMContentLoaded",this.documentDOMContentLoadedHandler,false);k.addEventListener("load",this.windowLoadHandler,false)}},documentDOMContentLoadedHandler:function(){b.core.Bootstrap.getInstance().declareDomReady()},
windowLoadHandler:function(){b.core.Bootstrap.getInstance().declareDomReady()},declareDomReady:function(){l.removeEventListener("DOMContentLoaded",this.documentDOMContentLoadedHandler,false);k.removeEventListener("load",this.windowLoadHandler,false);if(!this.domReady){this.domReady=true;this.loadWaitingScripts();this.performConfigurationCompleteCheck()}},performConfigurationCompleteCheck:function(){this.domReady&&this.numberRequiredScriptsLoaded===this.requiredScripts.size()&&this.processBootstrapPhase(b.core.Bootstrap.PHASE.ALIVE)}},
"sprout.core.Bootstrap");b.core.Bootstrap.PHASE={DEAD:0,REGISTER:1,CONFIGURATION:2,ALIVE:3};b.core.Bootstrap.instance=null;b.core.Bootstrap.getInstance=function(){if(!b.core.Bootstrap.instance)b.core.Bootstrap.instance=new b.core.Bootstrap;return b.core.Bootstrap.instance};b.core.Bootstrap.registerBootstrap=function(a,d){b.core.Bootstrap.getInstance().registerBootstrap(a,d)};b.core.Bootstrap.requireScript=function(a){b.core.Bootstrap.getInstance().requireScript(a)};b.core.Bootstrap.bootstrap=function(){b.core.Bootstrap.getInstance().bootstrap()};
b.core.Bootstrap.bootstrap();b.util.IFrameMessage={};b.util=b.util||{};b.util.IFrameMessage={listeners:{},postMessageToParent:function(a,d){k.parent.postMessage&&k.parent!==k&&k.parent.postMessage('{"action":"'+a+'", "sproutID":"'+b.ad.Ad.getSprout().ID+'"'+(d==null?"":","+d)+"}","*")},addListener:function(a,d){b.util.IFrameMessage.actionInitialized(a)||(b.util.IFrameMessage.listeners[a]=[]);var c=b.util.IFrameMessage.listeners[a];c.indexOf(d)==-1&&c.push(d)},removeListener:function(a,d){if(b.util.IFrameMessage.actionInitialized(a)){var c=
b.util.IFrameMessage.listeners[a],e=c.indexOf(d);e!=-1&&c.splice(e,1)}},actionInitialized:function(a){return b.util.IFrameMessage.listeners.hasOwnProperty(a)&&b.util.IFrameMessage.listeners[a]!=null},messageIn:function(a){try{a=JSON.parse(a)}catch(d){b.log.Logger.log("JSON parse error: "+d)}typeof a=="object"&&(a.hasOwnProperty("action")&&b.util.IFrameMessage.actionInitialized(a.action))&&b.util.IFrameMessage.listeners[a.action].forEach(function(b){b(a)})}};b.util.IFrameMessage.replaceChars={"\u0008":"\\b",
"\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};b.util.IFrameMessage.encodeForJSON=function(a){return a.replace(/[\b\t\n\f\r"\\]/g,function(a){return b.util.IFrameMessage.replaceChars[a]})};b.core.Bootstrap.registerBootstrap(b.core.Bootstrap.PHASE.CONFIGURATION,function(){k.addEventListener("message",function(a){b.util.IFrameMessage.messageIn(a.data)},false)});b.util.Cookie={};b.util.CookieUtil={};b.util=b.util||{};b.util.CookieUtil=b.core.Class.extend({construct:function(){b.util.IFrameMessage.addListener("init",
function(a){b.util.Cookie.init(a.cookie)});this.initialized=false;this.cookies={}},init:function(a){if(a&&a!="")for(var a=a.split(";"),b=0;b<a.length;b++){var c=j.trim(a[b]).split("=");c.length==2&&(this.cookies[c[0]]=decodeURIComponent(c[1]))}},get:function(a){return(a=this.cookies[a])?a:null},set:function(a,d,c){c=c||{};if(d===null){d="";c.expires=-1}var e=c.path?"; path="+c.path:"",g=c.domain?"; domain="+c.domain:"",f=c.secure?"; secure":"",i="";if(c.expires&&(typeof c.expires=="number"||c.expires.toUTCString)){if(typeof c.expires==
"number"){i=new Date;i.setTime(i.getTime()+c.expires*864E5)}else i=c.expires;i="; expires="+i.toUTCString()}this.cookies[a]=d;d=[a,"=",encodeURIComponent(d),i,e,g,f].join("");b.util.IFrameMessage.postMessageToParent("cookie",'"value": "'+d+'"')}},"sprout.util.CookieUtil");b.util.Cookie=new b.util.CookieUtil;b.event.Event={};b.event=b.event||{};b.event.Event=b.core.Class.extend({construct:function(a,b){this.target=null;this.type=a;this.data=b}},"sprout.event.Event");b.event.EventDispatcher={};b.event=
b.event||{};b.event.EventDispatcher=b.core.Class.extend({construct:function(a){this.target=a?a:this;this.listeners=new b.util.HashMap},addEventListener:function(a,d,c,e){this.listeners.containsKey(a)||this.listeners.put(a,[]);if(!b.isNumeric(e))e=b.event.EventDispatcher.LISTENER_PRIORITY_LOW;for(var g=false,a=this.listeners.get(a),f=a.length,i=0;i<f;i++){var m=a[i];if(m.listenerFunction===d&&m.listenerObject===c){g=true;m.priority=e}}g||a.push({listenerFunction:d,listenerObject:c,priority:e});a.sort(this.sortNumberAscending)},
dispatchEvent:function(a){a.target=this.target;for(var d=this.listeners.get(a.type),c=(d=b.clone(d))?d.length:0,e=0;e<c;e++){var g=d[e];g.listenerObject?g.listenerFunction.call(g.listenerObject,a):g.listenerFunction(a)}},hasEventListener:function(a){return this.listeners.containsKey(a)},removeEventListener:function(a,b,c){for(var e=this.listeners.get(a),g=e?e.length:0,f=0;f<g;f++){var i=e[f];if(i.listenerFunction==b&&i.listenerObject==c){e.splice(f,1);e.length===0&&this.listeners.remove(a);break}}},
removeAllListeners:function(){for(var a in this.listeners.values)for(var d=this.listeners.get(a),c=(d=b.clone(d))?d.length:0,e=0;e<c;e++){var g=d[e];this.removeEventListener(a,g.listenerFunction,g.listenerObject)}},sortNumberAscending:function(a,b){return a-b}},"sprout.event.EventDispatcher");b.event.EventDispatcher.LISTENER_PRIORITY_HIGH=0;b.event.EventDispatcher.LISTENER_PRIORITY_MEDIUM=10;b.event.EventDispatcher.LISTENER_PRIORITY_LOW=20;b.blocking.BlockingObject={};b.application=b.application||
{};b.blocking.BlockingObject=b.event.EventDispatcher.extend({construct:function(){this._super();this.blocking=false},isBlocking:function(){return this.blocking},startBlocking:function(){if(!this.blocking){this.blocking=true;this.dispatchEvent(new b.event.Event(b.blocking.BlockingObject.START_BLOCKING_EVENT))}},stopBlocking:function(){if(this.blocking){this.blocking=false;this.dispatchEvent(new b.event.Event(b.blocking.BlockingObject.STOP_BLOCKING_EVENT))}}},"sprout.blocking.BlockingObject");b.blocking.BlockingObject.START_BLOCKING_EVENT=
"START_BLOCKING_EVENT";b.blocking.BlockingObject.STOP_BLOCKING_EVENT="STOP_BLOCKING_EVENT";b.display={};b.display.DisplayObject={};b.display=b.display||{};b.display.DisplayObject=b.event.EventDispatcher.extend({construct:function(a){this._super();this.merge(a);this.html=null;this.childNodes=new b.util.ArrayList;this.nextSibling=this.previousSibling=this.lastChild=this.firstChild=this.parent=null;this.displayBuildValid=false;this.validateCallbacks=[]},preInitializeDisplay:function(){this.invalidateDisplayBuild()},
assignHtml:function(){if(!this.html)this.html=j("#"+this.ID)},buildDisplay:function(){this.displayBuildValid=true},initializeDisplay:function(){},drawDisplay:function(){},destroyDisplay:function(){},invalidateDisplay:function(a){a&&this.validateCallbacks.push(a);b.display.DisplayManager.invalidateDisplayNode(this)},invalidateDisplayBuild:function(){this.displayBuildValid=false;this.invalidateDisplay()},validateDisplay:function(){this.validateCallbacks.forEach(function(a){a.call(null)});this.validateCallbacks=
[]},appendChild:function(a){if(this.childNodes.size()>0){a.previousSibling=this.lastChild;this.lastChild.nextSibling=a}else this.firstChild=a;this.lastChild=a;this.childNodes.add(a);a.parent=this;b.display.DisplayManager.registerDisplayNode(a);a.preInitializeDisplay();a.buildDisplay();a.assignHtml();a.initializeDisplay()},insertChild:function(){},prependChild:function(){},removeChild:function(){},saveState:function(){}},"sprout.display.DisplayObject");b.display.DisplayObject.HTML_EVENT_TRIGGER_MAP=
b.util.Browser.isTouchDevice()?{mouseOver:"mouseover",mouseOut:"mouseout",mouseDown:"touchstart",mouseUp:"touchend",mouseClick:b.util.Browser.iOS||2.2<=b.util.Browser.android?"click":"touchend",swipeLeft:"touchstart",swipeRight:"touchstart",swipeUp:"touchstart",swipeDown:"touchstart",orientationChange:"orientationchange"}:{mouseOver:"mouseover",mouseOut:"mouseout",mouseDown:"mousedown",mouseUp:"mouseup",mouseClick:"click",swipeLeft:"mousedown",swipeRight:"mousedown",swipeUp:"mousedown",swipeDown:"mousedown",
orientationChange:"orientationchange"};b.application={};b.application.SupportedFeatures={};b.application=b.application||{};b.application.SupportedFeatures=b.core.Class.extend({construct:function(){this.providesDefaultCloseButton=this.customVideoPlayer=this.customCloseButton=false},getCustomCloseButton:function(){return this.customCloseButton},setCustomCloseButton:function(a){this.customCloseButton=a},getCustomVideoPlayer:function(){return this.customVideoPlayer},setCustomVideoPlayer:function(a){this.customVideoPlayer=
a},getProvidesDefaultCloseButton:function(){return this.providesDefaultCloseButton},setProvidesDefaultCloseButton:function(a){this.providesDefaultCloseButton=a},getSupportedFeatures:function(){return{customCloseButton:this.customCloseButton,customVideoPlayer:this.customVideoPlayer,providesDefaultCloseButton:this.providesDefaultCloseButton}},setSupportedFeatures:function(a){this.customCloseButton=a.customCloseButton;this.customVideoPlayer=a.customVideoPlayer;this.providesDefaultCloseButton=a.providesDefaultCloseButton}},
"sprout.application.SupportedFeatures");b.application.ApplicationDefines={};b.application=b.application||{};b.application.ApplicationDefines={};b.application.ApplicationDefines.ENVIRONMENT={UNKNOWN:0,APP:1,MOBILE_WEB:2};b.application.ApplicationDefines.SHAKE_MESSAGE="SHAKE_MESSAGE";b.application.Application={};b.application=b.application||{};b.application.Application=b.display.DisplayObject.extend({construct:function(){this._super({ID:"applicationContainer"});this.a1={x:0,y:0,z:0};this.a2={x:0,y:0,
z:0};this.environment=b.application.ApplicationDefines.ENVIRONMENT.UNKNOWN;this.lastShake=-1;this.supportedFeatures=new b.application.SupportedFeatures},getEnvironment:function(){return this.environment},getSupportedFeatures:function(){return this.supportedFeatures},isInApp:function(){return this.environment===b.application.ApplicationDefines.ENVIRONMENT.APP},isInMobileWeb:function(){return this.environment===b.application.ApplicationDefines.ENVIRONMENT.MOBILE_WEB},detectEnvironment:function(){},
detectFeatures:function(){},start:function(){this.detectEnvironment();this.detectFeatures();if(k.DeviceMotionEvent){var a=this;k.ondevicemotion=function(b){a.a1=b.accelerationIncludingGravity;Math.abs(a.a1.x-a.a2.x+a.a1.y-a.a2.y+a.a1.z-a.a2.z)>20&&a.sendShakeMessage();a.a2=a.a1}}},sendShakeMessage:function(){var a=(new Date).getTime();if(!(this.lastShake!=-1&&a-this.lastShake<500)){this.lastShake=a;b.util.Broadcaster.sendMessage(b.application.ApplicationDefines.SHAKE_MESSAGE)}}},"sprout.application.Application");
b.ad.tracking.AccountingTracking={};b.ad.tracking=b.ad.tracking||{};b.ad.tracking.AccountingTracking={init:function(a){b.ad.tracking.AccountingTracking.sprout=a},interacted:!1,track:function(a){a.action=="INTERACTION"?b.ad.tracking.AccountingTracking.trackInteraction():a.action=="IMPRESSION"&&b.ad.tracking.AccountingTracking.getPixel("impression")},trackInteraction:function(){if(!b.ad.tracking.AccountingTracking.interacted&&b.util.Cookie.get("adv_interact_"+b.ad.tracking.AccountingTracking.sprout.ID)!==
"true"){b.ad.tracking.AccountingTracking.interacted=true;var a=new Date;a.setTime(a.getTime()+3E5);b.util.Cookie.set("adv_interact_"+b.ad.tracking.AccountingTracking.sprout.ID,"true",{expires:a});b.ad.tracking.AccountingTracking.getPixel("interaction")}},getPixel:function(a){var d=new Image,a=b.ad.tracking.AccountingTracking.sprout.trackBase+"&m="+encodeURIComponent("b:"+k.btoa("t="+a+"&r="+Math.floor(Math.random()*1001)));d.src=a}};b.ad.SproutNode={};b.ad=b.ad||{};b.ad.SproutNode=b.blocking.BlockingObject.extend({construct:function(a,
d){this._super();this.merge(d);this.ownerSprout=a;this.childNodes=new b.util.HashMap;this.parentNode=null},preInitialize:function(){},initialize:function(){},postInitialize:function(){},appendChild:function(a){this.childNodes.put(a.ID,a);a.parentNode=this;this.ownerSprout.addNodeToCache(a)}},"sprout.ad.SproutNode");b.ad.action={};b.ad.action.Action={};b.ad.action=b.ad.action||{};var B="",C="",t=0,p=0,u="",x=!1,y=!0;b.ad.action.Action=b.ad.SproutNode.extend({construct:function(a,b){this._super(a,b);
this.nodeType="ACTION";this.haltsExecution=false;this.index=0},initialize:function(){this.triggerNode=this.ownerSprout.findNodeByID(this.triggerNodeID);if(B!=this.triggerNodeID||C!=this.trigger){B=this.triggerNodeID;C=this.trigger;p=0;u="";x=false;y=true;t=0}this.index=t;if(this.isConditionAction()){b.ad.action.ConditionManager.registerConditionAction(this);p=this.parameters.actionCount;y=this.parameters.playActions;if(this.parameters.stopActions){if(u=="")u=this.ID;x=true}}x&&u!=this.ID&&this.triggerNode.registerTriggerHandler("stopActions",
this,this.handleStopAction);if(this.isConditionAction()||p==0||y==false)(this.triggerNode.nodeType!="MASTERPAGE"||b.display.DisplayObject.HTML_EVENT_TRIGGER_MAP[this.trigger]===h)&&b.ad.action.ActionManager.registerAction(this);else if(p>0){b.ad.action.ConditionManager.registerExecutableAction(this);p--}t++},postInitialize:function(){if(this.triggerNode!=h&&this.triggerNode.nodeType=="MASTERPAGE"&&b.display.DisplayObject.HTML_EVENT_TRIGGER_MAP[this.trigger]!==h){var a=this;this.ownerSprout.getPages().values().forEach(function(d,
c){if(a.triggerNode.masterType=="BACKGROUND"&&d.hasMasterBackground()||a.triggerNode.masterType=="FOREGROUND"&&d.hasMasterForeground()){var e=new b.ad.action.Action(a.ownerSprout,a);e.triggerNodeID=d.ID;e.ID=e.ID+("_copy_"+c);d.appendChild(e);b.ad.action.ActionManager.registerAction(e)}})}},handleStopAction:function(){if(t<this.index)this.haltsExecution=true},canStopAction:function(){if(this.haltsExecution){this.haltsExecution=false;return true}return false},interactiveTriggers:{mouseClick:!0,mouseDown:!0,
mouseUp:!0},isFromInteraction:function(){return this.trigger in this.interactiveTriggers},isConditionAction:function(){return false},execute:function(){}},"sprout.ad.action.Action");b.ad.AdDefines={};b.ad=b.ad||{};b.ad.AdDefines={};b.ad.AdDefines.AD_FORMAT={INTERSTITIAL:"interstitial",EXPANDABLE:"expandable",COLLAPSIBLE:"collapsible",TWOPIECE:"two-piece",STANDARD:"standard"};b.ad.AdDefines.AD_STATE={EXPANDED:1,COLLAPSED:2,CLOSED:3,UNKNOWN:4};b.ad.AdDefines.AD_NETWORK={ADMOB:"admob",ADMARVEL:"admarvel",
INMOBI:"inmobi",MEDIALETS:"medialets",MILLENNIAL:"millennial",MOCEAN:"mocean",MOBCLIX:"mobclix",ORMMA:"ormma",NONE:"none"};b.ad.Ad={};b.ad=b.ad||{};b.ad.Ad=b.application.Application.extend({construct:function(a){this._super();var d=b.util.Querystring.get();this.adState=null;this.blockingObjects=new b.util.HashSet;this.bridgeReadyMessageReceived=false;var c=parseInt(d.environment);this.environment=c!==NaN?c:this.environment;this.isExpanding=this.initializedAdState=false;this.sprout=this.factory(null,
a);d.supportedFeatures&&this.supportedFeatures.setSupportedFeatures(JSON.parse(d.supportedFeatures));this.startPage=null;b.util.Broadcaster.addListener(b.ad.page.PageManager.FIRST_PAGE_DISPLAYED_MESSAGE,this)},getSprout:function(){return this.sprout},getAdFormat:function(){return this.sprout.getAdFormat()},getAdNetwork:function(){return this.sprout.getAdNetwork()},getAdState:function(){return this.adState},getCloseButtonSource:function(){return this.sprout.closeButtonSource},getCloseButtonType:function(){return this.sprout.closeButtonType},
getHeight:function(){return this.sprout.height},getIsExpanding:function(){return this.isExpanding},getWidth:function(){return this.sprout.width},messageIn:function(a){switch(a){case b.ad.page.PageManager.FIRST_PAGE_DISPLAYED_MESSAGE:a=b.util.Querystring.get();b.util.IFrameMessage.postMessageToParent("ready");a.__bypass_load_tracking||b.util.Broadcaster.sendMessage("TRACK",{srID:1})}},start:function(){this._super();this.preInitializeApplication();this.createApplicationDisplay();this.initializeApplication()},
expand:function(a,d,c,e,g){var f=this;this.isExpanding=true;this.changeState(b.ad.AdDefines.AD_STATE.EXPANDED,function(){b.ad.tracking.Tracker.track({action:(g?"":"A_")+"EXPAND",node:c});f.sprout.display.setWidth(a);f.sprout.display.setHeight(d);f.sprout.display.invalidateDisplay(function(){b.util.IFrameMessage.postMessageToParent("expand",'"width": '+a+',"height": '+d)});b.util.IFrameMessage.addListener("stateChange",function(a){if(a.adState==="expanded")f.isExpanding=false})})},collapse:function(a,
d,c,e,g,f){f||(f=false);var i=this;this.changeState(b.ad.AdDefines.AD_STATE.COLLAPSED,function(){b.ad.tracking.Tracker.track({action:(g?"":"A_")+"COLLAPSE",node:c});i.sprout.display.setWidth(a);i.sprout.display.setHeight(d);i.sprout.display.invalidateDisplay(function(){b.util.IFrameMessage.postMessageToParent("collapse",'"width": '+a+',"height": '+d+',"trigger": "'+e+'","stateChangedByAd":'+f)});!i.isInApp()&&i.getAdFormat()===b.ad.AdDefines.AD_FORMAT.TWOPIECE&&k.history.back()})},close:function(a,
d){d||(d=false);var c=this;this.changeState(b.ad.AdDefines.AD_STATE.CLOSED,function(){b.ad.tracking.Tracker.track({action:"COLLAPSE",node:a});!c.isInApp()&&c.getAdFormat()===b.ad.AdDefines.AD_FORMAT.TWOPIECE&&k.history.back();b.util.IFrameMessage.postMessageToParent("close",'"stateChangedByAd":'+d)})},changeState:function(a,d){if(this.adState!==a&&this.adState!==b.ad.AdDefines.AD_STATE.CLOSED){var c={oldState:this.adState,newState:a};this.adState=a;d();this.dispatchEvent(new b.event.Event("STATE_CHANGE_EVENT",
c))}},updateState:function(a){if(!this.initializedAdState&&a==b.ad.AdDefines.AD_STATE.UNKNOWN)this.adState=b.ad.AdDefines.AD_STATE.UNKNOWN;else if(this.adState!==a&&this.adState!==b.ad.AdDefines.AD_STATE.CLOSED)this.adState=a},registerBlockingObject:function(a){a.addEventListener(b.blocking.BlockingObject.START_BLOCKING_EVENT,this.handleStartBlocking,this);a.addEventListener(b.blocking.BlockingObject.STOP_BLOCKING_EVENT,this.handleStopBlocking,this);a.startBlocking()},factory:function(a,d){var c=
b.core.Class.findClass(d.classname);if(!c)throw Error('Sprout factory failed. Class "'+d.classname+'" not defined.');var e=new c(a,d.object),g,f=this;b.isArray(d.children)&&d.children.forEach(function(a){g=f.factory(e.ownerSprout,a);g!=null&&e.appendChild(g)});return e},preInitializeApplication:function(){b.util.Broadcaster.sendMessage("APPLICATION_PRE_INIT");this.setInitialState();this.preInitializeRecursive(this.sprout);this.startPage=this.sprout.findPageByID(this.sprout.startPageID)},setInitialState:function(){this.getAdFormat()===
b.ad.AdDefines.AD_FORMAT.COLLAPSIBLE||this.getAdFormat()===b.ad.AdDefines.AD_FORMAT.INTERSTITIAL||this.getAdFormat()===b.ad.AdDefines.AD_FORMAT.TWOPIECE||this.getAdFormat()===b.ad.AdDefines.AD_FORMAT.EXPANDABLE&&this.getAdNetwork()===b.ad.AdDefines.AD_NETWORK.MILLENNIAL&&b.util.Querystring.get("__bypass_load_tracking")==="1"?this.updateState(b.ad.AdDefines.AD_STATE.EXPANDED):this.getAdFormat()===b.ad.AdDefines.AD_FORMAT.EXPANDABLE?this.updateState(b.ad.AdDefines.AD_STATE.COLLAPSED):this.updateState(b.ad.AdDefines.AD_STATE.UNKNOWN);
this.initializedAdState=true},createApplicationDisplay:function(){if(!(b.util.Browser.android>=2.2)){l.styleSheets[0].insertRule(".sproutElement:not(.sproutTextElement):not(.animGIF)"+(b.util.Browser.iOS<3.2?":not(.sproutAudioElement):not(.sproutVideoElement)":"")+(b.util.Browser.iPhone>0&&b.util.Browser.getBenchmark()<=40?"":",.sproutElement:not(.animGIF) img")+"{-webkit-backface-visibility:hidden}",0);if(b.util.Browser.iOS<=4.1){b.util.Browser.iOS<3.2&&j("body").css("-webkit-transform","translateZ(0)");
l.styleSheets[0].insertRule(".sproutVideoElement{display:none}",0)}}this.assignHtml();b.util.Broadcaster.sendMessage("APPLICATION_CREATE");this.sprout.createDisplay();this.appendChild(this.sprout.display);this.sprout.createDisplayChildren()},initializeApplication:function(){this.startBlocking();b.util.Broadcaster.sendMessage("APPLICATION_INIT");var a=this;b.util.IFrameMessage.addListener("projectDismissed",function(){a.handleProjectDismissed()});this.initializeTracking();this.initializeRecursive(this.sprout);
this.postInitializeRecursive(this.sprout);this.initializeEventPassing();this.initializeLogPassing();this.initializeOrientationLock();this.initializeBridge()},startBlocking:function(){b.util.Broadcaster.sendMessage("START_BLOCKING");this.registerBlockingObject(this.startPage);this.startPage.hasMasterBackground()&&this.registerBlockingObject(this.sprout.backgroundMasterPage);this.startPage.hasMasterForeground()&&this.registerBlockingObject(this.sprout.foregroundMasterPage)},initializeTracking:function(){b.util.Broadcaster.sendMessage("TRACKING_INIT");
if(!b.util.Querystring.get().__bypass_interact_tracking&&this.sprout.trackBase.length){b.ad.tracking.AccountingTracking.init(this.sprout);var a=function(){try{b.ad.tracking.AccountingTracking.track({action:"INTERACTION"});j("body").unbind("mouseover",a);j("body").unbind("mousedown",a);j("body").unbind("touchstart",a)}catch(d){b.log.Logger.log("Sprout Accounting TRACKING ERROR: "+d.name+": "+d.message)}return true};j("body").bind("mouseover",a);j("body").bind("mousedown",a);j("body").bind("touchstart",
a)}},initializeBridge:function(){var a=this;b.util.IFrameMessage.addListener("bridgeReady",function(d){b.util.Broadcaster.sendMessage("BRIDGE_READY",d);a.bridgeReadyMessageReceived=true;a.readyToActivateCheck()});b.util.IFrameMessage.postMessageToParent("initBridge")},initializeEventPassing:function(){b.util.IFrameMessage.addListener("passevent",function(a){var d=null,c=a.event;switch(a.eventtype){case "touchend":case "mouseup":if(b.util.Browser.android){d=l.createEvent("MouseEvent");d.initMouseEvent(a.eventtype,
true,true,k,0,c.screenX,c.screenY,c.clientX,c.clientY,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,0,null)}break;case "keypress":d=l.createEvent("KeyboardEvent");d.initKeyboardEvent(a.eventtype,true,true,l,c.keyIdentifier,c.keyLocation,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey);d.keyCode=c.keyCode}d&&l.body.dispatchEvent(d)})},initializeLogPassing:function(){b.util.IFrameMessage.addListener("log",function(a){b.log.Logger.log(unescape(a.message))})},initializeOrientationLock:function(){(this.sprout.lockOrientationValue===
"portrait"||this.sprout.lockOrientationValue==="landscape")&&b.util.IFrameMessage.postMessageToParent("expandprops",'"lockOrientation": true,"orientation": "'+this.sprout.lockOrientationValue+'"')},preInitializeRecursive:function(a){var b=this;a.preInitialize();a.childNodes.values().forEach(function(a){b.preInitializeRecursive(a)})},initializeRecursive:function(a){var b=this;a.initialize();a.childNodes.values().forEach(function(a){b.initializeRecursive(a)})},postInitializeRecursive:function(a){var b=
this;a.postInitialize();a.childNodes.values().forEach(function(a){b.postInitializeRecursive(a)})},readyToActivateCheck:function(){this.blockingObjects.size()===0&&this.bridgeReadyMessageReceived&&b.ad.page.PageManager.activatePage(this.startPage.ID)},handleProjectDismissed:function(){if(this.getAdFormat()===b.ad.AdDefines.AD_FORMAT.INTERSTITIAL)this.close(this);else{this.collapse(this.sprout.width,this.sprout.height,this,"click",true);this.getAdFormat()===b.ad.AdDefines.AD_FORMAT.EXPANDABLE&&!(this.getAdNetwork()===
b.ad.AdDefines.AD_NETWORK.MILLENNIAL&&this.isInApp())&&b.ad.page.PageManager.goToPage("sp:_FIRSTPAGE")}},handleStartBlocking:function(a){this.blockingObjects.add(a.target)},handleStopBlocking:function(a){this.blockingObjects.remove(a.target);this.readyToActivateCheck()}},"sprout.ad.Ad");b.ad.Ad.instance=null;b.ad.Ad.getInstance=function(){b.ad.Ad.instance||b.ad.Ad.createAd();return b.ad.Ad.instance};b.ad.Ad.getAdFormat=function(){return b.ad.Ad.getInstance().getAdFormat()};b.ad.Ad.getAdState=function(){return b.ad.Ad.getInstance().getAdState()};
b.ad.Ad.getAdNetwork=function(){return b.ad.Ad.getInstance().getAdNetwork()};b.ad.Ad.getCloseButtonSource=function(){return b.ad.Ad.getInstance().getCloseButtonSource()};b.ad.Ad.getCloseButtonType=function(){return b.ad.Ad.getInstance().getCloseButtonType()};b.ad.Ad.getHeight=function(){return b.ad.Ad.getInstance().getHeight()};b.ad.Ad.getIsExpanding=function(){return b.ad.Ad.getInstance().getIsExpanding()};b.ad.Ad.getSupportedFeatures=function(){return b.ad.Ad.getInstance().getSupportedFeatures()};
b.ad.Ad.isInApp=function(){return b.ad.Ad.getInstance().isInApp()};b.ad.Ad.isInMobileWeb=function(){return b.ad.Ad.getInstance().isInMobileWeb()};b.ad.Ad.getSprout=function(){return b.ad.Ad.getInstance().getSprout()};b.ad.Ad.getWidth=function(){return b.ad.Ad.getInstance().getWidth()};b.ad.Ad.createAd=function(){if(!b.ad.Ad.instance){b.ad.Ad.instance=new b.ad.Ad(k._Sprout.sprout);delete k._Sprout.sprout}};b.ad.Ad.start=function(){b.ad.Ad.getInstance().start()};b.ad.Ad.appendChild=function(a){b.ad.Ad.getInstance().appendChild(a)};
b.ad.Ad.registerBlockingObject=function(a){b.ad.Ad.getInstance().registerBlockingObject(a)};b.ad.Ad.close=function(a,d){b.ad.Ad.getInstance().close(a,d)};b.ad.Ad.collapse=function(a,d,c,e,g,f){b.ad.Ad.getInstance().collapse(a,d,c,e,g,f)};b.ad.Ad.expand=function(a,d,c,e,g){b.ad.Ad.getInstance().expand(a,d,c,e,g)};b.ad.Ad.sendSMS=function(a,d,c){var e="sms:";a&&(e=e+a);b.ad.Ad.isInApp()&&d.length>0&&(e=e+("?body="+encodeURIComponent(d)));b.ad.Ad.goToURL(e,null,null,c)};b.ad.Ad.goToURL=function(a,d,
c,e){var g=c?b.util.Querystring.get(c):null;g&&(a=g);if(b.ad.data.Token.hasToken(a))a=b.ad.data.Token.translateString(a).translatedString;if(g=a.match(/^(\w+):([^\/].*)/))if(b.ad.Ad.isPreviewMode()&&(g[1]=="sms"||g[1]=="tel")){g[2]=g[2].split("?")[0];k.top.showAlert("When viewed in a mobile device, this link will prompt the viewer to "+(g[1]=="sms"?"send a text message to ":"call ")+g[2]+". This functionality cannot be previewed in a desktop browser.")}else{b.ad.Ad.navigateURL(a,"_self_sms_tel");
var f;switch(g[1]){case "sms":f="SMS";break;case "tel":f="CALL"}f&&b.ad.tracking.Tracker.track({srID:8,ctaID:g[2],action:f,node:e,directInteraction:true})}else if(a.substr(0,1)==="#")b.util.IFrameMessage.postMessageToParent("goToURL",'"url": "'+a+'"');else if(a){a=j.ensureCompleteURL(a);if(b.ad.Ad.isPreviewMode()&&d!="_blank")k.top.showPrompt("After publishing, this link will open in the same window. Because you're in preview mode, a new window will open instead.",a,function(){d="_blank";b.ad.Ad.processURL(a,
d,c)});else{d=="_blank"&&b.util.Browser.android>=2.2&&(d="_top");b.ad.Ad.processURL(a,d,c)}}};b.ad.Ad.navigateURL=function(a,d){b.util.Browser.iOS>=5&&(!d||d==="_self"||d==="_top"||b.ad.Ad.isInApp()&&b.ad.Ad.getAdNetwork()===b.ad.AdDefines.AD_NETWORK.INMOBI)&&b.util.IFrameMessage.postMessageToParent("resetIframeOnPersistedPageshow");if(b.ad.page.PageManager.getInstance().parentCanLink)b.util.IFrameMessage.postMessageToParent("goToURL",'"url": "'+a+'","target": "'+d+'"');else if(d==="_blank")k.open(a);
else if(d==="_self")k.parent.location.href=a;else if(d==="_self_sms_tel")k.location.href=a;else try{k.top.location.href=a}catch(c){k.open(a)}};b.ad.Ad.processURL=function(a,d,c){b.util.Broadcaster.sendMessage("PROCESS_URL",{url:a,target:d,clickTag:c})};b.ad.Ad.isPreviewMode=function(){return k.location.href.indexOf("preview=true")>0};b.ad.Ad.makeCall=function(a,d){b.ad.Ad.goToURL("tel:"+a,null,null,d)};b.ad.Ad.sendMail=function(a,d,c,e){if(a){a="mailto:"+a;d.length>0&&(a=a+("?subject="+encodeURIComponent(d)));
c.length>0&&(a=a+((d.length>0?"&":"?")+"body="+encodeURIComponent(c)));b.ad.Ad.goToURL(a,null,null,e)}};b.ad.Ad.useCustomClose=function(a){if(b.ad.Ad.getSupportedFeatures().getCustomCloseButton())b.util.IFrameMessage.postMessageToParent("useCustomClose",'"useCustomClose":'+a);else throw Error("Custom close button not supported by this ad.");};b.core.Bootstrap.registerBootstrap(b.core.Bootstrap.PHASE.CONFIGURATION,function(){b.ad.Ad.createAd()});b.core.Bootstrap.registerBootstrap(b.core.Bootstrap.PHASE.ALIVE,
function(){b.ad.Ad.getSprout().hasOwnProperty("doubleclick")?Enabler.isInitialized()?b.ad.Ad.start():Enabler.addEventListener(studio.events.StudioEvent.INIT,function(){b.ad.Ad.start()}):b.ad.Ad.start()});b.ad.data.VariableManager={};b.ad.data=b.ad.data||{};b.ad.data.VariableManager=b.event.EventDispatcher.extend({construct:function(){this._super();this.vars=new b.util.HashMap},get:function(a){return(a=this.vars.get(a))?a:null},set:function(a,d){this.vars.put(a,d);this.dispatchEvent(new b.event.Event(b.ad.data.VariableManager.VARIABLE_CHANGED_EVENT,
{name:a,value:d}))}},"sprout.ad.data.VariableManager");b.ad.data.VariableManager.VARIABLE_CHANGED_EVENT="variableChangedEvent";b.ad.data.VariableManager.instance=null;b.ad.data.VariableManager.getInstance=function(){if(!b.ad.data.VariableManager.instance)b.ad.data.VariableManager.instance=new b.ad.data.VariableManager;return b.ad.data.VariableManager.instance};b.ad.data.VariableManager.get=function(a){return b.ad.data.VariableManager.getInstance().get(a)};b.ad.data.VariableManager.set=function(a,
d){b.ad.data.VariableManager.getInstance().set(a,d)};b.ad.data.Token={};b.ad.data=b.ad.data||{};var Y={month:4,year:5,dayofweek:6,dayofmonth:7,time:8,unixtime:31,isotime:32,hour:9,language:10,os:11,views:12,visits:13,users:14,countrycode:15,countryname:16,regioncode:17,regionname:18,city:19,latitude:20,longitude:21,postalcode:22,netspeed:23,currentuserviews:24,browserurl:25,elapsedtime:26,formatteddate:27,pagereferrer:29,javascriptaccess:30,formelement:33};b.ad.data.Token=b.core.Class.extend({construct:function(a){this.tokenSource=
a;this.tokenString=a.substring(1,a.length-1);this.tokenData=this.tokenString.split(/\|/);this.nameParts=(""+this.tokenData.shift()).split(".");this.unalteredName=this.nameParts.join(".");for(var d=1;d<this.nameParts.length;++d)this.nameParts[d]=this.nameParts[d].toLowerCase();this.name=this.nameParts.join(".");if(this.name.search(RegExp("([^.]+).escapedtext(|)?","gi"))!=-1){this.originalName=this.name;this.name=this.name.replace(RegExp(".escapedtext(.)?","gi"),".text");this.escapeurl=true;this.tokenData[0]=
this.name}for(this.dataParams={};this.tokenData.length>0;){var c=""+this.tokenData.shift();if(c.length!=0){var e=c.indexOf("=");if(e<=0){d=c;c="true"}else{d=c.substring(0,e);c=c.length>e+1?c.substring(e+1,c.length):""}d=d.toLowerCase();this.dataParams[d]=c}}this.defaultValue="";if(this.dataParams.hasOwnProperty("default")){this.defaultValue=this.dataParams["default"];delete this.dataParams["default"]}this.tokenType=b.ad.data.Token.TYPE_ELEMENT_PROPERTY;if(this.tokenString.indexOf("sp:")==0)this.tokenType=
b.ad.data.Token.TYPE_INTERNAL;else if(this.tokenString.indexOf("xvar:")==0||this.tokenString.indexOf("fv:")==0)this.tokenType=b.ad.data.Token.TYPE_EXTERNAL_VARIABLE;else if(this.tokenString.indexOf("pref:")==0)this.tokenType=b.ad.data.Token.TYPE_PREFERENCE;else if(this.tokenString.indexOf("var:")==0)this.tokenType=b.ad.data.Token.TYPE_VARIABLE;else{this.elementName=this.nameParts[0];if(this.nameParts.length==1){this.property="text";this.name=this.name+".text"}else this.property=this.nameParts.length==
2?this.nameParts[1]:this.nameParts.splice(2,this.nameParts.length-2)}this.regExp=RegExp("{"+this.tokenString.replace(RegExp("[.*+?|()\\[\\]{}\\\\]","g"),"\\$&")+"}","g");b.ad.data.Token.TokenMap.put(a,this)},getTokenString:function(){return this.tokenString},getTokenType:function(){return this.tokenType},getDataParams:function(){return this.dataParams},getNameParts:function(){return this.nameParts},getUnalteredName:function(){return this.unalteredName},getElementName:function(){return this.elementName},
getProperty:function(){return this.property},getName:function(){return this.name},evaluateValue:function(a){if(a===h)a=this.tokenSource;var d=this.defaultValue,c="";switch(this.tokenType){case b.ad.data.Token.TYPE_INTERNAL:c=this.name.substring(3).toLowerCase();d=Y[c];d=d!==h?b.ad.data.EnvVars.getPropertyValue(d).value:this.evaluateInternalValues(c);break;case b.ad.data.Token.TYPE_ELEMENT_PROPERTY:c=b.ad.Ad.getSprout().findElementsByName(this.getElementName());if(c!=null&&c.length>0){c=c[0];if(b.isFunction(b.ad.element.DataSourceElement)&&
c instanceof b.ad.element.DataSourceElement){c.tokens.put(this.tokenString,this);if(this.nameParts.length==1&&!b.endsWith(this.tokenString,".text"))this.tokenString=this.tokenString+".text";c.prop.dataSource!=null&&(d=c.evalTokenString(this.tokenString))}else d=c.getProperty(this.getProperty(),this.getDataParams())}break;case b.ad.data.Token.TYPE_VARIABLE:c=this.name.substring(4);d=b.ad.data.VariableManager.get(c);break;case b.ad.data.Token.TYPE_EXTERNAL_VARIABLE:c=this.name.indexOf("xvar:"==0)?this.name.substring(5):
this.name.substring(3);d=b.util.Querystring.get(c);break;case b.ad.data.Token.TYPE_PREFERENCE:d=this.dataParams.bucket;if(!d)d=b.ad.Ad.getSprout().ID;d=b.util.Cookie.get(d+"_"+this.name.substring(5))}if(d===null||d==="")d=this.defaultValue;d=this.formatValue(d);return a=a.replace(this.regExp,d)},evaluateInternalValues:function(a){var d="";switch(a){case "projectid":case "sproutid":d=b.ad.Ad.getSprout().ID;break;case "elapsedtime":d=((new Date).getTime()-b.ad.data.EnvVars.initializedTimestamp.getTime())/
1E3;break;case "mousex":d=b.ad.data.EnvVars.mouseX!==h?b.ad.data.EnvVars.mouseX:"";break;case "mousey":d=b.ad.data.EnvVars.mouseY!==h?b.ad.data.EnvVars.mouseY:"";break;case "screenorientation":d=b.ad.data.EnvVars.screenOrientation==0?"portrait":"landscape";break;case "screenwidth":d=k.screen.width;break;case "screenheight":d=k.screen.height;break;case "tiltavailable":d=b.util.Browser.isMotionDevice();break;case "random":d=[];if(this.dataParams.hasOwnProperty("range"))d=(""+this.dataParams.range).split(",");
else{d.push(100);d.push(0)}if(d.length==1)d="";else if(d.length==2){var a=Number(d[0]),c=Number(d[1]);if(""+d[0]==""+a&&""+c==""+d[1]){if(a>c){d=a;a=c;c=d}d=""+this.randomInRange(a,c)}else d=this.randomPick(d)}else d=this.randomPick(d);break;case "dayofyear":case "weekofyear":d=new Date;c=new Date(d.getFullYear(),0,1);d=Math.floor((d.getTime()-c.getTime())/846E5);if(a=="dayofyear")break;d=Math.floor((d-c.getDay())/7)+1;break;case "javascriptaccess":d=true}return d},randomInRange:function(a,b){return Math.round(Math.random()*
(b-a)+a)},randomPick:function(a){return a[this.randomInRange(0,a.length-1)]},formatValue:function(a){if(this.dataParams.hasOwnProperty("firstword"))this.dataParams.word="1";if(this.dataParams.hasOwnProperty("secondword"))this.dataParams.word="2";if(this.dataParams.hasOwnProperty("word")){var d=this.dataParams.hasOwnProperty("delimiter")?this.dataParams.delimiter:" ",c=Math.floor(Number(this.dataParams.word)),d=(""+a).split(d);!isNaN(c)&&c>0&&(a=d.length>=c?d[c-1]:"")}if(this.dataParams.hasOwnProperty("escapeurl")||
this.dataParams.hasOwnProperty("encodeurl"))a=escape(""+a);if(this.dataParams.hasOwnProperty("unescapeurl")||this.dataParams.hasOwnProperty("decodeurl"))a=unescape(""+a);if(this.dataParams.hasOwnProperty("escapexml")||this.dataParams.hasOwnProperty("encodexml")){a=(""+a).replace(RegExp("<","g"),"&lt;");a=a.replace(RegExp(">","g"),"&gt;");a=a.replace(RegExp("&","g"),"&amp;")}this.dataParams.hasOwnProperty("trim")&&(a=(""+a).replace(/^\s+|\s+$/g,""));this.dataParams.hasOwnProperty("uppercase")&&(a=
(""+a).toUpperCase());this.dataParams.hasOwnProperty("lowercase")&&(a=(""+a).toLowerCase());if(this.dataParams.hasOwnProperty("capitalize")){a=(""+a).toLowerCase();a=a.replace(/^\w/,function(a){return a.toUpperCase()})}if(this.dataParams.hasOwnProperty("numberformat")){c=this.dataParams.numberformat;c=="true"&&(c=",.");var d=c.charAt(2),e=parseInt(d),d=Number(a);if(!isNaN(d)){isNaN(e)||(d=j.round(d,e));a=c.charAt(0);e=c.charAt(1)!==h?c.charAt(1):".";d=(""+d).split(".");c=d[0];d=d.length>1?e+d[1]:
"";for(e=/(\d+)(\d{3})/;e.test(c);)c=c.replace(e,"$1"+a+"$2");return c+d}}if(this.dataParams.hasOwnProperty("elapsedtimeformat")){d=parseInt(a);if(isNaN(d))a="";else{c=this.dataParams.elapsedtimeformat;c=="true"&&(c="h:mm:ss");a=b.ad.data.EnvVars.formatElapsedTime(d,c)}}return a}},"sprout.ad.data.Token");b.ad.data.Token.TYPE_INTERNAL=1;b.ad.data.Token.TYPE_EXTERNAL_VARIABLE=2;b.ad.data.Token.TYPE_VARIABLE=3;b.ad.data.Token.TYPE_PREFERENCE=4;b.ad.data.Token.TYPE_ELEMENT_PROPERTY=5;b.ad.data.Token.tokenRegExp=
RegExp("{(fv:|xvar:|sp:|var:|pref:)?[ a-z0-9_\\-]+?(\\.\\@?[ a-z0-9_\\-]+?(\\:[ a-z0-9_]+?)?(\\[[ a-z0-9\\-\\._\\.\\:\\@\\[\\]\\|=]+?\\])?)*?(\\|[^{}\\|]+?)*?\\|?}","gi");b.ad.data.Token.TokenMap=new b.util.HashMap;b.ad.data.Token.BoundElementsMap=new b.util.HashMap;b.ad.data.Token.factory=function(a){var d=b.ad.data.Token.TokenMap.get(a);d==null&&(d=new b.ad.data.Token(a));return d};b.ad.data.Token.hasToken=function(a){if(typeof a!="string"||a.indexOf("{")==-1)return false;a=a.match(b.ad.data.Token.tokenRegExp);
return a!=null&&a.length>0};b.ad.data.Token.extractTokens=function(a){return a.match(b.ad.data.Token.tokenRegExp)};b.ad.data.Token.translateString=function(a){var d=[],c=b.ad.data.Token.extractTokens(a);if(c!=null){var e,g;for(e=0;e<c.length;++e){g=b.ad.data.Token.factory(c[e]);d.push(g);a=g.evaluateValue(a)}}return{translatedString:a,tokens:d}};b.ad.data.Token.bindToToken=function(a,d){if(d.handleTokenUpdate){var c=b.ad.data.Token.BoundElementsMap.get(a);if(c==null){c=[];c.push(d);b.ad.data.Token.BoundElementsMap.put(a,
c)}else{for(var e=0;e<c.length;++e)if(c[e]===d)return;c.push(d)}}};b.ad.data.Token.unbindFromToken=function(a,d){var c=b.ad.data.Token.BoundElementsMap.get(a);if(c)for(var e=0;e<c.length;++e)c[e]===d&&c.splice(e,1)};b.ad.data.Token.dispatchChangeEvent=function(a,d){var c=b.ad.data.Token.BoundElementsMap.get(a),e;if(c!=null)for(e=0;e<c.length;++e)c[e].handleTokenUpdate(a,d)};b.ad.data.Token.handleVariableChanged=function(a){b.ad.data.Token.dispatchChangeEvent("var:"+a.data.name,a.data.value)};b.core.Bootstrap.registerBootstrap(b.core.Bootstrap.PHASE.CONFIGURATION,
function(){b.ad.data.VariableManager.getInstance().addEventListener(b.ad.data.VariableManager.VARIABLE_CHANGED_EVENT,b.ad.data.Token.handleVariableChanged,b.ad.data.Token)});b.ad.data.EnvironmentVariable={};b.ad.data=b.ad.data||{};b.ad.data.EnvironmentVariable=b.core.Class.extend({screenOrientation:0,construct:function(){this.pageReferrer=this.browserURL=null;this.initializedTimestamp=new Date;this.geoLoaded=false;this.mouseY=this.mouseX=0;b.util.IFrameMessage.addListener("orientationchange",this.handleRotate);
b.util.Broadcaster.addListener("BRIDGE_READY",this)},messageIn:function(a,b){switch(a){case "BRIDGE_READY":this.screenOrientation=b.orientation}},handleRotate:function(a){var b=b.ad.Ad.getSprout();b.ad.data.EnvVars.screenOrientation=a.orientation;if(b!=null){b.display.html.trigger("orientationchange");b.ad.data.Token.dispatchChangeEvent("sp:screenOrientation",b.ad.data.EnvVars.screenOrientation)}},positionListener:function(a){if(a.touches&&a.touches[0]){b.ad.data.EnvVars.mouseX=a.touches[0].pageX;
b.ad.data.EnvVars.mouseY=a.touches[0].pageY}else{b.ad.data.EnvVars.mouseX=a.pageX;b.ad.data.EnvVars.mouseY=a.pageY}b.ad.data.Token.dispatchChangeEvent("sp:mouseX",b.ad.data.EnvVars.mouseX);b.ad.data.Token.dispatchChangeEvent("sp:mouseY",b.ad.data.EnvVars.mouseY);b.log.Logger.log("mouseX: "+b.ad.data.EnvVars.getPropertyValue(40).value+" / mouseY: "+b.ad.data.EnvVars.getPropertyValue(41).value);return true},enablePositionListener:function(a){a.bind("mousedown",this.positionListener);b.util.Browser.isTouchDevice()&&
a.bind("touchmove",this.positionListener)},disablePositionListener:function(a){a.unbind("mousedown",this.positionListener);b.util.Browser.isTouchDevice()&&a.unbind("touchmove",this.positionListener)},pad:function(a,b){a=""+a;for(b=b||2;a.length<b;)a="0"+a;return a},getElapsedTime:function(a){a===h&&(a="mm:ss");return this.formatElapsedTime(((new Date).getTime()-this.initializedTimestamp.getTime())/1E3,a)},formatElapsedTime:function(a,b){var c=isNaN(a)?0:Math.floor(a),e,g,f,i,m,h,j;b||(b="hh:mm:ss");
e=Math.floor(c/86400);c=c-e*86400;g=Math.floor(c/3600);c=c-g*3600;f=Math.floor(c/60);c=c-f*60;i=b.indexOf("d">-1)?b.split("d").length-1:0;m=b.indexOf("h">-1)?b.split("h").length-1:0;h=b.indexOf("m">-1)?b.split("m").length-1:0;j=b.indexOf("s">-1)?b.split("s").length-1:0;i&&(b=b.replace(/d{1,2}/g,this.pad(e,i)));m&&(b=b.replace(/h{1,2}/g,this.pad(g,m)));h&&(b=b.replace(/m{1,2}/g,this.pad(f,h)));j&&(b=b.replace(/s{1,2}/g,this.pad(c,j)));return b},getPropertyValue:function(a){var d={pending:false,property:"",
value:""},c=new Date;switch(a){case 31:d.value=""+Math.floor(c.getTime()/1E3);break;case 32:a=c.getTimezoneOffset()*6E4;c.setTime(c.getTime()+a);d.value=c.getFullYear()+"-"+this.pad(""+(c.getMonth()+1),2)+"-"+this.pad(""+c.getDate())+"T"+this.pad(c.getHours(),2)+":"+this.pad(c.getMinutes(),2)+":"+this.pad(c.getMinutes(),2)+"Z";break;case 8:d.value=this.pad(c.getHours(),2)+":"+this.pad(c.getMinutes(),2);break;case 27:d.value=this.pad(""+(c.getMonth()+1),2)+"/"+this.pad(""+c.getDate())+"/"+c.getFullYear();
break;case 5:d.value=c.getFullYear();break;case 4:d.value=c.getMonth()+1;break;case 7:d.value=c.getDate();break;case 9:d.value=c.getHours();break;case 6:d.value=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][c.getDay()];break;case 11:c="Other";navigator.appVersion.indexOf("Win")!=-1?c="Windows":navigator.appVersion.indexOf("Mac")!=-1?c="Mac":navigator.appVersion.indexOf("X11")!=-1?c="Unix":navigator.appVersion.indexOf("Linux")!=-1&&(c="Linux");d.value=c;break;case 10:d.value=
navigator.language;break;case 25:if(this.browserURL==null)this.browserURL=l.location.href;d.value=this.browserURL;break;case 29:if(this.pageReferrer==null)this.pageReferrer=l.referrer;d.value=this.pageReferrer;break;case 24:return null;case 26:d.value=((new Date).getTime()-this.initializedTimestamp.getTime())/1E3;break;case 30:d.value="true";break;case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:break;case 34:d.value=k.screen.width;break;case 35:d.value=k.screen.height;break;case 36:d.value=
"portrait";if(Math.abs(this.screenOrientation)==90)d.value="landscape";break;case 40:d.value=this.mouseX;break;case 41:d.value=this.mouseY;break;case 37:d.value=Boolean(b.util.Browser.isMotionDevice()).toString();break;default:return null}return d}},"sprout.ad.data.EnvironmentVariable");b.ad.data.EnvVars=new b.ad.data.EnvironmentVariable;b.display.KeyFrame={};b.display=b.display||{};b.display.KeyFrame=b.core.Class.extend({construct:function(a,b){this.keyFramesRule=a;this.percentage=b},getKeyFrameString:function(){var a=
this,d=a.keyFramesRule.activeAnimation.displayNode,c=new b.util.HashMap,e=new b.util.HashMap,g=a.keyFramesRule.totalDuration*(a.percentage/100),f,i,m,h,k,l,o,q,r,p,t;a.keyFramesRule.keyFrameProperties.forEach(function(b){i=b[0];b.forEach(function(a){g>a.startTime&&(i=a)});m=j.round(i.startTime/a.keyFramesRule.totalDuration*100,3);h=j.round(i.endTime/a.keyFramesRule.totalDuration*100,3);k=h-m;l=a.percentage-m;o=i.endValue-i.startValue;q=a.percentage<m?i.startValue:a.percentage>=h?i.endValue:i.easingFunction(l,
i.startValue,o,k);q=j.round(q,2);if(i.transform){if(i.transform=="translateX"){q=q-d.getValue("x");c.put("left",{style:"left",value:d.getValue("x"),units:"px"})}else if(i.transform=="translateY"){q=q-d.getValue("y");c.put("top",{style:"top",value:d.getValue("y"),units:"px"})}e.put(i.transform,{transform:i.transform,value:q,units:i.units})}else c.put(i.style,{style:i.style,value:q,units:i.units})});if(e.size()>0||c.size()>0){f=a.percentage+"% {";f=f+(a.percentage!=100?"margin-bottom:1px;":"margin-bottom:0px;");
if(e.size()>0&&d.transformsEnabled){r={};if(e.get("translateX"))r.translateX=e.get("translateX");if(e.get("translateY"))r.translateY=e.get("translateY");if(e.get("rotate"))r.rotate=e.get("rotate");else if(d.getValue("rotation")!==0)r.rotate={value:d.getValue("rotation"),transform:"rotate",units:"deg"};if(e.get("scale"))r.scale=e.get("scale");else if(d.getValue("scale")!==1)r.scale={value:d.getValue("scale"),transform:"scale",units:""};f=f+"-webkit-transform:";for(t in r){p=r[t];f=f+(p.transform+"("+
p.value+p.units+") ")}f=f+";"}c.forEach(function(a){f=f+(a.style+":"+a.value+a.units+";")});f=f+"}"}else f=a.percentage+"% { } ";return f}},"sprout.display.KeyFrame");b.display.KeyFramesRule={};b.display=b.display||{};b.display.KeyFramesRule=b.core.Class.extend({construct:function(a){this.activeAnimation=a;this.totalDuration=a.totalDuration;this.keyFrameProperties=new b.util.HashMap;this.keyFrames=new b.util.HashMap},addKeyFrameProperty:function(a,b,c,e,f,h,i,m,j){var k=this.keyFrameProperties.get(a);
if(!k){k=[];this.keyFrameProperties.put(a,k)}k.push({property:a,style:b,startValue:c,endValue:e,units:f,easingFunction:h,duration:i,transform:j,startTime:m,endTime:m+i})},createKeyFrameAtPercentage:function(a){a=j.round(a,3);this.keyFrames.get(a)||this.keyFrames.put(a,new b.display.KeyFrame(this,a))},getRuleString:function(){var a=this,b=a.activeAnimation.animationName+" {";this.keyFrameProperties.forEach(function(b){if(b.length>1){var d;b.forEach(function(b){if(d){var c=b.startTime/a.totalDuration*
100,f=d.startTime/a.totalDuration*100,m=d.endTime/a.totalDuration*100,h=d.endValue-d.startValue,c=c>m?d.endValue:f==m?d.endValue:d.easingFunction(c-f,d.startValue,h,m-f);b.startValue=c}d=b})}});a.keyFrames.forEach(function(a){b=b+a.getKeyFrameString()});return b=b+"}"},getAnimationName:function(){return this.activeAnimation.animationName}},"sprout.display.KeyFramesRule");b.cycle={};b.cycle.Cycle={};b.cycle=b.cycle||{};b.cycle.Cycle=b.event.EventDispatcher.extend({construct:function(){var a=this;this._super();
setTimeout(function(){a.complete()},0)},complete:function(){b.cycle.CycleManager.reportCycleFinished();this.dispatchEvent(new b.event.Event(v))}},"sprout.cycle.Cycle");var v="cycleCompleteEvent";b.cycle.CycleManager={};b.cycle=b.cycle||{};b.cycle.CycleManager={currentCycle:null,reportCycleFinished:function(){b.cycle.CycleManager.currentCycle=null},addEventListener:function(a,d,c,e){if(b.cycle.CycleManager.currentCycle===null)b.cycle.CycleManager.currentCycle=new b.cycle.Cycle;b.cycle.CycleManager.currentCycle.addEventListener(a,
d,c,e)},dispatchEvent:function(a){b.cycle.CycleManager.currentCycle.dispatchEvent(a)},hasEventListener:function(a){b.cycle.CycleManager.currentCycle.hasEventListener(a)},removeEventListener:function(a,d,c){b.cycle.CycleManager.currentCycle.removeEventListener(a,d,c)},removeAllListeners:function(){b.cycle.CycleManager.currentCycle.removeAllListeners()}};b.sequence={};b.sequence.SequenceStep={};b.sequence=b.sequence||{};b.sequence.SequenceStep=b.core.Class.extend({construct:function(a,b){this.sequence=
this.parent=null;this.childSequenceSteps=[];this.sequenceStepFunction=a;this.reportComplete=b},addSequenceStep:function(a){this.childSequenceSteps.push(a);a.parent=this},execute:function(){this.sequence.executingSequenceStep=this;this.sequenceStepFunction();this.reportComplete&&this.completeSequenceStep()},completeSequenceStep:function(){this.sequence.executingSequenceStep=null;this.executeNextChild()},executeNextChild:function(){this.childSequenceSteps.length>0?this.childSequenceSteps.shift().execute():
this.parent?this.parent.reportChildComplete(this):this.sequence.reportSequenceStepComplete(this)},reportChildComplete:function(){this.executeNextChild()}},"sprout.sequence.SequenceStep");b.sequence.Sequence={};b.sequence=b.sequence||{};b.sequence.Sequence=b.core.Class.extend({construct:function(a){this.ID=a;this.sequenceSteps=[];this.executingSequenceStep=null;this.executing=false},addSequenceStepFunction:function(a,d){d===h&&(d=true);this.addSequenceStep(new b.sequence.SequenceStep(a,d))},addSequenceStep:function(a){a.sequence=
this;this.executingSequenceStep!=null?this.executingSequenceStep.addSequenceStep(a):this.sequenceSteps.push(a)},reportSequenceStepComplete:function(){this.executeNextSequenceStep()},executeNextSequenceStep:function(){if(this.sequenceSteps.length>0){b.sequence.Sequencer.executingSequence=this;this.sequenceSteps.shift().execute();b.sequence.Sequencer.executingSequence=null}else b.sequence.Sequencer.reportSequenceComplete(this)},execute:function(){if(!this.executing){this.executing=true;this.executeNextSequenceStep()}}},
"sprout.sequence.Sequence");b.sequence.Sequencer={};b.sequence=b.sequence||{};b.sequence.Sequencer={lastSequenceID:0,sequences:new b.util.HashMap,executingSequence:null,newSequence:function(){b.sequence.Sequencer.lastSequenceID++;var a=new b.sequence.Sequence(b.sequence.Sequencer.lastSequenceID);b.sequence.Sequencer.sequences.put(a.ID,a);b.cycle.CycleManager.addEventListener(v,b.sequence.Sequencer.handleCycleComplete,b.sequence.Sequencer);return a},handleCycleComplete:function(){b.sequence.Sequencer.sequences.forEach(function(a){a.execute()})},
reportSequenceComplete:function(a){b.sequence.Sequencer.sequences.remove(a.ID)}};b.display.ActiveAnimation={};b.display=b.display||{};b.display.ActiveAnimation=b.core.Class.extend({construct:function(a){this.transitions=a;this.displayNode=this.transitions[0].displayNode;this.interrupted=this.completed=this.executed=false;this.handleWebkitAnimationEnd=null;this.animationName=this.displayNode.ID+"_animation"+ ++Z;this.totalDuration=0;this.started=false},execute:function(){var a=this,d=a.transitions,
c=a.displayNode,e=c.html;if(!a.completed&&!a.executed){a.totalDuration=a.transitions[0].transitionDisplayNodeBatch.transitionBatch.totalTime;if(c.visibility&&c.active){a.started=true;d.sort(E);var f=new b.display.KeyFramesRule(a);d.forEach(function(a){var b,d=a.easingMode;b=A;switch(a.easingType){case "cubic":d=="in"?b=M:d=="out"?b=N:d=="inout"&&(b=O);break;case "strong":d=="in"?b=V:d=="out"?b=W:d=="inout"&&(b=X);break;case "expo":d=="in"?b=P:d=="out"?b=Q:d=="inout"&&(b=R);break;case "back":a.animate=
true;d=="in"?b=F:d=="out"?b=G:d=="inout"&&(b=H);break;case "sine":d=="in"?b=S:d=="out"?b=T:d=="inout"&&(b=U);break;case "elastic":a.animate=true;d=="in"?b=J:d=="out"?b=K:d=="inout"&&(b=L);break;case "bounce":a.animate=true;d=="in"?b=z:d=="out"?b=w:d=="inout"&&(b=I)}f.addKeyFrameProperty(a.property,a.style,a.startValue,a.endValue,a.units,b,a.duration,a.getStartTime(),a.transform)});var h=Math.ceil($/a.transitions.length);f.createKeyFrameAtPercentage(0);f.createKeyFrameAtPercentage(100);f.keyFrameProperties.forEach(function(a){a.forEach(function(a){var b=
a.startTime/f.totalDuration*100,d=a.endTime/f.totalDuration*100,c=(d-b)/h;f.createKeyFrameAtPercentage(d);if(b===d)b!==0&&f.createKeyFrameAtPercentage(b-0.0010);else{f.createKeyFrameAtPercentage(b);if(a.easingFunction!==A)for(a=b;a<=d;a=a+c)f.createKeyFrameAtPercentage(a)}})});a.handleWebkitAnimationEnd=function(b){b.animationName==a.animationName&&(!a.interrupted&&!a.completed)&&a.complete()};e.get(0).addEventListener("webkitAnimationEnd",a.handleWebkitAnimationEnd,false);b.display.DisplayManager.addKeyFramesRule(f)}c.addActiveAnimation(a);
a.executed=true}},postExecute:function(){this.transitions.forEach(function(a){a.postExecute()})},complete:function(){if(!this.completed){this.cleanup();this.transitions.forEach(function(a){a.complete()});b.display.DisplayManager.validateDisplay()}this.executed=this.completed=true},detectComplete:function(){return this.interrupted?true:this.displayNode.getStyle("margin-bottom",true)=="0px"},forceComplete:function(){this.completed||this.cleanup();this.executed=this.completed=true},cleanup:function(){if(this.handleWebkitAnimationEnd){this.displayNode.html.get(0).removeEventListener("webkitAnimationEnd",
this.handleWebkitAnimationEnd);this.handleWebkitAnimationEnd=null}this.interrupted||this.displayNode.removeActiveAnimation();b.display.DisplayManager.deleteKeyFramesRule(this.animationName)},interrupt:function(){if(!this.interrupted){this.cleanup();for(var a in this.transitions)this.transitions[a].interrupt();this.interrupted=true}}},"sprout.display.ActiveAnimation");var $=50,Z=0;b.display.ActiveTransition={};b.display=b.display||{};b.display.ActiveTransition=b.core.Class.extend({construct:function(a){this.transition=
a;this.displayNode=a.displayNode;this.interrupted=this.completed=this.executed=false;this.handleWebkitTransitionEnd=null;this.property=a.property;this.style=a.style;this.easing=this.transform=null;this.duration=a.duration;this.startTime=a.getStartTime();this.started=false},execute:function(){var a=this,b=a.transition,c=b.displayNode,e=c.html;if(!a.completed&&!a.executed){if(c.visibility&&c.active){a.started=true;var f=b.easingType,h=b.easingMode;a.easing="linear";switch(f){case "cubic":if(h=="in")a.easing=
"cubic-bezier(0.61, 0, 0.75, 0.4)";else if(h=="out")a.easing="cubic-bezier(0.25, 0.6, 0.39, 1)";else if(h=="inout")a.easing="cubic-bezier(0.61, 0, 0.39, 1)";break;case "strong":if(h=="in")a.easing="cubic-bezier(0.9, 0, 0.87, 0.27)";else if(h=="out")a.easing="cubic-bezier(0.13, 0.73, 0.1, 1)";else if(h=="inout")a.easing="cubic-bezier(0.9, 0, 0.1, 1)";break;case "expo":if(h=="in")a.easing="cubic-bezier(0.7, 0, 0.9, 0)";else if(h=="out")a.easing="cubic-bezier(0.1, 1, 0.3, 1)";else if(h=="inout")a.easing=
"cubic-bezier(0.95, 0, 0.05, 1)";break;case "sine":if(h=="in")a.easing="ease-in";else if(h=="out")a.easing="ease-out";else if(h=="inout")a.easing="ease-in-out"}a.handleWebkitTransitionEnd=function(b){b.propertyName==a.style&&(!a.interrupted&&!a.completed)&&a.complete()};e.get(0).addEventListener("webkitTransitionEnd",a.handleWebkitTransitionEnd,false);if((b.property=="x"||b.property=="y")&&c.transformsEnabled&&c.hardwareAcceleratedTransitionsEnabled){e=b.endValue-b.startValue;b.property=="x"?c.setTranslateX(e):
c.setTranslateY(e)}else c.setValue(b.property,b.endValue);c.addActiveTransition(a)}a.executed=true}},complete:function(){var a=this.transition;if(!this.completed){this.cleanup();a.complete();b.display.DisplayManager.validateDisplay()}this.completed=this.executed=true},detectComplete:function(){return this.interrupted?true:this.displayNode.getComputedValue(this.property)==this.endValue},forceComplete:function(){this.completed||this.cleanup();this.completed=this.executed=true},cleanup:function(){var a=
this.transition.displayNode,b=a.html;if(this.handleWebkitTransitionEnd!=null){b.get(0).removeEventListener("webkitTransitionEnd",this.handleWebkitTransitionEnd);this.handleWebkitTransitionEnd=null}this.interrupted||a.removeActiveTransition(this.property)},interrupt:function(){if(!this.interrupted){this.cleanup();this.transition.interrupt();this.interrupted=true}}},"sprout.display.ActiveTransition");b.display.Transition={};b.display=b.display||{};b.display.Transition=b.core.Class.extend({construct:function(a,
d,c,e,f){this.id=++b.display.Transition.lastID;this.duration=a;this.easingType=d;this.easingMode=c;this.delay=e;this.order=f;this.offset=0;this.style=this.property=this.transitionDisplayNodeBatch=this.displayNode=null;this.units="";this.endValue=this.startValue=this.transform=null;this.finalValueSet=this.interrupted=this.completed=this.setupComplete=false},setup:function(){var a=this.displayNode;if(!this.setupComplete){this.startValue=a.getValue(this.property);switch(this.property){case "x":if(a.transformsEnabled&&
a.hardwareAcceleratedTransitionsEnabled){this.style="-webkit-transform";this.transform="translateX"}else this.style="left";this.units="px";break;case "y":if(a.transformsEnabled&&a.hardwareAcceleratedTransitionsEnabled){this.style="-webkit-transform";this.transform="translateY"}else this.style="top";this.units="px";break;case "width":case "height":this.style=this.property;this.units="px";break;case "rotation":this.style="-webkit-transform";this.units="deg";this.transform="rotate";break;case "scale":this.style=
"-webkit-transform";this.transform="scale";break;case "opacity":this.style="opacity";break;case "borderWidth":this.style="border-width";this.units="px"}this.setupComplete=true}},postExecute:function(){this.displayNode.setValue(this.property,this.endValue,true);this.finalValueSet=true},complete:function(){if(!this.completed){!this.interrupted&&!this.finalValueSet&&this.displayNode.setValue(this.property,this.endValue);this.completed=true;this.transitionDisplayNodeBatch.reportTransitionCompleted()}},
forceComplete:function(){if(!this.completed){!this.interrupted&&!this.finalValueSet&&this.displayNode.setValue(this.property,this.endValue);this.completed=true}},getStartTime:function(){return this.offset+this.delay},interrupt:function(){this.interrupted=true},executeAsAnimation:function(){return this.easingType=="back"||this.easingType=="elastic"||this.easingType=="bounce"||this.displayNode.styleChanged(this.style)}},"sprout.display.Transition");b.display.Transition.lastID=0;b.display.TransitionDisplayNodeBatch=
{};b.display=b.display||{};b.display.TransitionDisplayNodeBatch=b.core.Class.extend({construct:function(a){this.transitionBatch=a;this.transitions=[];this.numberTransitionsComplete=0;this.activeAnimation=null;this.activeTransitions=[]},addTransition:function(a){this.transitions.push(a);a.transitionDisplayNodeBatch=this},execute:function(){var a=this,d=[],c=false,e;a.transitions.forEach(function(a){a.setup()});a.transitions.forEach(function(a){d.push(a);if(!c&&(d.length>1||a.executeAsAnimation()))c=
true});if(c){a.activeAnimation=new b.display.ActiveAnimation(d);a.activeAnimation.execute()}else d.forEach(function(d){e=new b.display.ActiveTransition(d);a.activeTransitions.push(e);e.execute()})},postExecute:function(){this.activeAnimation&&this.activeAnimation.postExecute()},reportTransitionCompleted:function(){this.numberTransitionsComplete++;this.numberTransitionsComplete>=this.transitions.length&&this.transitionBatch.reportTransitionDisplayNodeBatchCompleted()},complete:function(){this.activeAnimation!=
null&&this.activeAnimation.complete();this.activeTransitions.forEach(function(a){a.complete()})},detectComplete:function(){var a=true;this.activeAnimation!=null&&(this.activeAnimation.detectComplete()||(a=false));this.activeTransitions.forEach(function(b){a=b.detectComplete()?a:false});return a},forceComplete:function(){this.activeAnimation!=null&&this.activeAnimation.forceComplete();this.activeTransitions.forEach(function(a){a.forceComplete()});this.transitions.forEach(function(a){a.forceComplete()})}},
"sprout.display.TransitionDisplayNodeBatch");b.display.TransitionBatch={};b.display=b.display||{};b.display.TransitionBatch=b.core.Class.extend({construct:function(a){this.displaySequenceStep=a;this.numberOfTransitionDisplayNodeBatchesComplete=0;this.transitionDisplayNodeBatches=new b.util.HashMap;this.animationSheet=null;this.totalTime=0;this.timeoutRetries=6;this.timeoutRetryLength=200},addTransition:function(a){var d=this.transitionDisplayNodeBatches.get(a.displayNode.ID);if(d==null){d=new b.display.TransitionDisplayNodeBatch(this);
this.transitionDisplayNodeBatches.put(a.displayNode.ID,d)}d.addTransition(a);this.totalTime=Math.max(a.getStartTime()+a.duration,this.totalTime)},process:function(){var a=this;(new Date).getTime();var b=a.totalTime;a.transitionDisplayNodeBatches.forEach(function(a){a.execute()});setTimeout(function(){a.transitionDisplayNodeBatches.forEach(function(a){a.postExecute()})},0);(new Date).getTime();b>0&&(b=b+100);a.startTimeout(b)},startTimeout:function(a){var b=this;b.timeoutRetries--;b.timeoutRetries>=
0?b.timeoutID=setTimeout(function(){b.detectComplete()?b.transitionDisplayNodeBatches.forEach(function(a){a.complete()}):b.startTimeout(b.timeoutRetryLength)},a):b.transitionDisplayNodeBatches.forEach(function(a){a.complete()})},detectComplete:function(){var a=true;this.transitionDisplayNodeBatches.forEach(function(b){a=b.detectComplete()?a:false});return a},reportTransitionDisplayNodeBatchCompleted:function(){this.numberOfTransitionDisplayNodeBatchesComplete++;if(this.numberOfTransitionDisplayNodeBatchesComplete>=
this.transitionDisplayNodeBatches.size()){clearTimeout(this.timeoutID);this.displaySequenceStep.reportTransitionBatchCompleted()}},forceComplete:function(){clearTimeout(this.timeoutID);this.transitionDisplayNodeBatches.forEach(function(a){a.forceComplete()});this.transitionDisplayNodeBatches.clear()}},"sprout.display.TransitionBatch");b.display.DisplaySequenceStep={};b.display=b.display||{};b.display.DisplaySequenceStep=b.sequence.SequenceStep.extend({construct:function(a,d){this.completed=false;
this.ID=b.display.DisplaySequenceStep.generateDisplaySequenceStepID();this._super(a,d);this.transitionOrders=new b.util.HashList;this.forceCompleting=this.isRendering=false;this.transitionBatch=new b.display.TransitionBatch(this)},addTransition:function(a){var b=this.transitionOrders.get(a.order);if(b===null){b=[];this.transitionOrders.put(a.order,b)}b.push(a)},getTotalTime:function(){var a=0;this.transitionOrders.forEach(function(){var b=0;this.order.forEach(function(a){b=Math.max(a.getStartTime()+
a.duration,b)});a=a+b});return a},render:function(){var a=this;if(!a.isRendering&&!a.forceCompleting){a.isRendering=true;for(var b=a.transitionOrders.keys().sort(function(a,b){return a-b}),c=b.length,e=0,f=0;f<c;f++){var h=0;a.transitionOrders.get(b[f]).forEach(function(b){h=Math.max(b.delay+b.duration,h);b.offset=e;a.transitionBatch.addTransition(b)});e=e+h}a.transitionBatch.process()}},reportTransitionBatchCompleted:function(){if(!this.completed){this.complete=true;b.display.DisplayManager.reportDisplaySequenceStepComplete(this);
this.completeSequenceStep()}},forceComplete:function(){if(!this.completed){this.complete=this.forceCompleting=true;this.transitionBatch.forceComplete();b.display.DisplayManager.reportDisplaySequenceStepComplete(this);this.completeSequenceStep()}}},"sprout.display.DisplaySequenceStep");b.display.DisplaySequenceStep.lastDisplaySequenceStepID=0;b.display.DisplaySequenceStep.generateDisplaySequenceStepID=function(){return this.lastDisplaySequenceStepID++};b.ad.tracking.Tracker={};b.ad.tracking=b.ad.tracking||
{};b.ad.tracking.Tracker=b.core.Class.extend({construct:function(){this.trackerBackends=[];b.util.Broadcaster.addListener("APPLICATION_INIT",this)},getTrackerBackends:function(){return this.trackerBackends},messageIn:function(a){switch(a){case "APPLICATION_INIT":this.init()}},init:function(){b.ad.Ad.getSprout().hasOwnProperty("doubleclick")&&this.trackerBackends.push(new b.ad.tracking.DoubleClick)}},"sprout.ad.tracking.Tracker");b.ad.tracking.Tracker.instance=null;b.ad.tracking.Tracker.getInstance=
function(){if(!b.ad.tracking.Tracker.instance)b.ad.tracking.Tracker.instance=new b.ad.tracking.Tracker;return b.ad.tracking.Tracker.instance};b.ad.tracking.Tracker.track=function(a){if(!a.hasOwnProperty("sproutID"))a.sproutID=b.ad.Ad.getSprout().ID;b.ad.tracking.Tracker.getInstance().getTrackerBackends().forEach(function(b){b.track(a)});b.util.Broadcaster.sendMessage("TRACK",a)};b.ad.tracking.Tracker.getFilename=function(a){var d=a;b.ad.tracking.Tracker.getInstance().getTrackerBackends().forEach(function(b){d==
a&&typeof b.getFilename==="function"&&(d=b.getFilename(a))});return d};b.ad.tracking.Tracker.controlTimer=function(a,d){b.ad.tracking.Tracker.getInstance().getTrackerBackends().forEach(function(b){typeof b.controlTimer==="function"&&b.controlTimer(a,d)})};b.core.Bootstrap.registerBootstrap(b.core.Bootstrap.PHASE.CONFIGURATION,function(){b.ad.tracking.Tracker.getInstance()});b.ad.trigger={};b.ad.trigger.Trigger={};b.ad.trigger=b.ad.trigger||{};b.ad.trigger.Trigger=b.core.Class.extend({construct:function(a,
b,c){this.name=a;this.target=b;this.event=c},getName:function(){return this.name},getTarget:function(){return this.target},getEvent:function(){return this.event}},"sprout.ad.trigger.Trigger");b.ad.trigger.TriggerDefines={};b.ad=b.ad||{};b.ad.trigger=b.ad.trigger||{};b.ad.trigger.TriggerDefines={};b.ad.trigger.TriggerDefines.SHAKE="shake";b.display.DisplayManager={};b.display=b.display||{};b.display.DisplayManager=b.core.Class.extend({construct:function(){this.buildingDisplaySequenceStep=null;this.activeDisplaySequenceSteps=
new b.util.HashMap;this.keyFramesRules={};this.userInteractionAllowed=false;this.invalidatedDisplayNodes=new b.util.HashList;this.displayValid=true;this.styleSheet=null;this.displayNodes={};b.util.Broadcaster.addListener("APPLICATION_INIT",this)},messageIn:function(a){switch(a){case "APPLICATION_INIT":this.styleSheet=j("#sproutDynamicStyles").get(0);b.ad.page.PageManager.addEventListener(b.ad.page.PageManager.BEFORE_PAGE_HIDE_EVENT,this.handleBeforePageHide,this);b.ad.page.PageManager.addEventListener(b.ad.page.PageManager.BEFORE_PAGE_SHOW_EVENT,
this.handleBeforePageShow,this);b.ad.page.PageManager.addEventListener(b.ad.page.PageManager.DEACTIVATE_PAGE_START_EVENT,this.handleDeactivatePageStart,this)}},isUserInteractionAllowed:function(){return this.userInteractionAllowed},setUserInteractionAllowed:function(a){this.userInteractionAllowed=a},addTransition:function(a){this.startDisplaySequenceStep(a);this.buildingDisplaySequenceStep.addTransition(a)},startDisplaySequenceStep:function(){var a,d=this;if(d.buildingDisplaySequenceStep===null){a=
new b.display.DisplaySequenceStep(function(){a.render();d.activeDisplaySequenceSteps.put(a.ID,a)},false);d.buildingDisplaySequenceStep=a;b.sequence.Sequencer.executingSequence!=null?b.sequence.Sequencer.executingSequence.addSequenceStep(a):b.sequence.Sequencer.newSequence().addSequenceStep(a);b.cycle.CycleManager.addEventListener(v,this.handleCycleComplete,this,D)}},reportDisplaySequenceStepComplete:function(a){this.activeDisplaySequenceSteps.remove(a.ID)},forceDisplayComplete:function(){this.activeDisplaySequenceSteps.forEach(function(a){a.forceComplete()})},
invalidateDisplayNode:function(a){this.invalidateDisplay();this.invalidatedDisplayNodes.indexOfKey(a.ID)===-1&&this.invalidatedDisplayNodes.put(a.ID,a)},invalidateDisplay:function(){if(this.displayValid){this.displayValid=false;b.cycle.CycleManager.addEventListener(v,this.handleCycleComplete,this,D)}},validateDisplay:function(){if(!this.displayValid){var a=this.invalidatedDisplayNodes;this.invalidatedDisplayNodes=new b.util.HashList;this.displayValid=true;a.forEach(function(a){a.displayBuildValid||
a.buildDisplay()});a.forEach(function(a){a.validateDisplay()});this.updateStyleSheet();a.forEach(function(a){a.drawDisplay()});a.clear()}},updateStyleSheet:function(){var a="",b,c;for(c in this.displayNodes){b=this.displayNodes[c];b.stylesText&&(a=a+("#"+b.ID+" {"+b.stylesText+"}"))}for(var e in this.keyFramesRules)a=a+(" "+this.keyFramesRules[e]);this.styleSheet.innerText=a},registerDisplayNode:function(a){this.displayNodes[a.ID]=a},addKeyFramesRule:function(a){this.keyFramesRules[a.getAnimationName()]=
"@-webkit-keyframes "+a.getRuleString();this.invalidateDisplay()},deleteKeyFramesRule:function(a){delete this.keyFramesRules[a];this.invalidateDisplay()},handleBeforePageHide:function(){this.setUserInteractionAllowed(false)},handleBeforePageShow:function(){this.setUserInteractionAllowed(true)},handleDeactivatePageStart:function(){this.forceDisplayComplete()},handleCycleComplete:function(){this.buildingDisplaySequenceStep=null;this.validateDisplay()}},"sprout.display.DisplayManager");var D=b.event.EventDispatcher.LISTENER_PRIORITY_HIGH-
10;b.display.DisplayManager.instance=null;b.display.DisplayManager.getInstance=function(){if(!b.display.DisplayManager.instance)b.display.DisplayManager.instance=new b.display.DisplayManager;return b.display.DisplayManager.instance};b.display.DisplayManager.addTransition=function(a){b.display.DisplayManager.getInstance().addTransition(a)};b.display.DisplayManager.addKeyFramesRule=function(a){b.display.DisplayManager.getInstance().addKeyFramesRule(a)};b.display.DisplayManager.deleteKeyFramesRule=function(a){b.display.DisplayManager.getInstance().deleteKeyFramesRule(a)};
b.display.DisplayManager.invalidateDisplayNode=function(a){b.display.DisplayManager.getInstance().invalidateDisplayNode(a)};b.display.DisplayManager.isUserInteractionAllowed=function(){return b.display.DisplayManager.getInstance().isUserInteractionAllowed()};b.display.DisplayManager.registerDisplayNode=function(a){b.display.DisplayManager.getInstance().registerDisplayNode(a)};b.display.DisplayManager.reportDisplaySequenceStepComplete=function(a){b.display.DisplayManager.getInstance().reportDisplaySequenceStepComplete(a)};
b.display.DisplayManager.validateDisplay=function(){b.display.DisplayManager.getInstance().validateDisplay()};b.core.Bootstrap.registerBootstrap(b.core.Bootstrap.PHASE.CONFIGURATION,function(){b.display.DisplayManager.getInstance()});b.ad.SproutDisplayNode={};b.ad=b.ad||{};b.ad.SproutDisplayNode=b.ad.SproutNode.extend({construct:function(a,d){this._super(a,d);this.display=null;this.displayState=d.displayState;delete d.displayState;this.triggerHandlerArrays=new b.util.HashMap;this.htmlEventListeners=
new b.util.HashMap;this.swipeEndPoint=this.swipeStartPoint=this.swipeStartTime=null;this.ready=false},createDisplay:function(){if(!this.display)throw Error("Must implement the createDisplay method for SproutDisplayNode");},createDisplayChildren:function(){},destroyDisplay:function(){this.displayState=this.display.saveState();this.display=null},registerTriggerHandler:function(a,d,c,e){var f=b.display.DisplayObject.HTML_EVENT_TRIGGER_MAP[a];if(this.nodeType=="PAGE"&&f!==h)return this.ownerSprout.registerTriggerHandler(a,
d,c,this);e=e?e.ID+"_"+a:a;this.triggerHandlerArrays.get(e)==null&&this.triggerHandlerArrays.put(e,[]);this.triggerHandlerArrays.get(e).push({object:d,method:c});f!==h&&this.addHTMLListener(f,a)},clearTriggerHandler:function(a,b){this.triggerHandlerArrays.remove(b?b.ID+"_"+a:a)},fireTrigger:function(a,d){var c=new b.ad.trigger.Trigger(a,this,d),e=a;if(this.nodeType==="SPROUT"&&a!=="projectDismissed"){c.target=b.ad.page.PageManager.getActivePage();e=c.getTarget().ID+"_"+c.getName()}e=this.triggerHandlerArrays.get(e);
if(e!=null){if(c.getName()=="mouseClick"&&b.display.DisplayObject.HTML_EVENT_TRIGGER_MAP.mouseClick=="touchend"){var f=this.touches[d.changedTouches[0].identifier];if(f){f=Math.sqrt(Math.pow(f.x-d.changedTouches[0].screenX,2)+Math.pow(f.y-d.changedTouches[0].screenY,2));delete this.touches[d.changedTouches[0].identifier];if(f>10)return}}e.forEach(function(a){a.method.call(a.object,c)})}},touches:{},addHTMLListener:function(a,d){if(this.htmlEventListeners.get(a)==null){var c=this,e=null,f=function(a,
b){c.htmlEventListeners.put(a,b);c.display.html.bind(a,b)};if(d.match(/^swipe/)&&a=="touchstart"){var e={touchstart:function(a){c.swipeStartTime=(new Date).getTime();c.swipeStartPoint={x:a.touches[0].pageX,y:a.touches[0].pageY}},touchmove:function(a){a.preventDefault();c.handleEndSwipe(a)},touchend:function(a){c.handleEndSwipe(a);c.swipeStartPoint=c.swipeEndPoint=c.swipeStartTime=null},touchcancel:function(){c.swipeStartPoint=c.swipeEndPoint=c.swipeStartTime=null}},h;for(h in e)f(h,e[h])}else{e=d.match(/^swipe/)?
function(a){if(b.display.DisplayManager.isUserInteractionAllowed()){c.swipeStartTime=(new Date).getTime();c.swipeStartPoint={x:a.pageX,y:a.pageY};c.htmlEventListeners.get("mouseup")!=null&&c.display.html.unbind("mouseup",c.htmlEventListeners.get("mouseup"));f("mouseup",function(a){c.handleEndSwipe(a)})}}:function(a){if(b.display.DisplayManager.isUserInteractionAllowed()){b.util.Broadcaster.hasListener("TRACK")&&b.util.Broadcaster.sendMessage("TRACK",{srID:5,page:b.ad.page.PageManager.getCurrentPageIndex()+
1,event:a});c.fireTrigger(d,a)}};d=="mouseClick"&&b.display.DisplayObject.HTML_EVENT_TRIGGER_MAP.mouseClick=="touchend"&&f("touchstart",function(a){b.display.DisplayManager.isUserInteractionAllowed()&&(c.touches[a.changedTouches[0].identifier]={x:a.changedTouches[0].screenX,y:a.changedTouches[0].screenY})});f(a,e)}}},handleEndSwipe:function(a){if(this.swipeStartPoint!=null)if(a.type=="touchmove")this.swipeEndPoint={x:a.touches[0].pageX,y:a.touches[0].pageY};else{if(a.type!="touchend"){this.swipeEndPoint=
{x:a.pageX,y:a.pageY};this.htmlEventListeners.get("mouseup")!=null&&this.display.html.unbind("mouseup",this.htmlEventListeners.get("mouseup"))}if(this.swipeEndPoint!=null){var b;b=(new Date).getTime()-this.swipeStartTime;var c=Math.abs(this.swipeEndPoint.x-this.swipeStartPoint.x),e=Math.abs(this.swipeEndPoint.y-this.swipeStartPoint.y);if((c>20||e>20)&&b<500){b=c>e?this.swipeEndPoint.x>this.swipeStartPoint.x?"swipeRight":"swipeLeft":this.swipeEndPoint.y>this.swipeStartPoint.y?"swipeDown":"swipeUp";
this.fireTrigger(b,a)}}}},removeHTMLListener:function(a){var a=b.display.DisplayObject.HTML_EVENT_TRIGGER_MAP[a],d=this.htmlEventListeners.get(a);if(d!=null){this.display.html.unbind(a,d);this.htmlEventListeners.remove(a)}},reportReady:function(){this.ready=true;this.stopBlocking();this.dispatchEvent(new b.event.Event(b.ad.SproutDisplayNode.READY_EVENT))}},"sprout.ad.SproutDisplayNode");b.ad.SproutDisplayNode.READY_EVENT="READY_EVENT";b.display.BasicDisplay={};b.display=b.display||{};b.display.BasicDisplay=
b.display.DisplayObject.extend({construct:function(a){this._super(a);this.activeTransitions=new b.util.HashMap;this.activeStyles=new b.util.HashMap;this.animatingProperties={};this.activeAnimation=null;this.active=false;this.translateY=this.translateX=0;this.hardwareAcceleratedTransitionsEnabled=this.transformsEnabled=true;if(b.util.Browser.android)this.hardwareAcceleratedTransitionsEnabled=false},isHidden:function(){return!this.visibility||!this.parent.visibility},getX:function(){return this.x},
setX:function(a,b,c){a=j.round(a-0,2);if(b)this.addTransition("x",a,b);else{this.setTranslateX(0,c);this.x=a;this.invalidateProperty("x",c)}},setTranslateX:function(a,b){if(this.transformsEnabled){this.translateX=a=j.round(a-0,2);this.invalidateProperty("x",b)}},getTranslateX:function(){return this.translateX},getY:function(){return this.y},setY:function(a,b,c){a=j.round(a-0,2);if(b)this.addTransition("y",a,b);else{this.setTranslateY(0,c);this.y=a;this.invalidateProperty("y",c)}},setTranslateY:function(a,
b){if(this.transformsEnabled){this.translateY=a=j.round(a-0,2);this.invalidateProperty("y",b)}},getTranslateY:function(){return this.translateY},getWidth:function(){return this.width},setWidth:function(a,b,c){a=j.round(a-0,2);a<0&&(a=0);if(b)this.addTransition("width",a,b);else{this.width=a;this.invalidateProperty("width",c)}},getHeight:function(){return this.height},setHeight:function(a,b,c){a=j.round(a-0,2);a<0&&(a=0);if(b)this.addTransition("height",a,b);else{this.height=a;this.invalidateProperty("height",
c)}},getRotation:function(){return this.rotation},setRotation:function(a,b,c){if(this.transformsEnabled){a=j.round(a-0,2);if(b)this.addTransition("rotation",a,b);else{this.rotation=a;this.invalidateProperty("rotation",c)}}},getFillColor:function(){return this.fillColor},setFillColor:function(a,b,c){this.fillColor=a;this.invalidateProperty("fillColor",c)},getFillColorTo:function(){return this.fillColorTo},setFillColorTo:function(a,b,c){this.fillColorTo=a;this.invalidateProperty("fillColorTo",c)},getFillType:function(){return this.fillType},
setFillType:function(a,b,c){this.fillType=a;this.invalidateProperty("fillType",c)},setVisibility:function(a){a=="true"?a=true:a=="false"&&(a=false);this.visibility=a;this.invalidateProperty("visibility")},getBorderColor:function(){return this.borderColor},setBorderColor:function(a){this.borderColor=a;this.invalidateProperty("borderColor")},getBorderWidth:function(){return this.borderWidth},setBorderWidth:function(a,b,c){a=j.round(a-0,2);a<0&&(a=0);if(b)this.addTransition("borderWidth",a,b);else{this.borderWidth=
a;this.invalidateProperty("borderWidth",c)}},getBorderStyle:function(){return this.borderStyle},setBorderStyle:function(a){this.borderStyle=a;this.invalidateProperty("borderStyle")},getOpacity:function(){return this.opacity},setOpacity:function(a,b,c){a=j.round(a-0,2);a<0&&(a=0);if(b)this.addTransition("opacity",a,b);else{this.opacity=a;this.invalidateProperty("opacity",c)}},getScale:function(){return this.scale},setScale:function(a,b,c){if(this.transformsEnabled){a=j.round(a-0,2);if(b)this.addTransition("scale",
a,b);else{this.scale=a;this.invalidateProperty("scale",c)}}},getActive:function(){return this.active},setActive:function(a){this.active=a;this.invalidateProperty("active")},setAttrValue:function(a,b,c){this.html.attr(a,b+c)},invalidateProperty:function(a,b){if(!b){var c=this.getActivePropertyStyle(a);c&&c.interrupt()}this.invalidateDisplay()},getStyle:function(a,b){if(b)return k.getComputedStyle(this.html.get(0)).getPropertyValue(a);for(var c={},e=this.stylesText,e=e&&e.length>0?e.split(";"):[],f=
0,h=e.length;f<h;f++)if(e[f].indexOf(":")>=0){var i=e[f].split(":"),m=j.trim(i[0]),i=j.trim(i[1]);c[m]=i}return c[a]},getTransform:function(a,b){var c=this.getStyle("-webkit-transform",b);if(c)if(c=c.split(/( )(?![^\(\)]*\))/))for(var e=0,f=c.length;e<f;e++)if(c[e].indexOf(a)!=-1)return c[e].substring(c[e].indexOf("(")+1,c[e].indexOf(")"))},processStyles:function(a){for(var d=this,c="",e=true,f=d.stylesText&&d.stylesText.length>0?d.stylesText.split(";"):[],h=0,i=f.length;h<i;h++)if(f[h].indexOf(":")>=
0){var k=f[h].split(":"),l=j.trim(k[0]),k=j.trim(k[1]);a[l]=k}b.display.BasicDisplay.DEFAULT_STYLES.forEach(function(b){a[b]=d.renderStyle(b)});d.activeTransitions.forEach(function(a){if(a.started){e?e=false:c=c+",";c=c+(a.style+" "+a.duration+"ms "+a.easing+" "+a.startTime+"ms")}});c.length>0?a["-webkit-transition"]=c:delete a["-webkit-transition"];if(d.activeAnimation&&d.activeAnimation.started){a["-webkit-animation-duration"]=d.activeAnimation.totalDuration;a["-webkit-animation-iteration-count"]=
1;a["-webkit-animation-name"]=d.activeAnimation.animationName;a["-webkit-animation-timing-function"]="linear";a["-webkit-animation-fill-mode"]="forwards"}else{delete a["-webkit-animation-duration"];delete a["-webkit-animation-iteration-count"];delete a["-webkit-animation-name"];delete a["-webkit-animation-timing-function"];delete a["-webkit-animation-fill-mode"]}},renderStyle:function(a){var b=h;switch(a){case "opacity":if(j.isNumeric(this.opacity))b=this.opacity;break;case "width":j.isNumeric(this.width)&&
(b=this.width+"px");break;case "height":j.isNumeric(this.height)&&(b=this.height+"px");break;case "visibility":if(this.visibility!==h){b="hidden";this.visibility&&this.active&&(b="visible")}break;case "border":if(!j.isNumeric(this.borderWidth))break;b=this.borderWidth+"px";b=this.borderColor?b+(" "+this.borderColor):b+" #000000";b=this.borderStyle?b+(" "+this.borderStyle):b+" solid";break;case "left":j.isNumeric(this.x)&&(b=this.x+"px");break;case "top":j.isNumeric(this.y)&&(b=this.y+"px");break;
case "-webkit-transform":b="";if(this.transformsEnabled){if(this.hardwareAcceleratedTransitionsEnabled){if(j.isNumeric(this.translateX)&&(this.translateX!=0||this.isPropertyAnimating("x")))b=b+("translateX("+this.translateX+"px)");if(j.isNumeric(this.translateY)&&(this.translateY!=0||this.isPropertyAnimating("y")))b=b+(" translateY("+this.translateY+"px)")}if(j.isNumeric(this.scale)&&(this.scale!=1||this.isPropertyAnimating("scale")))b=b+(" scale("+this.scale+")");if(j.isNumeric(this.rotation)&&(this.rotation!=
0||this.isPropertyAnimating("rotation")))b=b+(" rotate("+this.rotation+"deg)")}b=b?j.trim(b):h}return b},validateDisplay:function(){this._super();var a,b={},c="";this.processStyles(b);for(a in b)b[a]!==h&&b[a]!==null&&(c=c+(a+":"+b[a]+";"));this.stylesText=c},getComputedValue:function(a){var b;switch(a){case "x":b=this.getTransform("translateX",true);a=this.getStyle("left",true).replace("px","");b=parseFloat(a)+(b!==null&&b!==h?parseFloat(b):0);break;case "y":b=this.getTransform("translateY",true);
a=this.getStyle("top",true).replace("px","");b=parseFloat(a)+(b!==null&&b!==h?parseFloat(b):0);break;case "width":b=this.getStyle("width",true).replace("px","");break;case "height":b=this.getStyle("height",true).replace("px","");break;case "rotation":(a=this.getTransform("rotate",true))&&(b=a.replace("deg",""));break;case "scale":b=this.getTransform("scale",true);break;case "opacity":b=this.getStyle("opacity",true);break;case "borderWidth":b=this.getStyle("border-width",true).replace("px","")}return b},
getValue:function(a){switch(a){case "x":return this.getX();case "y":return this.getY();case "width":return this.getWidth();case "height":return this.getHeight();case "rotation":return this.getRotation();case "scale":return this.getScale();case "opacity":return this.getOpacity();case "borderWidth":return this.getBorderWidth()}},setValue:function(a,b,c){switch(a){case "x":this.setX(b,h,c);break;case "y":this.setY(b,h,c);break;case "width":this.setWidth(b,h,c);break;case "height":this.setHeight(b,h,
c);break;case "rotation":this.setRotation(b,h,c);break;case "scale":this.setScale(b,h,c);break;case "opacity":this.setOpacity(b,h,c);break;case "borderWidth":this.setBorderWidth(b,h,c)}},addActiveTransition:function(a){var b=this.getActivePropertyStyle(a.property);b&&b.interrupt();this.activeTransitions.put(a.property,a);this.setActivePropertyStyle(a.property,a);this.invalidateDisplay()},removeActiveTransition:function(a){this.activeTransitions.remove(a);this.removeActivePropertyStyle(a);this.invalidateDisplay()},
addActiveAnimation:function(a){var b=this;this.activeAnimation&&this.activeAnimation.interrupt();a.transitions.forEach(function(a){(a=b.getActivePropertyStyle(a.property))&&a.interrupt()});this.activeAnimation=a;a.transitions.forEach(function(c){b.setActivePropertyStyle(c.property,a)});this.invalidateDisplay()},removeActiveAnimation:function(){var a=this;a.activeAnimation&&a.activeAnimation.transitions.forEach(function(b){a.removeActivePropertyStyle(b.property)});a.activeAnimation=null;a.invalidateDisplay()},
addTransition:function(a,d,c){c=new b.display.Transition(c.duration,c.easingType,c.easingMode,c.delay,c.order);c.endValue=d;c.displayNode=this;c.property=a;b.display.DisplayManager.addTransition(c)},styleChanged:function(a){return this.getStyle(a)!=this.renderStyle(a)},isPropertyAnimating:function(a){return!!this.animatingProperties[a]},getActivePropertyStyle:function(a){return this.activeStyles.get(this.convertPropertyToStyle(a))},setActivePropertyStyle:function(a,b){this.animatingProperties[a]=
true;this.activeStyles.put(this.convertPropertyToStyle(a),b)},removeActivePropertyStyle:function(a){delete this.animatingProperties[a];this.activeStyles.remove(this.convertPropertyToStyle(a))},convertPropertyToStyle:function(a){var b="";switch(a){case "x":b=this.executeTransforms&&this.hardwareAcceleratedTransitionsEnabled?"-webkit-transform":"left";break;case "y":b=this.executeTransforms&&this.hardwareAcceleratedTransitionsEnabled?"-webkit-transform":"top";break;case "width":case "height":case "opacity":b=
a;break;case "rotation":case "scale":b="-webkit-transform";break;case "borderWidth":b="border-width"}return b}},"sprout.display.BasicDisplay");b.display.BasicDisplay.DEFAULT_STYLES="opacity width height visibility border left top -webkit-transform".split(" ");b.ad.page={};b.ad.page.Page={};b.ad.page=b.ad.page||{};b.ad.page.Page=b.ad.SproutDisplayNode.extend({construct:function(a,d){this._super(a,d);this.nodeType=this.masterType?"MASTERPAGE":"PAGE";this.elements=new b.util.HashMap;this.numberElementsReady=
0;this.active=false;this.properties={};this.isShakeListenerSetup=false},messageIn:function(a){switch(a){case b.application.ApplicationDefines.SHAKE_MESSAGE:this.active&&this.fireTrigger(b.ad.trigger.TriggerDefines.SHAKE)}},readyCheck:function(){this.numberElementsReady>=this.getElements().size()&&this.reportReady()},appendChild:function(a){this._super(a);if(a.nodeType==="ELEMENT"){this.elements.put(a.ID,a);a.addEventListener(b.ad.SproutDisplayNode.READY_EVENT,this.handleElementReady,this)}},initialize:function(){this.readyCheck()},
createDisplay:function(){this.display=new b.display.BasicDisplay(this.displayState)},createDisplayChildren:function(){var a=this;a.elements.forEach(function(b){b.createDisplay();a.display.appendChild(b.display);b.createDisplayChildren()})},registerTriggerHandler:function(a,d,c,e){this._super(a,d,c,e);a===b.ad.trigger.TriggerDefines.SHAKE&&this.setupShakeListener()},activate:function(){var a=this;this.display.setVisibility(true);this.display.setActive(true);this.elements.forEach(function(a){a.activate()});
this.display.invalidateDisplay(function(){a.dispatchEvent(new b.event.Event(b.ad.page.Page.PAGE_DISPLAYED_EVENT));!a.isMaster()&&(a.trackingLabel!=null&&a.trackingLabel!="")&&b.ad.tracking.Tracker.track({pageLabel:b.ad.data.Token.translateString(a.trackingLabel).translatedString,node:a})});this.active=true},deactivate:function(){this.elements.forEach(function(a){a.deactivate()});this.display.setVisibility(false);this.display.setActive(false);this.active=false},getElements:function(){return this.elements},
hasMasterBackground:function(){return this.masterBG},hasMasterForeground:function(){return this.masterFG},isMaster:function(){return this.hasOwnProperty("masterType")},setupShakeListener:function(){if(!this.isShakeListenerSetup){b.util.Broadcaster.addListener(b.application.ApplicationDefines.SHAKE_MESSAGE,this);this.isShakeListenerSetup=true}},handleElementReady:function(){this.numberElementsReady++;this.readyCheck()}},"sprout.ad.page.Page");b.ad.page.Page.PAGE_DISPLAYED_EVENT="PAGE_DISPLAYED_EVENT";
b.ad.page.PageManager={};b.ad.page=b.ad.page||{};b.ad.page.PageManager=b.event.EventDispatcher.extend({construct:function(){this._super();this.activePage=null;this.firstPageDisplayed=this.parentCanLink=false;b.util.Broadcaster.addListener("BRIDGE_READY",this)},getActivePage:function(){return this.activePage},messageIn:function(a,b){switch(a){case "BRIDGE_READY":this.parentCanLink=b.parentCanLink}},activatePage:function(a){var d=this;if(d.activePage==null||d.activePage.ID!=a){var c=b.ad.Ad.getSprout().findPageByIDOrName(a);
if(c!=null){var e=d.activePage!=null?d.activePage.hasMasterBackground():false,a=e&&!c.hasMasterBackground(),e=!e&&c.hasMasterBackground(),f=b.ad.Ad.getSprout().backgroundMasterPage,h=d.activePage!=null?d.activePage.hasMasterForeground():false,i=h&&!c.hasMasterForeground(),h=!h&&c.hasMasterForeground(),j=b.ad.Ad.getSprout().foregroundMasterPage,k=[],l=[];a?k.push(f):e&&l.push(f);d.activePage!=null&&k.push(d.activePage);l.push(c);i?k.push(j):h&&l.push(j);a=b.sequence.Sequencer.newSequence();a.addSequenceStepFunction(function(){d.dispatchEvent(new b.event.Event(b.ad.page.PageManager.BEFORE_PAGE_HIDE_EVENT));
d.activePage=null;k.forEach(function(a){a.fireTrigger("pageHide")})});a.addSequenceStepFunction(function(){d.dispatchEvent(new b.event.Event(b.ad.page.PageManager.DEACTIVATE_PAGE_START_EVENT));k.forEach(function(a){a.deactivate()});k.forEach(function(a){a.fireTrigger("after:pageHide")});d.activePage=c;l.forEach(function(a){a.activate()});l.forEach(function(a){a.fireTrigger("before:pageShow")});d.dispatchEvent(new b.event.Event(b.ad.page.PageManager.BEFORE_PAGE_SHOW_EVENT));d.firstPageDisplayed||d.activePage.addEventListener(b.ad.page.Page.PAGE_DISPLAYED_EVENT,
d.handleFirstPageDisplayed,d)});a.addSequenceStepFunction(function(){l.forEach(function(a){a.fireTrigger("pageShow")})})}}},handleFirstPageDisplayed:function(a){a.target.removeEventListener(b.ad.page.Page.PAGE_DISPLAYED_EVENT,this.handleFirstPageDisplayed,this);b.util.Broadcaster.sendMessage(b.ad.page.PageManager.FIRST_PAGE_DISPLAYED_MESSAGE);this.firstPageDisplayed=true}},"sprout.ad.page.PageManager");b.ad.page.PageManager.instance=null;b.ad.page.PageManager.getInstance=function(){if(!b.ad.page.PageManager.instance)b.ad.page.PageManager.instance=
new b.ad.page.PageManager;return b.ad.page.PageManager.instance};b.ad.page.PageManager.getActivePage=function(){return b.ad.page.PageManager.getInstance().getActivePage()};b.ad.page.PageManager.getCurrentPageIndex=function(){var a=b.ad.page.PageManager.getActivePage();return a!=null?b.ad.Ad.getSprout().getPages().indexOfKey(a.ID):0};b.ad.page.PageManager.goToPage=function(a){!b.ad.Ad.getIsExpanding()||!b.ad.Ad.isInApp()||b.ad.Ad.getAdNetwork()!==b.ad.AdDefines.AD_NETWORK.INMOBI?b.ad.page.PageManager.goToPageImmediately(a):
b.util.IFrameMessage.addListener("stateChange",function(d){d.adState==="expanded"&&b.ad.page.PageManager.goToPageImmediately(a)})};b.ad.page.PageManager.goToPageImmediately=function(a){var a=a.substring(3),d=b.ad.Ad.getSprout().getPages(),c=d.size(),e=b.ad.page.PageManager.getCurrentPageIndex();if(a=="_FIRSTPAGE")a=d.getAtIndex(0).ID;else if(a=="_LASTPAGE")a=d.getAtIndex(c-1).ID;else if(a=="_NEXTPAGE")a=d.getAtIndex(e==c-1?0:e+1).ID;else if(a=="_PREVIOUSPAGE")a=d.getAtIndex(e==0?c-1:e-1).ID;a=a.replace(":",
"_");b.ad.page.PageManager.activatePage(a)};b.ad.page.PageManager.activatePage=function(a){b.ad.page.PageManager.getInstance().activatePage(a)};b.ad.page.PageManager.addEventListener=function(a,d,c){b.ad.page.PageManager.getInstance().addEventListener(a,d,c)};b.core.Bootstrap.registerBootstrap(b.core.Bootstrap.PHASE.CONFIGURATION,function(){b.ad.page.PageManager.getInstance()});b.ad.page.PageManager.DEACTIVATE_PAGE_START_EVENT="DEACTIVATE_PAGE_START_EVENT";b.ad.page.PageManager.BEFORE_PAGE_HIDE_EVENT=
"BEFORE_PAGE_HIDE_EVENT";b.ad.page.PageManager.BEFORE_PAGE_SHOW_EVENT="BEFORE_PAGE_SHOW_EVENT";b.ad.page.PageManager.FIRST_PAGE_DISPLAYED_MESSAGE="FIRST_PAGE_DISPLAYED_MESSAGE";b.ad.Sprout={};b.ad=b.ad||{};b.ad.Sprout=b.ad.SproutDisplayNode.extend({construct:function(a,d){var c=b.util.Querystring.get();if(c.__startpage){d.startPageID=c.__startpage;if(c.__startpage_width)d.width=parseInt(c.__startpage_width);if(c.__startpage_height)d.height=parseInt(c.__startpage_height)}this._super(this,d);this.nodeType=
"SPROUT";this.pages=new b.util.HashList;this.adNetwork=d.adNetwork;this.adFormat=d.adFormat;this.nodesIDCache=new b.util.HashMap;this.nodesTypeCache=new b.util.HashMap;this.nodesTypeCache.put("SPROUT",new b.util.HashMap);this.nodesTypeCache.put("PAGE",new b.util.HashMap);this.nodesTypeCache.put("MASTERPAGE",new b.util.HashMap);this.nodesTypeCache.put("ELEMENT",new b.util.HashMap);this.nodesTypeCache.put("ACTION",new b.util.HashMap);this.nodesTypeCache.put("CONDITION",new b.util.HashMap);this.nodesTypeCache.put("EFFECT",
new b.util.HashMap);this.nodesTypeCache.put("ASSET",new b.util.HashMap)},getAdFormat:function(){return this.adFormat},getAdNetwork:function(){return this.adNetwork},preInitialize:function(){if(!this.startPageID)this.startPageID=this.pages.keys()[0]},initialize:function(){this._super();this.html=this.display.html;this.html.css("width","100%");this.html.css("height","100%");this.hasMousePositionTokens&&b.ad.data.EnvVars.enablePositionListener(this.html)},appendChild:function(a){this._super(a);if(a.masterType!==
h)if(a.masterType=="BACKGROUND")this.backgroundMasterPage=a;else{if(a.masterType=="FOREGROUND")this.foregroundMasterPage=a}else a.nodeType=="PAGE"&&this.pages.put(a.ID,a)},createDisplay:function(){this.display=new b.display.BasicDisplay(this.displayState)},createDisplayChildren:function(){var a=this;a.backgroundMasterPage.createDisplay();a.display.appendChild(a.backgroundMasterPage.display);a.backgroundMasterPage.createDisplayChildren();a.pages.forEach(function(b){b.createDisplay();a.display.appendChild(b.display);
b.createDisplayChildren()});a.foregroundMasterPage.createDisplay();a.display.appendChild(a.foregroundMasterPage.display);a.foregroundMasterPage.createDisplayChildren()},getPages:function(){return this.pages},addNodeToCache:function(a){this.nodesIDCache.put(a.ID,a);this.nodesTypeCache.get(a.nodeType).put(a.ID,a)},findPageByID:function(a){return this.nodesTypeCache.get("PAGE").get(a)},findPageByIDOrName:function(a){var b=this.findPageByID(a);b===null&&this.nodesTypeCache.get("PAGE").forEach(function(c){b===
null&&c.name==a&&(b=c)});return b},findElementByID:function(a){return this.nodesTypeCache.get("ELEMENT").get(a)},findElementsByName:function(a){var b=[];this.nodesTypeCache.get("ELEMENT").values().forEach(function(c){c.prop.name==a&&b.push(c)});return b},findNodeByID:function(a){return this.nodesIDCache.get(a)}},"sprout.ad.Sprout");b.ad.tracking.BaseTracking={};b.ad.tracking=b.ad.tracking||{};b.ad.tracking.BaseTracking=b.core.Class.extend({AVSR_VERSION:3,construct:function(){this.parentCanTrack=false;
b.util.Broadcaster.addListener("TRACKING_INIT",this);b.util.Broadcaster.addListener("TRACK",this);b.util.Broadcaster.addListener("PROCESS_URL",this);b.util.Broadcaster.addListener("BRIDGE_READY",this)},messageIn:function(a,b){switch(a){case "TRACKING_INIT":this.initialize();break;case "TRACK":this.processTracking(b);break;case "PROCESS_URL":this.processURL(b);break;case "BRIDGE_READY":this.parentCanTrack=b.parentCanTrack}},initialize:function(){this.getSession()},generateSessionID:function(){return(new Date).getTime().toString(16)+
Math.floor(Math.random()*1E6).toString(16)},processUrlParams:function(a,d){var c;c=a+("?v="+this.AVSR_VERSION);c=c+("&spid="+b.ad.Ad.getSprout().ID);c=c+("&rl="+this.getReportingLabel());c=c+("&at="+this.getAdType());c=c+("&n="+this.getAdNetwork());if(d)for(var e in d)c=c+("&"+encodeURIComponent(e)+"="+encodeURIComponent(d[e]));return c},setServerEndpoint:function(a){this.serverEndpoint=a},getAdNetwork:function(){return b.ad.Ad.getAdNetwork()},getReportingLabel:function(){var a=b.util.Querystring.get();
return b.isString(a.rl)&&a.rl.length>0?a.rl:b.isString(b.ad.Ad.getSprout().reportingLabel)&&b.ad.Ad.getSprout().reportingLabel.length>0?b.ad.Ad.getSprout().reportingLabel:""},getAdType:function(){var a=b.util.Querystring.get();if(b.isString(a.at)&&a.at.length>0)return a.at;if(b.isString(b.ad.Ad.getAdFormat()))switch(b.ad.Ad.getAdFormat()){case b.ad.AdDefines.AD_FORMAT.INTERSTITIAL:return 0;case b.ad.AdDefines.AD_FORMAT.EXPANDABLE:case b.ad.AdDefines.AD_FORMAT.COLLAPSIBLE:return 1;case b.ad.AdDefines.AD_FORMAT.STANDARD:return 2;
case b.ad.AdDefines.AD_FORMAT.TWOPIECE:return 3;default:return""}else return""},session:null,serverEndpoint:null,redirectEndpoint:null,pageNumber:NaN,pageElapsedStart:NaN,lastInteraction:null,firstInteraction:null,getSession:function(){if(this.session==null)this.session=Math.floor(Math.random()*4294967295).toString(16);return this.session},sendPageElapsed:function(a,b){var c=(new Date).getTime();this.getPixel(this.serverEndpoint,{srID:7,page:a,seconds:j.round((c-this.pageElapsedStart)/1E3,1)},b);
this.pageElapsedStart=c},processTracking:function(a){var d=this,c=false,e=b.ad.page.PageManager.getCurrentPageIndex()+1;if(a.hasOwnProperty("pageLabel")){isNaN(this.pageElapsedStart)?this.pageElapsedStart=(new Date).getTime():this.sendPageElapsed(this.pageNumber,true);this.pageNumber=e;a.srID=6;a.page=this.pageNumber}else{if(a.node!==h&&a.node.mediaType!==h){var f;a.mediaLabel=a.trackingLabel!==h&&a.trackingLabel!=null&&(f=j.trim(a.trackingLabel)).length>0?f:a.node.properties.assetTitle.value!=""?
escape(a.node.properties.assetTitle.value):a.node.properties.source.value.substr(a.node.properties.source.value.lastIndexOf("/")+1)}switch(a.action){case "EXPAND":case "A_EXPAND":a.srID=2;break;case "COLLAPSE":a.srID=3;break;case "A_COLLAPSE":a.srID=4;this.sendPageElapsed(e,true);break;case "AUTO_WATCH_VIDEO":case "AUTO_LISTEN_AUDIO":a.srID=10;break;case "WATCH_VIDEO":case "LISTEN_AUDIO":a.srID=9;break;case "PAUSE_VIDEO":case "PAUSE_AUDIO":a.srID=14;break;case "END_VIDEO":case "END_AUDIO":a.srID=
13;break;case "Q1_VIDEO":case "Q1_AUDIO":case "Q2_VIDEO":case "Q2_AUDIO":case "Q3_VIDEO":case "Q3_AUDIO":a.srID=12;a.mediaQuartile=a.action.charAt(1);break;case "MEDIA_ERROR":a.srID=16;break;default:if(a.srID===h&&a.action!==h)a.srID=99;a.srID===h&&b.log.Logger.log("No srID for "+a.action)}switch(a.srID){case 5:if(this.firstInteraction==null)this.firstInteraction=true;this.lastInteraction=a;setTimeout(function(){if(d.lastInteraction){d.getPixel(d.serverEndpoint,d.lastInteraction,false);d.lastInteraction=
null}},500);return;case 9:if(this.firstInteraction==null)this.firstInteraction=true;case 2:case 3:case 14:case 8:case 99:c=true}}b.ad.Ad.getSprout().sproutInteractionTrackingEnabled===false&&a.srID!=1||(this.parentCanTrack&&(a.srID===3||a.srID===4)?b.util.IFrameMessage.postMessageToParent("track",'"url": "'+this.getTrackingURL(this.serverEndpoint,a,c)+'"'):a.srID!==h&&this.getPixel(this.serverEndpoint,a,c))},getPixel:function(a,b,c){a=b?this.getTrackingURL(a,b,c):a;if(a.indexOf("http")==0)(new Image).src=
a},getTrackingURL:function(a,b,c){a=a+"&m="+b.srID;switch(b.srID){case 6:a=a+("&pg="+b.page);break;case 7:a=a+("&pg="+b.page);a=a+("&secs="+b.seconds);this.firstInteraction&&(a=a+this.mapInteractionData(b));break;case 5:a=a+this.mapInteractionData(b);break;case 9:this.firstInteraction&&(a=a+this.mapInteractionData(b));case 10:case 11:case 12:case 13:case 14:a=a+("&mid="+b.mediaLabel);b.mediaQuartile!==h&&(a=a+("&q="+b.mediaQuartile));break;case 16:a=a+("&mid="+b.mediaLabel);b.errorType!==h&&(a=a+
("&errorType="+b.errorType));break;case 99:a=a+("&action="+escape(b.action));b.category!==h&&b.category.length>0&&(a=a+("&category="+escape(b.category)));b.label!==h&&b.label.length>0&&(a=a+("&label="+escape(b.label)));b.value!==h&&b.value.length>0&&(a=a+("&value="+b.value));break;case 8:a=a+("&cta="+b.action.toLowerCase());b.ctaID!==h&&(a=a+("&ctaid="+b.ctaID))}if(c&&this.lastInteraction){a=a+this.mapInteractionData(this.lastInteraction);this.lastInteraction=null}return a=a+("&__t="+((new Date).getTime()+
"_"+Math.floor(Math.random()*1E3)))},mapInteractionData:function(a){var d="";if(b.isObject(a.event)){d="&it=";switch(a.event.type){case "click":case "touchend":d=d+"1";break;case "shake":d=d+"2";break;case "tilt":d=d+"3";break;default:d=d+"0"}d=d+("&as="+a.page+"."+(typeof a.event.x!=="undefined"?""+a.event.x:"0")+"."+(typeof a.event.y!=="undefined"?""+a.event.y:"0"))}else b.log.Logger.log("undefined interaction event");if(this.firstInteraction){d=d+"&fi=true";this.firstInteraction=false}return d},
getCTAID:function(a){return a.clickTag?a.clickTag:a.url.replace("//","/").split("/")[1]},processURL:function(a){var b;if(this.serverEndpoint){b=this.getTrackingURL(this.serverEndpoint,{srID:8,ctaID:this.getCTAID(a),action:"exit"},true);b=b+("&dest="+encodeURIComponent(a.url))}else b=a.url;return b}});b.ad.tracking.InMobiTracking={};b.ad.tracking=b.ad.tracking||{};b.ad.tracking.InMobiTracking=b.ad.tracking.BaseTracking.extend({curl:null,params:null,construct:function(){this._super();this.params=b.util.Querystring.get();
if(this.params.__im_curl){this.curl=this.params.__im_curl;delete this.params.__im_curl;this.params.src="sprout"}else if(this.params.curl){this.curl=this.params.curl;delete this.params.curl;this.params.src="sprout"}if(!this.curl){b.util.Broadcaster.removeListener("TRACKING_INIT",this);b.util.Broadcaster.removeListener("TRACK",this);b.util.Broadcaster.removeListener("PROCESS_URL",this);b.util.Broadcaster.removeListener("BRIDGE_READY",this)}},initialize:function(){this.curl&&this.setServerEndpoint(this.processUrlParams(this.curl,
this.params));b.log.Logger.log("Initializing InMobiTracking with endpoint: "+this.serverEndpoint);this._super()},processTracking:function(a){this._super(a)},processURL:function(a){var b=this._super(a);this.serverEndpoint?this.getPixel(b):this.getPixel(b,{srID:8,ctaID:this.getCTAID(a),action:"exit"},true)},getTrackingURL:function(a,b,c){return this._super(a,b,c)}});b.ad.tracking.InMobiTracking.instance=null;b.ad.tracking.InMobiTracking.getInstance=function(){if(!b.ad.tracking.InMobiTracking.instance)b.ad.tracking.InMobiTracking.instance=
new b.ad.tracking.InMobiTracking;return b.ad.tracking.InMobiTracking.instance};b.ad.tracking.InMobiTracking.getSession=function(){return b.ad.tracking.InMobiTracking.getInstance().getSession()};b.core.Bootstrap.registerBootstrap(b.core.Bootstrap.PHASE.CONFIGURATION,function(){b.ad.tracking.InMobiTracking.getInstance()});b.ad.tracking.SproutTracking={};b.ad.tracking=b.ad.tracking||{};b.ad.tracking.SproutTracking=b.ad.tracking.BaseTracking.extend({construct:function(){this._super()},initialize:function(){var a=
this.generateSessionID();if(b.ad.Ad.getSprout().sproutTrackingEndpoint){a=this.processUrlParams(b.ad.Ad.getSprout().sproutTrackingEndpoint,{sessID:a});this.setServerEndpoint(a);this.redirectEndpoint=a}if(!this.serverEndpoint.length){a=this.processUrlParams("http://d2mevh7dl7io3n.cloudfront.net/t.gif");this.setServerEndpoint(a)}b.log.Logger.log("Initializing SproutTracking with endpoint(s): "+this.serverEndpoint);this.getSession();this._super()},processTracking:function(a){this._super(a)},processURL:function(a){var d=
this._super(a);b.ad.Ad.navigateURL(d,a.target)},getTrackingURL:function(a,b,c){return this._super(a,b,c)}});b.ad.tracking.SproutTracking.instance=null;b.ad.tracking.SproutTracking.getInstance=function(){if(!b.ad.tracking.SproutTracking.instance)b.ad.tracking.SproutTracking.instance=new b.ad.tracking.SproutTracking;return b.ad.tracking.SproutTracking.instance};b.ad.tracking.SproutTracking.getSession=function(){return b.ad.tracking.SproutTracking.getInstance().getSession()};b.core.Bootstrap.registerBootstrap(b.core.Bootstrap.PHASE.CONFIGURATION,
function(){b.ad.tracking.SproutTracking.getInstance()});b.debug={};b.debug.DebugDisplay={};b.debug=b.debug||{};b.debug.DebugDisplay=b.display.BasicDisplay.extend({construct:function(a){a.ID="sproutdebug";this._super(a);this.debugConsoleHtml=this.debugCloseButtonHtml=this.debugWrapperHtml=null},buildDisplay:function(){this._super();this.createDebugWrapper();this.createDebugCloseButton();this.createDebugConsole()},initializeDisplay:function(){this._super();var a={display:this};j(this.debugCloseButtonHtml).bind("click",
a,this.handleClick)},drawDisplay:function(){this.debugConsoleHtml.setAttribute("style","position:absolute;left:2px;top:35px;width:"+(this.width-8)+"px;height:"+(this.height-41)+"px;background-color:#FFFFFF;border:2px solid #cccccc;white-space: pre-wrap;overflow:scroll;")},processStyles:function(a){this._super(a);a.display=a.visibility==="visible"?"block":"none";delete a.visibility;a["z-index"]="9999"},appendMessage:function(a){var b=this.debugConsoleHtml.innerHTML;this.debugConsoleHtml.innerHTML=
b+(a+"\n")},createDebugWrapper:function(){if(!this.debugWrapperHtml){this.debugWrapperHtml=l.createElement("div");this.debugWrapperHtml.id=this.ID;this.parent.html.append(this.debugWrapperHtml)}},createDebugCloseButton:function(){if(!this.debugCloseButtonHtml){this.debugCloseButtonHtml=l.createElement("div");this.debugCloseButtonHtml.innerHTML="X";this.debugCloseButtonHtml.setAttribute("style","position:absolute;left:"+(this.width-30)+"px;top:6px;width:8px;height:13px;cursor:pointer;-webkit-box-shadow:inset 0px 0px 0px 2px #ffffff;box-shadow:inset 0px 0px 0px 2px #ffffff;background-color:#000000;-webkit-border-radius:12px;border-radius:12px;border:1px solid #cccccc;color:#ffffff;font: normal 12px Arial;text-decoration:none;padding:4px 7px;");
this.debugWrapperHtml.appendChild(this.debugCloseButtonHtml)}},createDebugConsole:function(){if(!this.debugConsoleHtml){this.debugConsoleHtml=l.createElement("div");this.debugConsoleHtml.setAttribute("style","position:absolute;left:2px;top:35px;width:"+(this.width-8)+"px;height:"+(this.height-41)+"px;background-color:#FFFFFF;border:2px solid #cccccc;white-space: pre-wrap;overflow:scroll;");this.debugWrapperHtml.appendChild(this.debugConsoleHtml)}},handleClick:function(a){a.data.display.setVisibility(false)}},
"sprout.debug.DebugDisplay");b.debug.Debug={};b.debug=b.debug||{};b.debug.Debug=b.core.Class.extend({construct:function(){this.debugDisplay=null;this.hitStartMark=false;this.endPoint=null;b.util.Broadcaster.addListener("APPLICATION_CREATE",this);b.util.Broadcaster.addListener("APPLICATION_INIT",this);b.util.Broadcaster.addListener(b.log.Logger.LOG_MESSAGE,this)},messageIn:function(a,d){switch(a){case "APPLICATION_CREATE":this.createDisplay();break;case "APPLICATION_INIT":this.initialize();break;case b.log.Logger.LOG_MESSAGE:this.processLogMessage(d)}},
initialize:function(){b.util.Browser.isTouchDevice()?this.initializeDebugSwipeListener():this.initializeDebugKeypressListener()},createDisplay:function(){this.debugDisplay=new b.debug.DebugDisplay({x:0,y:0,width:b.ad.Ad.getWidth(),height:b.ad.Ad.getHeight(),visibility:false,stylesText:"position:absolute;"});this.debugDisplay.setActive(true);b.ad.Ad.appendChild(this.debugDisplay)},processLogMessage:function(a){a=a.time+": "+a.message;console&&console.log(a);b.util.IFrameMessage.postMessageToParent("log",
'"message":"'+escape(a)+'"');(new Image).src="http://sprout.local/log.php?"+a;this.debugDisplay.appendMessage(a)},showDebugPanel:function(){this.debugDisplay.setVisibility(true)},hideDebugPanel:function(){this.debugDisplay.setVisibility(false)},initializeDebugKeypressListener:function(){var a={display:this};j(l).bind("keypress",a,this.handleKeypress)},initializeDebugSwipeListener:function(){var a={display:this};b.ad.Ad.getInstance().html.bind("touchstart",a,this.handleTouchStart);b.ad.Ad.getInstance().html.bind("touchmove",
a,this.handleTouchMove);b.ad.Ad.getInstance().html.bind("touchend",a,this.handleTouchEnd);b.ad.Ad.getInstance().html.bind("touchcancel",a,this.handleTouchCancel)},handleKeypress:function(a){a.ctrlKey&&a.keyIdentifier==="U+0044"&&a.data.display.showDebugPanel()},handleTouchStart:function(a){var b=a.touches[0].screenY,c=k.screen.availHeight;if(a.touches[0].screenX<75&&b>c-75)a.data.display.hitStartMark=true},handleTouchMove:function(a){if(a.data.display.hitStartMark)a.data.display.endPoint={x:a.touches[0].screenX,
y:a.touches[0].screenY}},handleTouchEnd:function(a){if(a.data.display.hitStartMark&&a.data.display.endPoint!==null){var b=a.data.display.endPoint.y;a.data.display.endPoint.x>k.screen.availWidth-75&&b<75&&a.data.display.showDebugPanel()}a.data.display.endPoint=null;a.data.display.hitStartMark=false},handleTouchCancel:function(a){a.data.display.endPoint=null;a.data.display.hitStartMark=false}},"sprout.debug.Debug");b.debug.Debug.instance=new b.debug.Debug;b.ad.closebutton={};b.ad.closebutton.CloseButtonDisplay=
{};b.ad.closebutton=b.ad.closebutton||{};b.ad.closebutton.CloseButtonDisplay=b.display.BasicDisplay.extend({construct:function(a){a.ID="closebutton";this._super(a);this.closeButtonImageHtml=this.closeButtonBackupHtml=this.closeButtonWrapperHtml=null;this.loadedSource="";this.ready=this.usingBackup=this.loading=false},getSource:function(){return this.source},setSource:function(a){if(a!==this.source){this.source=a;this.invalidateDisplay();this.useBackup(false)}},preInitializeDisplay:function(){this._super();
this.source||this.setSource(b.ad.closebutton.CloseButtonDisplay.CLOSE_BUTTON_DEFAULT_SOURCE)},buildDisplay:function(){this._super();this.createCloseButtonWrapper();if(this.usingBackup){this.destroyCloseButtonImage();this.createBackupButton()}else{this.createCloseButtonImage();this.destroyBackupButton()}},initializeDisplay:function(){this._super();var a={display:this};j(this.closeButtonWrapperHtml).bind("click",a,this.handleClick)},drawDisplay:function(){this._super();if(this.closeButtonImageHtml){var a=
"block";if(this.source!==this.loadedSource){this.loadedSource=this.closeButtonImageHtml.src=this.source;this.loading=true}this.loading&&(a="none");var d=(this.getWidth()-this.closeButtonImageHtml.width)/2,c=(this.getHeight()-this.closeButtonImageHtml.height)/2;this.closeButtonImageHtml.setAttribute("style","display:"+a+";position:absolute;left:"+d+"px;top:"+c+"px;cursor:pointer;")}else{d=this.getWidth()-b.ad.closebutton.CloseButtonDisplay.CLOSE_BUTTON_DEFAULT_WIDTH;c=this.getHeight()-b.ad.closebutton.CloseButtonDisplay.CLOSE_BUTTON_DEFAULT_HEIGHT;
this.closeButtonBackupHtml.setAttribute("style","display:block;position:absolute;left:"+d+"px;top:"+c+"px;width:"+b.ad.closebutton.CloseButtonDisplay.CLOSE_BUTTON_DEFAULT_WIDTH+"px;height:"+b.ad.closebutton.CloseButtonDisplay.CLOSE_BUTTON_DEFAULT_HEIGHT+"px;cursor:pointer;-webkit-box-shadow:inset 0px 0px 0px 3px #ffffff;box-shadow:inset 0px 0px 0px 3px #ffffff;background-color:#000000;-webkit-border-radius:42px;border-radius:42px;border:2px solid #cccccc;color:#ffffff;font: normal 15px Arial;padding:6px 10px;text-decoration:none;");
this.ready||this.reportReady()}},processStyles:function(a){this._super(a);a.overflow="hidden"},createCloseButtonWrapper:function(){if(!this.closeButtonWrapperHtml){this.closeButtonWrapperHtml=l.createElement("div");this.closeButtonWrapperHtml.id=this.ID;this.parent.html.append(this.closeButtonWrapperHtml)}},createCloseButtonImage:function(){var a=this;if(!this.closeButtonImageHtml){this.closeButtonImageHtml=new Image;this.closeButtonImageHtml.style.display="none";this.closeButtonImageHtml.onload=
function(){a.loading=false;a.invalidateDisplay();a.reportReady()};this.closeButtonImageHtml.onerror=function(){if(a.source===b.ad.closebutton.CloseButtonDisplay.CLOSE_BUTTON_DEFAULT_SOURCE){a.loading=false;a.useBackup(true)}else a.setSource(b.ad.closebutton.CloseButtonDisplay.CLOSE_BUTTON_DEFAULT_SOURCE)};if(this.source===b.ad.closebutton.CloseButtonDisplay.CLOSE_BUTTON_DEFAULT_SOURCE){this.closeButtonImageHtml.width=50;this.closeButtonImageHtml.height=50}this.closeButtonWrapperHtml.appendChild(this.closeButtonImageHtml)}},
destroyCloseButtonImage:function(){if(this.closeButtonImageHtml){this.closeButtonWrapperHtml.removeChild(this.closeButtonImageHtml);this.closeButtonImageHtml.onload=null;this.closeButtonImageHtml=this.closeButtonImageHtml.onerror=null}},createBackupButton:function(){this.closeButtonBackupHtml=l.createElement("div");this.closeButtonBackupHtml.innerHTML="X";this.closeButtonWrapperHtml.appendChild(this.closeButtonBackupHtml)},destroyBackupButton:function(){if(this.closeButtonBackupHtml){this.closeButtonWrapperHtml.removeChild(this.closeButtonBackupHtml);
this.closeButtonBackupHtml=null}},reportReady:function(){this.ready=true;this.dispatchEvent(new b.event.Event(b.ad.closebutton.CloseButtonDisplay.CLOSE_BUTTON_READY_EVENT))},useBackup:function(a){if(this.usingBackup!==a){this.usingBackup=a;this.invalidateDisplayBuild()}},handleClick:function(a){a.data.display.dispatchEvent(new b.event.Event("clickEvent"))}},"sprout.ad.closebutton.CloseButtonDisplay");b.ad.closebutton.CloseButtonDisplay.CLOSE_BUTTON_DEFAULT_SOURCE="http://edge.sproutbuilder.com/html/assets/mraid-close-100x100.png";
b.ad.closebutton.CloseButtonDisplay.CLOSE_BUTTON_DEFAULT_WIDTH=50;b.ad.closebutton.CloseButtonDisplay.CLOSE_BUTTON_DEFAULT_HEIGHT=50;b.ad.closebutton.CloseButtonDisplay.CLOSE_BUTTON_READY_EVENT="CLOSE_BUTTON_READY_EVENT";b.ad.closebutton.CloseButtonDefines={};b.ad.closebutton=b.ad.closebutton||{};b.ad.closebutton.CloseButtonDefines={};b.ad.closebutton.CloseButtonDefines.CLOSE_BUTTON_TYPE={DEFAULT:"default",CUSTOM:"custom",NONE:"none"};b.ad.closebutton.CloseButtonManager={};b.ad.closebutton=b.ad.closebutton||
{};b.ad.closebutton.CloseButtonManager=b.blocking.BlockingObject.extend({construct:function(){this._super();this.closeButtonDisplay=null;this.closeButtonReady=this.closeButtonRequired=false;b.util.Broadcaster.addListener("START_BLOCKING",this);b.util.Broadcaster.addListener("APPLICATION_CREATE",this)},messageIn:function(a){switch(a){case "APPLICATION_CREATE":if(b.ad.Ad.getAdFormat()===b.ad.AdDefines.AD_FORMAT.EXPANDABLE||b.ad.Ad.getAdFormat()===b.ad.AdDefines.AD_FORMAT.INTERSTITIAL||b.ad.Ad.getAdFormat()===
b.ad.AdDefines.AD_FORMAT.TWOPIECE)if(b.ad.Ad.getSupportedFeatures().getCustomCloseButton())switch(b.ad.Ad.getCloseButtonType()){case b.ad.closebutton.CloseButtonDefines.CLOSE_BUTTON_TYPE.CUSTOM:this.createCloseButton();b.ad.Ad.useCustomClose(true);break;case b.ad.closebutton.CloseButtonDefines.CLOSE_BUTTON_TYPE.DEFAULT:if(b.ad.Ad.getSupportedFeatures().getProvidesDefaultCloseButton())this.stopBlocking();else{this.createCloseButton();b.ad.Ad.useCustomClose(true)}break;case b.ad.closebutton.CloseButtonDefines.CLOSE_BUTTON_TYPE.NONE:b.ad.Ad.useCustomClose(true);
this.stopBlocking()}else this.stopBlocking();else this.stopBlocking();break;case "START_BLOCKING":this.closeButtonRequired&&!this.closeButtonReady&&b.ad.Ad.registerBlockingObject(this)}},createCloseButton:function(){this.closeButtonRequired=true;var a=false;b.ad.Ad.getAdState()===b.ad.AdDefines.AD_STATE.EXPANDED&&(a=true);this.closeButtonDisplay=new b.ad.closebutton.CloseButtonDisplay({x:b.ad.Ad.getWidth()-b.ad.closebutton.CloseButtonDisplay.CLOSE_BUTTON_DEFAULT_WIDTH,y:0,width:b.ad.closebutton.CloseButtonDisplay.CLOSE_BUTTON_DEFAULT_WIDTH,
height:b.ad.closebutton.CloseButtonDisplay.CLOSE_BUTTON_DEFAULT_HEIGHT,source:b.ad.Ad.getCloseButtonSource(),visibility:a,stylesText:"position:absolute;"});this.closeButtonDisplay.setActive(true);this.closeButtonDisplay.addEventListener("clickEvent",function(){if(b.ad.Ad.getAdFormat()===b.ad.AdDefines.AD_FORMAT.INTERSTITIAL)b.ad.Ad.close(this,true);else{b.ad.Ad.collapse(b.ad.Ad.getWidth(),b.ad.Ad.getHeight(),this,"click",true,true);b.ad.Ad.getAdFormat()===b.ad.AdDefines.AD_FORMAT.EXPANDABLE&&!(b.ad.Ad.getAdNetwork()===
b.ad.AdDefines.AD_NETWORK.MILLENNIAL&&b.ad.Ad.isInApp())&&b.ad.page.PageManager.goToPage("sp:_FIRSTPAGE")}},this);this.closeButtonDisplay.addEventListener(b.ad.closebutton.CloseButtonDisplay.CLOSE_BUTTON_READY_EVENT,this.handleCloseButtonReady,this);b.ad.Ad.appendChild(this.closeButtonDisplay);b.ad.Ad.getInstance().addEventListener("STATE_CHANGE_EVENT",this.handleStateChange,this)},declareCloseButtonReady:function(){this.closeButtonReady=true;this.stopBlocking()},handleCloseButtonReady:function(){this.declareCloseButtonReady()},
handleStateChange:function(a){switch(a.data.newState){case b.ad.AdDefines.AD_STATE.EXPANDED:this.closeButtonDisplay.setVisibility(true);break;case b.ad.AdDefines.AD_STATE.CLOSED:case b.ad.AdDefines.AD_STATE.COLLAPSED:this.closeButtonDisplay.setVisibility(false)}}},"sprout.ad.closebutton.CloseButtonManager");b.ad.closebutton.CloseButtonManager.instance=null;b.ad.closebutton.CloseButtonManager.getInstance=function(){if(!b.ad.closebutton.CloseButtonManager.instance)b.ad.closebutton.CloseButtonManager.instance=
new b.ad.closebutton.CloseButtonManager;return b.ad.closebutton.CloseButtonManager.instance};b.core.Bootstrap.registerBootstrap(b.core.Bootstrap.PHASE.CONFIGURATION,function(){b.ad.closebutton.CloseButtonManager.getInstance()});b.display.RectangleDisplay={};b.display=b.display||{};b.display.RectangleDisplay=b.display.BasicDisplay.extend({construct:function(a){this._super(a)},processStyles:function(a){this._super(a);var b=this.getFillColor(),c=this.getFillColorTo();if(b=="transparent"||b=="-1")b="rgba(255, 255, 255, 0.0)";
if(c=="transparent"||c=="-1")c="rgba(255, 255, 255, 0.0)";if(this.getFillType()=="NONE")a.background="rgba(255, 255, 255, 0.0)";else if(this.getFillType()=="SOLID")a.background=b;else{var e="linear",f="";switch(this.getFillType()){case "RADIAL":var e="radial",f=this.getWidth()/2,h=this.getHeight()/2,i=(this.getWidth()+this.getHeight())/4,f=f+" "+h+", 0, "+f+" "+h+", "+i;break;case "HORIZONTAL":f="left top, right top";break;case "VERTICAL":f="left top, left bottom";break;case "SLANT":f="right top, left bottom";
break;case "NEGATIVE_SLANT":f="left top, right bottom"}a.background="-webkit-gradient("+e+","+f+",from("+b+"),to("+c+"))"}}},"sprout.display.RectangleDisplay");b.ad.element={};b.ad.element.Element={};b.ad.element=b.ad.element||{};b.ad.element.Element=b.ad.SproutDisplayNode.extend({construct:function(a,d){this._super(a,d);this.nodeType="ELEMENT";this.properties={};this.prop={};this.prop.borderWidth=0;this.prop.minimumWidth=0;this.prop.minimumHeight=0;this.boundTokens={};this.boundProperties={};this.unalteredPropertyValues=
{};this.addProperty(b.ad.element.Element.PROPERTY_TYPE.STRING,"name",d.name);this.addProperty(b.ad.element.Element.PROPERTY_TYPE.NUMBER,"x",d.properties.x);this.addProperty(b.ad.element.Element.PROPERTY_TYPE.NUMBER,"y",d.properties.y);this.addProperty(b.ad.element.Element.PROPERTY_TYPE.NUMBER,"width",d.properties.width);this.addProperty(b.ad.element.Element.PROPERTY_TYPE.NUMBER,"height",d.properties.height);this.addProperty(b.ad.element.Element.PROPERTY_TYPE.NUMBER,"minimumWidth",d.properties.minimumWidth);
this.addProperty(b.ad.element.Element.PROPERTY_TYPE.NUMBER,"minimumHeight",d.properties.minimumHeight);this.addProperty(b.ad.element.Element.PROPERTY_TYPE.NUMBER,"borderWidth",d.properties.borderWidth);this.addProperty(b.ad.element.Element.PROPERTY_TYPE.STRING,"borderColor",d.properties.borderColor);this.addProperty(b.ad.element.Element.PROPERTY_TYPE.STRING,"borderStyle",d.properties.borderStyle);this.addProperty(b.ad.element.Element.PROPERTY_TYPE.NUMBER,"opacity",d.properties.opacity);this.addProperty(b.ad.element.Element.PROPERTY_TYPE.BOOLEAN,
"visibility",d.properties.visibility);this.addProperty(b.ad.element.Element.PROPERTY_TYPE.NUMBER,"rotation",d.properties.rotation);this.addProperty(b.ad.element.Element.PROPERTY_TYPE.NUMBER,"scale",d.properties.scale);this.addProperty(b.ad.element.Element.PROPERTY_TYPE.STRING,"fillType",d.properties.fillType);this.addProperty(b.ad.element.Element.PROPERTY_TYPE.STRING,"fillColor",d.properties.fillColor);this.addProperty(b.ad.element.Element.PROPERTY_TYPE.STRING,"fillColorTo",d.properties.fillColorTo);
this.active=this.initialized=false},initialize:function(a){this._super();for(var b in this.properties)this.initProperty(b,this.properties[b].value);(this.link.url||this.link.clickTag)&&this.registerTriggerHandler("mouseClick",this,this.handleClick);(a===h||a===true)&&this.reportReady();this.initialized=true},activate:function(){this.active=true;this.display.setActive(true)},deactivate:function(){this.active=false;this.display.setActive(false)},addProperty:function(a,b,c){this.properties[b]={type:a,
name:b,value:c,pending:false};this.prop[b]=c},removeProperty:function(a){delete this.properties[a];delete this.prop[a]},initProperty:function(a,b){this.initializeTokens(a,b)!=b&&this.setProperty(a,b)},getProperty:function(a){a=this.properties[a];return a!==h?a.value:null},setProperty:function(a,d,c){d=this.initializeTokens(a,d);switch(a){case "opacity":if(j.isNumeric(d)){d=d-0;d<0?d=0:d>100&&(d=100);this._setProperty(a,d,c)}break;case "width":if(j.isNumeric(d)){d=d-0;if(d<this.minimumWidth)d=this.minimumWidth;
d<0&&(d=0);this._setProperty(a,d,c)}break;case "height":if(j.isNumeric(d)){d=d-0;if(d<this.minimumHeight)d=this.minimumHeight;d<0&&(d=0);this._setProperty(a,d,c)}break;case "scale":case "borderWidth":if(j.isNumeric(d)){d=d-0;d<0&&(d=0);this._setProperty(a,d,c)}break;default:var e=this.properties[a];if(e!==h)if(e.type==b.ad.element.Element.PROPERTY_TYPE.STRING)b.isString(d)&&this._setProperty(a,d,c);else if(e.type==b.ad.element.Element.PROPERTY_TYPE.NUMBER){d=Number(d);b.isNumeric(d)&&this._setProperty(a,
d,c)}else if(e.type==b.ad.element.Element.PROPERTY_TYPE.BOOLEAN){d=="true"?d=true:d=="false"&&(d=false);b.isBoolean(d)&&this._setProperty(a,d,c)}else e.type==b.ad.element.Element.PROPERTY_TYPE.ARRAY&&b.isArray(d)&&this._setProperty(a,d,c)}},updateProperty:function(a,b){var c=this.properties[a];if(c!==h){c.value=b;this.prop[a]=b;this.dispatchPropertyChangeEvent(a)}},_setProperty:function(a,b,c){var e=this.properties[a];if(e!==h){c={finalValue:b,transition:c};e.value=b;this.prop[a]=b;this.handlePropertyChanged(e,
c)}},handlePropertyChanged:function(a,b){var c=this.display,e=this.prop;switch(a.name){case "x":c.setX(Math.ceil(e.x-e.borderWidth),b.transition);this.dispatchPropertyChangeEvent(a.name);break;case "y":c.setY(Math.ceil(e.y-e.borderWidth),b.transition);this.dispatchPropertyChangeEvent(a.name);break;case "width":c.setWidth(e.width,b.transition);this.dispatchPropertyChangeEvent(a.name);break;case "height":c.setHeight(e.height,b.transition);this.dispatchPropertyChangeEvent(a.name);break;case "minimumWidth":a.value>
e.width&&this.setProperty("width",a.value);break;case "minimumHeight":a.value>e.height&&this.setProperty("height",a.value);break;case "opacity":c.setOpacity(a.value/100,b.transition);break;case "visibility":c.setVisibility(a.value,b.transition);this.dispatchPropertyChangeEvent(a.name);break;case "rotation":c.setRotation(a.value,b.transition);this.dispatchPropertyChangeEvent(a.name);break;case "borderWidth":c.setX(Math.ceil(e.x-e.borderWidth),b.transition);c.setY(Math.ceil(e.y-e.borderWidth),b.transition);
c.setBorderWidth(a.value,b.transition);break;case "borderColor":c.setBorderColor(a.value,b.transition);break;case "borderStyle":c.setBorderStyle(a.value,b.transition);break;case "scale":c.setScale(a.value/100,b.transition);this.dispatchPropertyChangeEvent(a.name);break;case "fillType":c.setFillType(a.value,b.transition);break;case "fillColor":c.setFillColor(a.value.replace("0x","#"),b.transition);break;case "fillColorTo":c.setFillColorTo(a.value.replace("0x","#"),b.transition)}},initializeTokens:function(a,
d){if(b.isString(d)&&b.ad.data.Token.hasToken(d)){var c=b.ad.data.Token.translateString(d),e,f;for(e=0;e<c.tokens.length;++e){f=c.tokens[e];this.boundTokens[f.getName()]=a;this.boundProperties[a]=f.getName();this.unalteredPropertyValues[a]=d;b.ad.data.Token.bindToToken(f.getName(),this)}d=c.translatedString}else if(this.boundProperties.hasOwnProperty(a)){f=this.boundProperties[a];delete this.boundProperties[a];delete this.boundTokens[f];delete this.unalteredPropertyValues[a]}return d},dispatchPropertyChangeEvent:function(a){for(var d=
0;d<arguments.length;++d)b.ad.data.Token.dispatchChangeEvent(this.prop.name+"."+arguments[d],this.getProperty(arguments[d]))},handleTokenUpdate:function(a){var d=this.boundTokens[a];if(d===h)b.ad.data.Token.unbindFromToken(a,this);else{a=this.unalteredPropertyValues[d];this._setProperty(d,b.ad.data.Token.translateString(a).translatedString)}},handleClick:function(){var a=this.link.url,d=this.link.clickTag;a.substring(0,3)=="sp:"?b.ad.page.PageManager.goToPage(a):(a||d)&&b.ad.Ad.goToURL(a,this.link.target,
d,this)}},"sprout.ad.element.Element");b.ad.element.Element.PROPERTY_TYPE={STRING:"string",NUMBER:"number",BOOLEAN:"boolean",ARRAY:"array",OBJECT:"object"};b.ad.element.RectangleElement={};b.ad.element=b.ad.element||{};b.ad.element.RectangleElement=b.ad.element.Element.extend({construct:function(a,b){this._super(a,b)},createDisplay:function(){this.display=new b.display.RectangleDisplay(this.displayState)},handlePropertyChanged:function(a,b){var c=this.display,e=this.prop;switch(a.name){case "x":c.setX(Math.ceil(e.x-
e.borderWidth/2),b.transition);this.dispatchPropertyChangeEvent(a.name);break;case "y":c.setY(Math.ceil(e.y-e.borderWidth/2),b.transition);this.dispatchPropertyChangeEvent(a.name);break;case "width":c.setWidth(e.width-e.borderWidth,b.transition);this.dispatchPropertyChangeEvent(a.name);break;case "height":c.setHeight(e.height-e.borderWidth,b.transition);this.dispatchPropertyChangeEvent(a.name);break;case "borderWidth":c.setX(Math.ceil(e.x-e.borderWidth/2),b.transition);c.setY(Math.ceil(e.y-e.borderWidth/
2),b.transition);c.setWidth(e.width-e.borderWidth,b.transition);c.setHeight(e.height-e.borderWidth,b.transition);c.setBorderWidth(e.borderWidth,b.transition);break;default:this._super(a,b)}}},"sprout.ad.element.RectangleElement");b.ad.action.GoToPageAction={};b.ad.action=b.ad.action||{};b.ad.action.GoToPageAction=b.ad.action.Action.extend({construct:function(a,b){this._super(a,b)},execute:function(){this.parameters.targetPage!=""&&b.ad.page.PageManager.goToPage(this.parameters.targetPage)}},"sprout.ad.action.GoToPageAction");
b.ad.action.ActionManager={};b.ad.action=b.ad.action||{};b.ad.action.ActionManager=b.event.EventDispatcher.extend({construct:function(){this._super();this.triggerMap=new b.util.HashMap;this.triggerActionLists=new b.util.HashMap},registerAction:function(a){var d=b.ad.Ad.getSprout().findNodeByID(a.triggerNodeID),c=d.ID+"_"+a.trigger,e=this.triggerActionLists.get(c);if(this.triggerMap.get(c)==null){d.registerTriggerHandler(a.trigger,this,this.handleTrigger);this.triggerMap.put(c,true)}if(e==null){e=
[];this.triggerActionLists.put(c,e)}e.push(a)},handleTrigger:function(a){this.triggerActionLists.get(a.target.ID+"_"+a.name).forEach(function(d){if(!d.canStopAction()){var c={},e,f;for(e in d.parameters)c[e]=d.parameters[e];for(f in d.parameters)if(b.ad.data.Token.hasToken(d.parameters[f]))d.parameters[f]=b.ad.data.Token.translateString(d.parameters[f]).translatedString;d.execute(a);d.parameters=c}})}},"sprout.ad.action.ActionManager");b.ad.action.ActionManager.instance=null;b.ad.action.ActionManager.getInstance=
function(){if(!b.ad.action.ActionManager.instance)b.ad.action.ActionManager.instance=new b.ad.action.ActionManager;return b.ad.action.ActionManager.instance};b.ad.action.ActionManager.registerAction=function(a){b.ad.action.ActionManager.getInstance().registerAction(a)};b.ad.action.Condition={};b.ad.action=b.ad.action||{};b.ad.action.Condition=b.ad.SproutNode.extend({construct:function(a,b){this._super(a,b);this.nodeType="CONDITION";this.variable=b.properties.variable;this.variableType=b.properties.type;
this.bucketID=b.properties.bucket;this.operator=b.properties.operator;this.value=b.properties.value},initialize:function(){b.ad.action.ConditionManager.registerCondition(this)},eval:function(){var a=this.parentNode.parentNode,d=new Date,c=[],e=this.getVariableType(this.variableType),c=this.getOperator(this.operator);switch(e){case 0:d=this.variable.indexOf(".");c=this.variable.slice(d+1);e=null;if(d==0)e=""+a.getProperty(c);else if(d>0){d=this.variable.substr(0,d);a=a.ownerSprout.findElementsByName(d);
if(a.length==0)return false;e=""+a[0].getProperty(c)}return this.evalStrings(e,this.value);case 28:if(this.bucketID=="")this.bucketID=b.ad.Ad.getSprout().ID;return this.evalStrings(b.util.Cookie.get(this.bucketID+"_"+this.variable),this.value);case 3:return this.evalStrings(b.ad.data.VariableManager.get(this.variable),this.value);case 2:return this.evalStrings(this.variable,this.value);case 1:return this.evalStrings(b.util.Querystring.get(this.variable),this.value);case 8:a=new Date;a.setSeconds(0,
0);c=this.value.split(":");d.setHours(Number(c[0]),Number(c[1]),0,0);return this.evalNumbers(a.getTime(),d.getTime());case 27:a=new Date;a.setHours(0,0,0,0);c=this.value.split("/");if(c.length==3){d.setFullYear(Number(c[2]),Number(c[0])-1,Number(c[1]));d.setHours(0,0,0,0)}return this.evalNumbers(a.getTime(),d.getTime());case 5:return this.evalNumbers(d.getFullYear(),Number(this.value));case 4:return this.evalNumbers(d.getMonth()+1,Number(this.value));case 7:return this.evalNumbers(d.getDate(),Number(this.value));
case 9:return this.evalNumbers(d.getHours(),Number(this.value));case 6:return this.evalNumbers(d.getDay()==0?7:d.getDay(),Number(this.value));case 11:return this.evalStrings(b.ad.data.EnvVars.getPropertyValue(11).value,this.value);case 10:a=b.ad.data.EnvVars.getPropertyValue(10).value;a=a.toLowerCase()=="en-us"?"en":a;return this.evalStrings(a,this.value);case 25:return this.evalStrings(b.ad.data.EnvVars.getPropertyValue(25).value,this.value);case 33:var a=a.ownerSprout.findElementsByName(this.variable)[0].display.html.get(0),
d=a.value,e="",f=false,h="";if(c==OPER_SELECTED||c==OPER_NOT_SELECTED)return c==OPER_NOT_SELECTED?!a.checked:a.checked;if(c==OPER_REGEX||c==OPER_NOT_REGEX){c==OPER_NOT_REGEX&&(f=true);return this.evalRegex(d,this.value,f,h)}if(c==OPER_IS_VALID||c==OPER_IS_NOT_VALID){c==OPER_IS_NOT_VALID&&(f=true);if(this.value=="email"){e="^[a-z0-9._%+-]+@(?:[a-z0-9-]+\\.)+[a-z]{2,6}$";h="i"}else if(this.value=="phone"){if(d.replace(/[^0-9]/g,"").length<10)return f?true:false;e="^[0-9\\.\\-\\+\\)\\( ]+$"}else this.value==
"zipcode"&&(e="^\\d{5}([- ]\\d{4})?$");return this.evalRegex(d,e,f,h)}return this.evalStrings(d,this.value);case 34:return this.evalNumbers(b.ad.data.EnvVars.getPropertyValue(34).value,Number(this.value));case 35:return this.evalNumbers(b.ad.data.EnvVars.getPropertyValue(35).value,Number(this.value));case 36:return this.evalStrings(b.ad.data.EnvVars.getPropertyValue(36).value,this.value);case 37:return this.evalStrings(b.ad.data.EnvVars.getPropertyValue(37).value,this.value);default:return false}},
evalStrings:function(a,d){if(b.ad.data.Token.hasToken(a))a=b.ad.data.Token.translateString(a).translatedString;if(b.ad.data.Token.hasToken(d))d=b.ad.data.Token.translateString(d).translatedString;var a=j.trim(a),d=j.trim(d),c=this.getOperator(this.operator);switch(c){case OPER_EQUALS:return a==d;case OPER_NOT_EQUALS:return a!=d;case OPER_CONTAINS:return a.indexOf(d)>-1;case OPER_EXCLUDES:return a.indexOf(d)==-1;case OPER_STARTS_WITH:return a.indexOf(d)==0;case OPER_ENDS_WITH:return b.endsWith(a,d);
case OPER_GREATER_THAN:case OPER_GREATER_THAN_OR_EQUALS:case OPER_LESS_THAN:case OPER_LESS_THAN_OR_EQUALS:var e=Number(a),f=Number(d);if(isNaN(e)||isNaN(f))break;switch(c){case OPER_GREATER_THAN:return e>f;case OPER_GREATER_THAN_OR_EQUALS:return e>=f;case OPER_LESS_THAN:return e<f;case OPER_LESS_THAN_OR_EQUALS:return e<=f}}return false},evalNumbers:function(a,b){switch(this.getOperator(this.operator)){case OPER_EQUALS:return a==b;case OPER_NOT_EQUALS:return a!=b;case OPER_GREATER_THAN:return a>b;
case OPER_GREATER_THAN_OR_EQUALS:return a>=b;case OPER_LESS_THAN:return a<b;case OPER_LESS_THAN_OR_EQUALS:return a<=b}return false},evalRegex:function(a,b,c,e){a=RegExp(b,e).test(a);return c?!a:a},getVariableType:function(a){return TYPE_ARRAY.indexOf(a)},getOperator:function(a){return OPER_ARRAY.indexOf(a)}},"sprout.ad.action.Condition");b.ad.action.ConditionManager={};b.ad.action=b.ad.action||{};b.ad.action.ConditionManager=b.event.EventDispatcher.extend({construct:function(){this._super();this.conditionLists=
new b.util.HashMap;this.executableActionLists=new b.util.HashMap;this.conditionAction=null},registerCondition:function(a){var b=a.parentNode.ID,c=this.conditionLists.get(b);if(c==null){c=[];this.conditionLists.put(b,c)}c.push(a)},registerExecutableAction:function(a){var b=this.conditionAction.ID,c=this.executableActionLists.get(b);if(c==null){c=[];this.executableActionLists.put(b,c)}c.push(a)},registerConditionAction:function(a){this.conditionAction=a},getConditions:function(a){return this.conditionLists.get(a.ID)},
getExecutableActions:function(a){return this.executableActionLists.get(a.ID)}},"sprout.ad.action.ConditionManager");b.ad.action.ConditionManager.instance=null;b.ad.action.ConditionManager.getInstance=function(){if(!b.ad.action.ConditionManager.instance)b.ad.action.ConditionManager.instance=new b.ad.action.ConditionManager;return b.ad.action.ConditionManager.instance};b.ad.action.ConditionManager.registerCondition=function(a){b.ad.action.ConditionManager.getInstance().registerCondition(a)};b.ad.action.ConditionManager.registerExecutableAction=
function(a){b.ad.action.ConditionManager.getInstance().registerExecutableAction(a)};b.ad.action.ConditionManager.registerConditionAction=function(a){b.ad.action.ConditionManager.getInstance().registerConditionAction(a)};b.ad.action.ConditionManager.getConditions=function(a){return b.ad.action.ConditionManager.getInstance().getConditions(a)};b.ad.action.ConditionManager.getExecutableActions=function(a){return b.ad.action.ConditionManager.getInstance().getExecutableActions(a)};b.ad.action.ExpandSproutAction=
{};b.ad.action=b.ad.action||{};b.ad.action.ExpandSproutAction=b.ad.action.Action.extend({construct:function(a,b){this._super(a,b)},execute:function(){b.ad.Ad.expand(this.parameters.width,this.parameters.height,this.triggerNode,this.trigger,this.isFromInteraction())}},"sprout.ad.action.ExpandSproutAction");b.ad.action.CollapseSproutAction={};b.ad.action=b.ad.action||{};b.ad.action.CollapseSproutAction=b.ad.action.Action.extend({construct:function(a,b){this._super(a,b)},execute:function(){b.ad.Ad.collapse(this.parameters.width>
0?this.parameters.width:this.ownerSprout.width,this.parameters.height>0?this.parameters.height:this.ownerSprout.height,this.triggerNode,this.trigger,this.isFromInteraction(),true)}},"sprout.ad.action.CollapseSproutAction")})(document,window);
